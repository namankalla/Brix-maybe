(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{4223:function(e,t,s){Promise.resolve().then(s.bind(s,2936))},2936:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return I}});var r=s(7437),a=s(2265),n=s(9376),l=s(7648),i=s(9205);let o=(0,i.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),c=(0,i.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),d=(0,i.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function u(e){let{projects:t,currentProjectId:s,onNewProject:a,collapsed:n,onToggle:i}=e;return(0,r.jsxs)("aside",{className:"\n      h-full flex flex-col \n      ".concat(n?"w-16":"w-64"," \n      transition-all duration-200 \n      bg-black border-r border-gray-900\n      text-gray-200\n    "),children:[(0,r.jsxs)("div",{className:"p-4 flex items-center justify-between border-b border-gray-900 h-16",children:[!n&&(0,r.jsx)("span",{className:"font-semibold text-white",children:"AI App Builder"}),(0,r.jsx)("button",{onClick:i,className:"p-1.5 rounded-md hover:bg-gray-800 text-gray-400 hover:text-white transition-colors","aria-label":n?"Expand sidebar":"Collapse sidebar",children:n?(0,r.jsx)(o,{size:18}):(0,r.jsx)(c,{size:18})})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-2",children:[(0,r.jsxs)("button",{onClick:a,className:"flex items-center justify-center space-x-2 w-full mb-3 px-3 py-2.5 rounded-lg \n            bg-gray-900 hover:bg-gray-800 text-white \n            transition-colors duration-200\n            ".concat(n?"px-3":"px-4","\n          "),children:[(0,r.jsx)(d,{size:18,className:"flex-shrink-0"}),!n&&(0,r.jsx)("span",{children:"New Project"})]}),(0,r.jsx)("div",{className:"space-y-1",children:t.map(e=>(0,r.jsxs)(l.default,{href:"/dashboard/".concat(e.id),className:"\n                flex items-center px-3 py-2.5 rounded-lg text-sm \n                ".concat(String(s)===e.id?"bg-gray-800 text-white":"text-gray-400 hover:bg-gray-900 hover:text-white","\n                transition-colors duration-200\n                ").concat(n?"justify-center":"","\n              "),title:n?e.name:"",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 flex-shrink-0 ".concat(String(s)===e.id?"bg-blue-500":"bg-gray-600")}),!n&&(0,r.jsx)("span",{className:"truncate",children:e.name})]},e.id))})]}),!n&&(0,r.jsxs)("div",{className:"p-3 border-t border-gray-900 text-xs text-gray-500",children:[(0,r.jsx)("p",{children:"AI App Builder v1.0"}),(0,r.jsxs)("p",{className:"mt-1",children:["\xa9 ",new Date().getFullYear()]})]})]})}let x=(0,i.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var m=s(2369);let p=(0,i.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),h=(0,i.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),g=(0,i.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),f=(0,i.Z)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);function y(e){let{canBuild:t,isBuilding:s,onClick:a}=e;return(0,r.jsx)("button",{disabled:!t||s,onClick:a,className:"\n        inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200\n        ".concat(t?s?"bg-blue-900 text-blue-100":"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-800 text-gray-500 cursor-not-allowed","\n        focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-black\n        disabled:opacity-70 disabled:cursor-not-allowed\n        border border-blue-700\n      "),children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{className:"w-4 h-4 animate-spin"}),(0,r.jsx)("span",{children:"Building..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Build This App"})]})})}function b(e){let{title:t,canBuild:s,isBuilding:n,onBuild:l,onMenuToggle:i,userName:o,onSignOut:c}=e,[d,u]=(0,a.useState)(!1),g=(0,a.useRef)(null);return(0,a.useEffect)(()=>{function e(e){g.current&&!g.current.contains(e.target)&&u(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.jsxs)("header",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-900 bg-black",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:i,className:"p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-800 focus:outline-none focus:ring-1 focus:ring-gray-600","aria-label":"Toggle menu",children:(0,r.jsx)(x,{size:20})}),(0,r.jsx)("h1",{className:"text-lg font-medium text-white",children:t})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(y,{canBuild:s,isBuilding:n,onClick:l}),o&&c&&(0,r.jsxs)("div",{className:"relative",ref:g,children:[(0,r.jsxs)("button",{onClick:()=>u(!d),className:"flex items-center space-x-2 px-3 py-1.5 text-sm rounded-md hover:bg-gray-900 transition-colors",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center text-gray-300",children:(0,r.jsx)(m.Z,{size:16})}),!n&&(0,r.jsx)("span",{className:"hidden md:inline text-sm text-gray-300",children:o}),(0,r.jsx)(p,{size:16,className:"text-gray-400"})]}),d&&(0,r.jsx)("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-gray-900 border border-gray-800 z-50",children:(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-300 border-b border-gray-800",children:[(0,r.jsx)("p",{className:"font-medium",children:o}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Free Plan"})]}),(0,r.jsxs)("button",{onClick:()=>{c(),u(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-800 flex items-center space-x-2",children:[(0,r.jsx)(h,{size:16}),(0,r.jsx)("span",{children:"Sign out"})]})]})})]})]})]})}var v=s(4667),j=s(653);function w(e){let{onSend:t,isLoading:s,placeholder:n}=e,[l,i]=(0,a.useState)(""),o=(0,a.useRef)(null),c=e=>{e.preventDefault();let r=l.trim();r&&!s&&(t(r),i(""),o.current&&(o.current.style.height="auto"))},d=()=>{o.current&&(o.current.style.height="auto",o.current.style.height="".concat(Math.min(o.current.scrollHeight,200),"px"))};return(0,a.useEffect)(()=>{d()},[l]),(0,r.jsx)("div",{className:"sticky bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700",children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto py-4 px-4",children:(0,r.jsxs)("form",{onSubmit:c,className:"relative",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("textarea",{ref:o,rows:1,className:"w-full max-h-[200px] min-h-[60px] px-4 py-3 pr-16 bg-gray-700 text-white rounded-xl border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 resize-none outline-none transition-all duration-200",placeholder:n||"Message AI App Builder...",value:l,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),c(e))},disabled:s}),(0,r.jsx)("button",{type:"submit",disabled:s||!l.trim(),className:"absolute right-2 bottom-2 p-2 rounded-lg ".concat(s||!l.trim()?"text-gray-500":"text-white bg-blue-600 hover:bg-blue-700"," transition-colors"),"aria-label":"Send message",children:s?(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(j.kcA,{className:"w-5 h-5"})})]}),(0,r.jsx)("p",{className:"mt-2 text-xs text-center text-gray-400",children:"AI can make mistakes. Consider checking important information."})]})})})}var N=s(9116),k=s(2141);let S=[{id:"1",name:"E-commerce App",createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-20").toISOString(),messages:[],blueprint:null},{id:"2",name:"Task Manager",createdAt:new Date("2024-01-10").toISOString(),updatedAt:new Date("2024-01-18").toISOString(),messages:[],blueprint:null}];function I(){let e=(0,n.useParams)().projectId,t=(0,n.useRouter)(),[s,l]=(0,a.useState)(S),[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[x,m]=(0,a.useState)(!1),[p,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1),[y,j]=(0,a.useState)([]),[I,A]=(0,a.useState)(null),[O,M]=(0,a.useState)(""),[C,D]=(0,a.useState)(null),[E,T]=(0,a.useState)(null),z=(0,a.useMemo)(()=>{var t;return null!==(t=s.find(t=>t.id===e))&&void 0!==t?t:s[0]},[s,e]);(0,a.useEffect)(()=>{f(c.filter(e=>"user"===e.role).length>=1)},[c]),(0,a.useEffect)(()=>{try{sessionStorage.setItem("messages:".concat(e),JSON.stringify(c))}catch(e){}},[c,e]);let Z=(0,a.useMemo)(()=>C?Math.max(0,Math.ceil((C-Date.now())/1e3)):0,[C]);(0,a.useEffect)(()=>{if(!C)return;if(Z<=0){D(null),T(null);return}let e=window.setInterval(()=>{D(e=>e)},250);return()=>window.clearInterval(e)},[C,Z]),(0,a.useEffect)(()=>{k.O.auth.getSession().then(e=>{var s;(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.session)||t.replace("/sign-in")})},[t]),(0,a.useEffect)(()=>{k.O.auth.getUser().then(e=>{let{data:t}=e,s=null==t?void 0:t.user;if(s){var r;M((null===(r=s.user_metadata)||void 0===r?void 0:r.name)||s.email||"")}})},[]);let B=async t=>{let s=[...c,{id:String(Date.now()),role:"user",content:t,timestamp:new Date().toISOString()}];d(s),m(!0);try{let t=await (0,N.bG)(e,s,"interview");d([...s,t]),T(null)}catch(e){if(e instanceof N.MS&&429===e.status){var r;let t=null!==(r=e.retryAfterSeconds)&&void 0!==r?r:60;D(Date.now()+1e3*t),T("Rate limit reached. Try again in ".concat(t,"s."))}else T(e instanceof N.MS?e.bodyText||e.message:e instanceof Error?e.message:"Failed to send")}finally{m(!1)}},J=async()=>{h(!0);try{let s=await (0,N._l)(e,c);j(s.files||[]),A(s.previewHtml||null);try{sessionStorage.setItem("build:".concat(e),JSON.stringify({previewHtml:s.previewHtml||null,files:s.files||[]}))}catch(e){}t.push("/dashboard/".concat(e,"/preview"))}catch(e){if(e instanceof N.MS&&429===e.status){var s;let t=null!==(s=e.retryAfterSeconds)&&void 0!==s?s:60;D(Date.now()+1e3*t),T("Rate limit reached. Try again in ".concat(t,"s."))}else T(e instanceof Error?e.message:"Build failed")}finally{h(!1)}},R=async()=>{await k.O.auth.signOut(),t.replace("/sign-in")};return(0,r.jsxs)("div",{className:"flex h-screen w-full bg-gray-900 text-gray-100",children:[(0,r.jsx)(u,{projects:s,currentProjectId:e,onNewProject:()=>{let e={id:String(Date.now()),name:"New Project",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),messages:[],blueprint:null};l(t=>[e,...t]),d([]),j([]),A(null)},collapsed:i,onToggle:()=>o(!i)}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,r.jsx)(b,{title:(null==z?void 0:z.name)||"New Project",canBuild:g,isBuilding:p,onBuild:J,onMenuToggle:()=>o(!i),userName:O,onSignOut:R}),(0,r.jsx)("div",{className:"flex-1 flex overflow-hidden",children:(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-w-0 bg-black",children:[E?(0,r.jsx)("div",{className:"mx-auto w-full max-w-3xl px-4 pt-3",children:(0,r.jsx)("div",{className:"rounded-lg border border-gray-800 bg-gray-950 px-3 py-2 text-xs text-gray-200",children:Z>0?"Rate limited. Retry in ".concat(Z,"s."):E})}):null,(0,r.jsx)(v.Z,{messages:c,isLoading:x,onSuggestionClick:B}),(0,r.jsx)(w,{onSend:B,isLoading:x||Z>0,placeholder:Z>0?"Rate limited. Try again in ".concat(Z,"s..."):"Describe the app you want to build..."})]})})]})]})}},4667:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(7437),a=s(2265),n=s(4508);function l(e){let{role:t,content:s}=e,a="user"===t;return(0,r.jsx)("div",{className:(0,n.cn)("group w-full",a?"bg-gray-900":"bg-gray-800","border-b border-gray-800/50"),children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto py-4 px-4",children:(0,r.jsxs)("div",{className:(0,n.cn)("flex items-start space-x-4",a?"flex-row-reverse":"flex-row"),children:[(0,r.jsx)("div",{className:(0,n.cn)("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",a?"bg-blue-600":"bg-green-600"),children:a?"U":"AI"}),(0,r.jsx)("div",{className:(0,n.cn)("prose prose-invert max-w-none prose-p:leading-relaxed","prose-pre:bg-gray-900 prose-pre:p-4 prose-pre:rounded-lg prose-pre:shadow","prose-code:before:hidden prose-code:after:hidden prose-code:bg-gray-900 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-code:text-gray-200","prose-ul:list-disc prose-ul:pl-5 prose-ol:list-decimal prose-ol:pl-5","prose-h1:text-xl prose-h2:text-lg prose-h3:text-base prose-h4:text-sm","prose-a:text-blue-400 hover:prose-a:underline","prose-blockquote:border-l-4 prose-blockquote:border-gray-600 prose-blockquote:pl-4 prose-blockquote:italic","prose-img:rounded-lg prose-img:border prose-img:border-gray-700","prose-table:border-collapse prose-table:w-full prose-th:bg-gray-800 prose-th:p-2 prose-td:p-2 prose-td:border-t prose-td:border-gray-700","prose-hr:border-t prose-hr:border-gray-700","prose-strong:font-semibold","prose-em:italic prose-em:text-gray-300","prose-code:font-mono prose-pre:overflow-x-auto","prose-li:marker:text-gray-400","prose-p:my-3 first:prose-p:mt-0 last:prose-p:mb-0 text-gray-200"),children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:s.replace(/\n/g,"<br />")}})})]})})})}function i(e){let{messages:t,isLoading:s,onSuggestionClick:n}=e,i=(0,a.useRef)(null);return(0,a.useEffect)(()=>{var e;null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[t]),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto bg-black text-gray-100",children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto py-6 px-4",children:0===t.length?(0,r.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center space-y-6 max-w-2xl",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"What do you want to build?"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Iâ€™ll ask you a bunch of quick questions (like a product manager) and then generate the app when you click Build."}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["A simple expense tracker for my family","A task manager for a small team","A fitness habit tracker with streaks","A food ordering app for my restaurant"].map(e=>(0,r.jsx)("button",{onClick:()=>null==n?void 0:n(e),className:"px-4 py-3 rounded-lg border border-gray-700 hover:bg-gray-800 text-left text-sm transition-colors",children:e},e))})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[t.map(e=>(0,r.jsx)(l,{role:e.role,content:e.content},e.id)),s&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-gray-400 text-sm py-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),(0,r.jsx)("div",{ref:i})]})})})}},9116:function(e,t,s){"use strict";s.d(t,{MS:function(){return r},_l:function(){return l},bG:function(){return n}});class r extends Error{constructor(e,t){super(e),this.name="ApiError",this.status=t.status,this.retryAfterSeconds=t.retryAfterSeconds,this.bodyText=t.bodyText}}async function a(e){let t;let s=await e.text().catch(()=>"");try{let e=JSON.parse(s);"number"==typeof(null==e?void 0:e.retryAfterSeconds)&&(t=e.retryAfterSeconds)}catch(e){}return{text:s,retryAfterSeconds:t}}async function n(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"interview",n=arguments.length>3?arguments[3]:void 0,l=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:e,messages:t,mode:s,uiContext:n})});if(!l.ok){let{text:e,retryAfterSeconds:t}=await a(l);throw new r("Failed to send message (".concat(l.status,")"),{status:l.status,retryAfterSeconds:t,bodyText:e||l.statusText})}return l.json()}async function l(e,t){let s=await fetch("/api/build",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:e,messages:t})});if(!s.ok){let{text:e,retryAfterSeconds:t}=await a(s);throw new r("Failed to build project (".concat(s.status,")"),{status:s.status,retryAfterSeconds:t,bodyText:e||s.statusText})}return s.json()}},2141:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});let r=(0,s(3053).eI)("https://nxkjlkyodlcdmuisvmul.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im54a2psa3lvZGxjZG11aXN2bXVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzOTI2ODMsImV4cCI6MjA4MTk2ODY4M30.QkGGzM2LUx2k0J-mFQJEl2omfltE5_nGr-ePQafoG7Y",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"appforge.supabase.auth"}})},4508:function(e,t,s){"use strict";function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}s.d(t,{cn:function(){return r}})},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[310,244,971,117,744],function(){return e(e.s=4223)}),_N_E=e.O()}]);