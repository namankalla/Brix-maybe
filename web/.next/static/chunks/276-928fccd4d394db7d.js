"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{4667:function(e,t,r){r.d(t,{Z:function(){return o}});var a=r(7437),s=r(2265),n=r(4508);function l(e){let{role:t,content:r}=e,s="user"===t;return(0,a.jsx)("div",{className:(0,n.cn)("group w-full",s?"bg-gray-900":"bg-gray-800","border-b border-gray-800/50"),children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto py-4 px-4",children:(0,a.jsxs)("div",{className:(0,n.cn)("flex items-start space-x-4",s?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)("div",{className:(0,n.cn)("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",s?"bg-blue-600":"bg-green-600"),children:s?"U":"AI"}),(0,a.jsx)("div",{className:(0,n.cn)("prose prose-invert max-w-none prose-p:leading-relaxed","prose-pre:bg-gray-900 prose-pre:p-4 prose-pre:rounded-lg prose-pre:shadow","prose-code:before:hidden prose-code:after:hidden prose-code:bg-gray-900 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-code:text-gray-200","prose-ul:list-disc prose-ul:pl-5 prose-ol:list-decimal prose-ol:pl-5","prose-h1:text-xl prose-h2:text-lg prose-h3:text-base prose-h4:text-sm","prose-a:text-blue-400 hover:prose-a:underline","prose-blockquote:border-l-4 prose-blockquote:border-gray-600 prose-blockquote:pl-4 prose-blockquote:italic","prose-img:rounded-lg prose-img:border prose-img:border-gray-700","prose-table:border-collapse prose-table:w-full prose-th:bg-gray-800 prose-th:p-2 prose-td:p-2 prose-td:border-t prose-td:border-gray-700","prose-hr:border-t prose-hr:border-gray-700","prose-strong:font-semibold","prose-em:italic prose-em:text-gray-300","prose-code:font-mono prose-pre:overflow-x-auto","prose-li:marker:text-gray-400","prose-p:my-3 first:prose-p:mt-0 last:prose-p:mb-0 text-gray-200"),children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:r.replace(/\n/g,"<br />")}})})]})})})}function o(e){let{messages:t,isLoading:r,onSuggestionClick:n}=e,o=(0,s.useRef)(null);return(0,s.useEffect)(()=>{var e;null===(e=o.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[t]),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto bg-black text-gray-100",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto py-6 px-4",children:0===t.length?(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-6 max-w-2xl",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"What do you want to build?"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Iâ€™ll ask you a bunch of quick questions (like a product manager) and then generate the app when you click Build."}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["A simple expense tracker for my family","A task manager for a small team","A fitness habit tracker with streaks","A food ordering app for my restaurant"].map(e=>(0,a.jsx)("button",{onClick:()=>null==n?void 0:n(e),className:"px-4 py-3 rounded-lg border border-gray-700 hover:bg-gray-800 text-left text-sm transition-colors",children:e},e))})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[t.map(e=>(0,a.jsx)(l,{role:e.role,content:e.content},e.id)),r&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-gray-400 text-sm py-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),(0,a.jsx)("div",{ref:o})]})})})}},1357:function(e,t,r){r.d(t,{Z:function(){return b}});var a=r(7437),s=r(2265),n=r(166),l=r(3425);let o={containerPromise:null,devProcess:null,lastMountedKey:null},i=!1;function c(e){let t=String(e||"").replace(/\\/g,"/");return t?t.startsWith("/")?t:"/".concat(t):"/"}async function d(){return o.containerPromise||(function(){if(i)return;i=!0;let e="wc_api_namankalla2707_fb9324fc8dfd033c967df68217a4f29d";if(!e)throw Error("Missing NEXT_PUBLIC_WEBCONTAINER_CLIENT_ID. WebContainer preview cannot start without a valid client ID for this domain.");l.I8.init({clientId:e,scope:""})}(),o.containerPromise=l.tw.boot({coep:"credentialless",workdirName:"project",forwardPreviewErrors:!0})),o.containerPromise}async function u(e,t){let r=await d(),a=function(e){let t={},r=(e,t)=>(e[t]||(e[t]={directory:{}}),e[t].directory||(e[t]={directory:{}}),e[t].directory);for(let s of e){let e=c(s.path).split("/").filter(Boolean);if(!e.length)continue;let n=t;for(let t=0;t<e.length;t++){let l=e[t];if(t===e.length-1){var a;n[l]={file:{contents:String(null!==(a=s.content)&&void 0!==a?a:"")}}}else n=r(n,l)}}return t}(e);return await r.mount(a),o.lastMountedKey=t,r}async function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await d(),r=await t.spawn("npm",["install"]);return r.output.pipeTo(new WritableStream({write(t){var r;null===(r=e.onOutput)||void 0===r||r.call(e,String(t))}})),await r.exit}async function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await d();if(o.devProcess){try{o.devProcess.kill()}catch(e){}o.devProcess=null}let r=await t.spawn("npm",["run","dev","--","--host","0.0.0.0","--port","5173"]);return o.devProcess=r,r.output.pipeTo(new WritableStream({write(t){var r;null===(r=e.onOutput)||void 0===r||r.call(e,String(t))}})),r}async function h(e,t){let r=await d(),a=c(e);await r.fs.writeFile(a,t,"utf-8")}async function m(e){let t=await d(),r=c(e);return String(await t.fs.readFile(r,"utf-8"))}async function g(){let e=await d(),t=async(r,a)=>{for(let s of(await e.fs.readdir(r))){let n="/"===r?"/".concat(s):"".concat(r,"/").concat(s);try{await e.fs.readdir(n),await t(n,a)}catch(e){a.push(n)}}},r=[];return await t("/",r),r.sort()}let f=(0,n.default)(()=>r.e(289).then(r.bind(r,2289)),{loadableGenerated:{webpack:()=>[2289]},ssr:!1});function y(e){let t=String(e||"").replace(/\\/g,"/");return t.startsWith("/")?t:"/".concat(t)}function b(e){let{projectId:t,files:r,previewHtml:n,forceWebContainer:l,title:o}=e,[i,c]=(0,s.useState)("preview"),[b,v]=(0,s.useState)(null),[w,j]=(0,s.useState)("Idle"),[N,k]=(0,s.useState)(""),[S,W]=(0,s.useState)(null),[C,A]=(0,s.useState)([]),[E,T]=(0,s.useState)("/src/App.tsx"),[_,I]=(0,s.useState)(""),P=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!Array.isArray(r)||0===r.length)return;let e=new Set(r.map(e=>y(e.path))),t=y(E);e.has(t)||T(["/src/App.tsx","/src/App.jsx","/src/main.tsx","/src/main.jsx","/index.html"].find(t=>e.has(t))||y(r[0].path))},[E,r]),(0,s.useEffect)(()=>{v(null),W(null)},[t]);let B=(0,s.useMemo)(()=>Array.isArray(r)&&r.some(e=>(null==e?void 0:e.path)==="package.json"||(null==e?void 0:e.path)==="/package.json"),[r]),O=(0,s.useMemo)(()=>{let e=[t];for(let t of r||[])e.push("".concat(t.path,":").concat((t.content||"").length));return e.join("|")},[r,t]);return(0,s.useEffect)(()=>{if(!B)return;let e=!1,t=null,a=e=>{k(t=>{let r="".concat(t).concat(e);return r.length>2e4?r.slice(r.length-2e4):r})};return(async()=>{try{j("Booting WebContainer...");let s=await d(),n=(t,r)=>{e||5173!==t||(v(r),j("Dev server running"))};s.on("server-ready",n),t=()=>{try{var e;null===(e=s.off)||void 0===e||e.call(s,"server-ready",n)}catch(e){}},j("Mounting files..."),await u(r,O);let l="wc:installed:".concat(O);if(!(()=>{try{return"1"===sessionStorage.getItem(l)}catch(e){return!1}})()){j("Installing dependencies (npm install)...");let e=await p({onOutput:a});if(0!==e){j("npm install failed (exit ".concat(e,")"));return}try{sessionStorage.setItem(l,"1")}catch(e){}}j("Starting dev server..."),await x({onOutput:a});let o=await g();e||A(o.filter(e=>!e.includes("/node_modules/")&&!e.includes("/.git/")))}catch(t){let e=t instanceof Error?t.message:"Unknown error";W(e),j("Runtime error: ".concat(e))}})(),()=>{e=!0,t&&t()}},[r,B,O]),(0,s.useEffect)(()=>{if(!B)return;let e=!1;return(async()=>{try{let t=await m(E);e||I(t)}catch(t){e||I("")}})(),()=>{e=!0}},[E,r,B]),(0,a.jsxs)("div",{className:"h-full border-l border-gray-800 bg-gray-900 flex flex-col min-w-[420px]",children:[(0,a.jsxs)("div",{className:"h-14 px-4 border-b border-gray-800 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-100 truncate",children:o||"Live Preview"}),(0,a.jsx)("div",{className:"text-xs text-gray-400 truncate",children:B?w:"Build to generate a runnable React app."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>c("preview"),className:"px-3 py-1.5 text-xs ".concat("preview"===i?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-700/60"),type:"button",children:"Preview"}),(0,a.jsx)("button",{onClick:()=>c("code"),className:"px-3 py-1.5 text-xs ".concat("code"===i?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-700/60"),type:"button",children:"Code"})]}),(0,a.jsx)("button",{type:"button",disabled:!b,onClick:()=>{b&&window.open(b,"_blank","noopener,noreferrer")},className:"px-3 py-1.5 text-xs rounded-lg border ".concat(b?"bg-black border-gray-700 text-gray-200 hover:bg-gray-950":"bg-gray-800 border-gray-800 text-gray-500 cursor-not-allowed"),children:"Open"})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:B?"preview"===i?(0,a.jsx)("div",{className:"h-full w-full bg-black",children:b?(0,a.jsx)("iframe",{title:"preview",className:"w-full h-full bg-black",sandbox:"allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts",src:b}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-200",children:"WebContainer preview failed"}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:w}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["Set ",(0,a.jsx)("span",{className:"font-mono",children:"NEXT_PUBLIC_WEBCONTAINER_CLIENT_ID"})," and restart the dev server."]}),N?(0,a.jsx)("pre",{className:"mt-3 max-h-72 overflow-y-auto rounded-lg border border-gray-800 bg-gray-950 p-3 text-[11px] leading-relaxed text-gray-200",children:N}):null]})})}):(0,a.jsxs)("div",{className:"h-full w-full grid grid-cols-[260px_1fr] bg-black",children:[(0,a.jsxs)("div",{className:"h-full overflow-y-auto border-r border-gray-800",children:[(0,a.jsx)("div",{className:"px-3 py-2 text-xs text-gray-300 border-b border-gray-800 bg-gray-950",children:"Files"}),(0,a.jsx)("div",{className:"p-2 space-y-1",children:(C.length?C:(r||[]).map(e=>e.path.startsWith("/")?e.path:"/".concat(e.path))).filter(e=>e.endsWith(".ts")||e.endsWith(".tsx")||e.endsWith(".js")||e.endsWith(".jsx")||e.endsWith(".css")||e.endsWith(".html")||e.endsWith(".json")).slice(0,500).map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>T(e),className:"w-full text-left px-2 py-1 rounded text-xs font-mono truncate ".concat(e===E?"bg-gray-800 text-white":"text-gray-300 hover:bg-gray-900"),title:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"h-full overflow-hidden",children:[(0,a.jsx)("div",{className:"px-3 py-2 text-xs text-gray-300 border-b border-gray-800 bg-gray-950 font-mono truncate",children:E}),(0,a.jsx)("div",{className:"h-[calc(100%-33px)]",children:(0,a.jsx)(f,{height:"100%",theme:"vs-dark",language:E.endsWith(".tsx")?"typescript":E.endsWith(".ts")?"typescript":E.endsWith(".jsx")?"javascript":E.endsWith(".js")?"javascript":E.endsWith(".css")?"css":E.endsWith(".html")?"html":"json",value:_,onChange:e=>{let t=null!=e?e:"";I(t),P.current&&window.clearTimeout(P.current),P.current=window.setTimeout(()=>{h(E,t).catch(()=>{})},250)},options:{minimap:{enabled:!1},fontSize:12,wordWrap:"on",scrollBeyondLastLine:!1,smoothScrolling:!0}})})]})]}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"max-w-sm w-full text-center space-y-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-200",children:"No preview yet"}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Click Build to generate a runnable React app."})]})})})]})}},1578:function(e,t,r){r.d(t,{Z:function(){return l}});var a=r(7437),s=r(2265),n=r(653);function l(e){let{onSend:t,isLoading:r,placeholder:l}=e,[o,i]=(0,s.useState)(""),c=(0,s.useRef)(null),d=()=>{c.current&&(c.current.style.height="auto",c.current.style.height="".concat(Math.min(c.current.scrollHeight,160),"px"))};(0,s.useEffect)(()=>{d()},[o]);let u=()=>{let e=o.trim();e&&!r&&(t(e),i(""),c.current&&(c.current.style.height="auto"))};return(0,a.jsxs)("div",{className:"rounded-2xl border border-gray-800 bg-[#111113] p-3",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-2 text-xs text-gray-400",children:[(0,a.jsx)("button",{type:"button",className:"w-8 h-8 rounded-lg border border-gray-800 bg-black flex items-center justify-center hover:bg-gray-950","aria-label":"Add",children:"+"}),(0,a.jsx)("button",{type:"button",className:"px-2 py-1 rounded-md border border-gray-800 bg-black",children:"Sonnet 4.5"}),(0,a.jsx)("button",{type:"button",className:"px-2 py-1 rounded-md border border-gray-800 bg-black",children:"Select"}),(0,a.jsx)("button",{type:"button",className:"px-2 py-1 rounded-md border border-gray-800 bg-black",children:"Plan"}),(0,a.jsx)("div",{className:"flex-1"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{ref:c,rows:1,value:o,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u())},disabled:r,placeholder:l||"How can Bolt help you today? (or /command)",className:"w-full min-h-[48px] max-h-[160px] pr-12 px-3 py-3 rounded-xl bg-transparent text-sm text-gray-100 placeholder:text-gray-500 resize-none outline-none"}),(0,a.jsx)("button",{type:"button",onClick:u,disabled:r||!o.trim(),className:"absolute right-2 bottom-2 p-2 rounded-lg transition-colors ".concat(r||!o.trim()?"text-gray-600":"text-white bg-blue-600 hover:bg-blue-700"),"aria-label":"Send",children:r?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):(0,a.jsx)(n.kcA,{className:"w-5 h-5"})})]})]})}},9116:function(e,t,r){r.d(t,{MS:function(){return a},_l:function(){return l},bG:function(){return n}});class a extends Error{constructor(e,t){super(e),this.name="ApiError",this.status=t.status,this.retryAfterSeconds=t.retryAfterSeconds,this.bodyText=t.bodyText}}async function s(e){let t;let r=await e.text().catch(()=>"");try{let e=JSON.parse(r);"number"==typeof(null==e?void 0:e.retryAfterSeconds)&&(t=e.retryAfterSeconds)}catch(e){}return{text:r,retryAfterSeconds:t}}async function n(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"interview",n=arguments.length>3?arguments[3]:void 0,l=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:e,messages:t,mode:r,uiContext:n})});if(!l.ok){let{text:e,retryAfterSeconds:t}=await s(l);throw new a("Failed to send message (".concat(l.status,")"),{status:l.status,retryAfterSeconds:t,bodyText:e||l.statusText})}return l.json()}async function l(e,t){let r=await fetch("/api/build",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:e,messages:t})});if(!r.ok){let{text:e,retryAfterSeconds:t}=await s(r);throw new a("Failed to build project (".concat(r.status,")"),{status:r.status,retryAfterSeconds:t,bodyText:e||r.statusText})}return r.json()}},4508:function(e,t,r){r.d(t,{cn:function(){return a}});function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}}}]);