"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/build/route";
exports.ids = ["app/api/build/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbuild%2Froute&page=%2Fapi%2Fbuild%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbuild%2Froute.ts&appDir=E%3A%5CAI%20App%20Builder%5Cproject%5Cweb%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CAI%20App%20Builder%5Cproject%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbuild%2Froute&page=%2Fapi%2Fbuild%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbuild%2Froute.ts&appDir=E%3A%5CAI%20App%20Builder%5Cproject%5Cweb%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CAI%20App%20Builder%5Cproject%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var E_AI_App_Builder_project_web_app_api_build_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/build/route.ts */ \"(rsc)/./app/api/build/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/build/route\",\n        pathname: \"/api/build\",\n        filename: \"route\",\n        bundlePath: \"app/api/build/route\"\n    },\n    resolvedPagePath: \"E:\\\\AI App Builder\\\\project\\\\web\\\\app\\\\api\\\\build\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_AI_App_Builder_project_web_app_api_build_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/build/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZidWlsZCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYnVpbGQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZidWlsZCUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDQUklMjBBcHAlMjBCdWlsZGVyJTVDcHJvamVjdCU1Q3dlYiU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RSUzQSU1Q0FJJTIwQXBwJTIwQnVpbGRlciU1Q3Byb2plY3QlNUN3ZWImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ1c7QUFDeEY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1hcHAtYnVpbGRlci13ZWIvPzg3MzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRTpcXFxcQUkgQXBwIEJ1aWxkZXJcXFxccHJvamVjdFxcXFx3ZWJcXFxcYXBwXFxcXGFwaVxcXFxidWlsZFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYnVpbGQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9idWlsZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYnVpbGQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJFOlxcXFxBSSBBcHAgQnVpbGRlclxcXFxwcm9qZWN0XFxcXHdlYlxcXFxhcHBcXFxcYXBpXFxcXGJ1aWxkXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9idWlsZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbuild%2Froute&page=%2Fapi%2Fbuild%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbuild%2Froute.ts&appDir=E%3A%5CAI%20App%20Builder%5Cproject%5Cweb%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CAI%20App%20Builder%5Cproject%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/build/route.ts":
/*!********************************!*\
  !*** ./app/api/build/route.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _app_services_gemini__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/services/gemini */ \"(rsc)/./app/services/gemini.ts\");\n\n\nasync function POST(request) {\n    try {\n        const { projectId, messages } = await request.json();\n        const conversationText = Array.isArray(messages) ? messages.slice(-40).map((m)=>`${m.role?.toUpperCase?.() || \"USER\"}: ${m.content || \"\"}`).join(\"\\n\") : \"\";\n        const prompt = `You are a senior product engineer.\r\n\r\nBased on the user conversation below, generate a small web app blueprint and starter code.\r\n\r\nConversation:\r\n${conversationText}\r\n\r\nReturn JSON ONLY with this structure:\r\n{\r\n  \"blueprint\": {\r\n    \"app_name\": \"string\",\r\n    \"description\": \"string\",\r\n    \"components\": [\"string\"],\r\n    \"features\": [\"string\"],\r\n    \"pages\": [\"string\"]\r\n  },\r\n  \"files\": [\r\n    { \"path\": \"string\", \"content\": \"string\" }\r\n  ]\r\n}\r\n\r\nConstraints:\r\n- Keep it minimal and consistent.\r\n- Prefer React + Tailwind classes in code.\r\n- Do not include markdown fences.\r\n`;\n        const response = await (0,_app_services_gemini__WEBPACK_IMPORTED_MODULE_1__.generateText)(prompt);\n        const extractJson = (raw)=>{\n            const start = raw.indexOf(\"{\");\n            const end = raw.lastIndexOf(\"}\");\n            if (start === -1 || end === -1 || end <= start) return null;\n            return raw.slice(start, end + 1);\n        };\n        const safeParse = (raw)=>{\n            try {\n                return JSON.parse(raw);\n            } catch  {\n                const extracted = extractJson(raw);\n                if (!extracted) return null;\n                try {\n                    return JSON.parse(extracted);\n                } catch  {\n                    return null;\n                }\n            }\n        };\n        let generatedData = safeParse(response);\n        if (!generatedData?.blueprint || !Array.isArray(generatedData?.files)) {\n            generatedData = {\n                blueprint: {\n                    app_name: \"Generated App\",\n                    description: \"App based on your chat requirements\",\n                    components: [\n                        \"App\"\n                    ],\n                    features: [\n                        \"Core flows based on your answers\"\n                    ],\n                    pages: [\n                        \"Home\"\n                    ]\n                },\n                files: [\n                    {\n                        path: \"src/App.tsx\",\n                        content: 'export default function App() {\\n  return (\\n    <div className=\"min-h-screen bg-black text-white p-8\">\\n      <h1 className=\"text-2xl font-bold\">Generated App</h1>\\n      <p className=\"mt-2 text-gray-300\">This is a starter app generated from your requirements.</p>\\n    </div>\\n  );\\n}\\n'\n                    }\n                ]\n            };\n        }\n        const files = Array.isArray(generatedData.files) ? generatedData.files.filter((f)=>typeof f?.path === \"string\" && typeof f?.content === \"string\") : [];\n        const upsertFile = (path, content)=>{\n            const idx = files.findIndex((f)=>f.path === path);\n            if (idx >= 0) {\n                if (!files[idx].content?.trim()) files[idx].content = content;\n                return;\n            }\n            files.push({\n                path,\n                content\n            });\n        };\n        const getFile = (path)=>files.find((f)=>f.path === path)?.content;\n        const defaultAppTsx = \"export default function App() {\\n  return (\\n    <div style={{ padding: 24, fontFamily: 'system-ui' }}>\\n      <h1 style={{ margin: 0, fontSize: 22 }}>Generated App</h1>\\n      <p style={{ marginTop: 8, opacity: 0.8 }}>Edit src/App.tsx to start building.</p>\\n    </div>\\n  );\\n}\\n\";\n        const hasApp = Boolean(getFile(\"src/App.tsx\")) || Boolean(getFile(\"src/App.jsx\"));\n        if (!hasApp) upsertFile(\"src/App.tsx\", defaultAppTsx);\n        upsertFile(\"src/main.tsx\", `import React from 'react';\\nimport ReactDOM from 'react-dom/client';\\nimport App from './App';\\nimport './index.css';\\n\\nReactDOM.createRoot(document.getElementById('root')!).render(\\n  <React.StrictMode>\\n    <App />\\n  </React.StrictMode>\\n);\\n`);\n        upsertFile(\"src/index.css\", `:root { color-scheme: dark; }\\nbody { margin: 0; background: #000; color: #fff; }\\n`);\n        upsertFile(\"src/vite-env.d.ts\", `/// <reference types=\"vite/client\" />\\n`);\n        upsertFile(\"index.html\", `<!doctype html>\\n<html lang=\"en\">\\n  <head>\\n    <meta charset=\"UTF-8\" />\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\\n    <title>${generatedData?.blueprint?.app_name || \"App\"}</title>\\n  </head>\\n  <body>\\n    <div id=\"root\"></div>\\n    <script type=\"module\" src=\"/src/main.tsx\"></script>\\n  </body>\\n</html>\\n`);\n        upsertFile(\"vite.config.ts\", `import { defineConfig } from 'vite';\\nimport react from '@vitejs/plugin-react';\\n\\nexport default defineConfig({\\n  plugins: [react()],\\n  server: { port: 5173, strictPort: true },\\n});\\n`);\n        upsertFile(\"package.json\", JSON.stringify({\n            name: String(generatedData?.blueprint?.app_name || \"generated-app\").toLowerCase().replace(/[^a-z0-9\\-]+/g, \"-\"),\n            private: true,\n            version: \"0.0.0\",\n            type: \"module\",\n            scripts: {\n                dev: \"vite\",\n                build: \"vite build\",\n                preview: \"vite preview\"\n            },\n            dependencies: {\n                react: \"^18.3.1\",\n                \"react-dom\": \"^18.3.1\"\n            },\n            devDependencies: {\n                \"@types/react\": \"^18.3.7\",\n                \"@types/react-dom\": \"^18.3.0\",\n                \"@vitejs/plugin-react\": \"^4.3.1\",\n                typescript: \"^5.6.3\",\n                vite: \"^5.4.0\"\n            }\n        }, null, 2));\n        const escapeHtml = (value)=>String(value ?? \"\").replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\");\n        const appName = escapeHtml(generatedData.blueprint.app_name || \"Generated App\");\n        const description = escapeHtml(generatedData.blueprint.description || \"\");\n        const features = Array.isArray(generatedData.blueprint.features) ? generatedData.blueprint.features : [];\n        const pages = Array.isArray(generatedData.blueprint.pages) ? generatedData.blueprint.pages : [];\n        const previewHtml = `<!doctype html>\r\n<html lang=\"en\">\r\n  <head>\r\n    <meta charset=\"UTF-8\" />\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n    <title>${appName}</title>\r\n    <style>\r\n      :root {\r\n        --bg: #000;\r\n        --panel: #0b0b0c;\r\n        --panel2: #111113;\r\n        --border: #232326;\r\n        --text: #f5f5f5;\r\n        --muted: #a1a1aa;\r\n        --accent: #2563eb;\r\n      }\r\n      * { box-sizing: border-box; }\r\n      body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; background: var(--bg); color: var(--text); }\r\n      .app { display: grid; grid-template-columns: 260px 1fr; min-height: 100vh; }\r\n      .sidebar { background: var(--panel); border-right: 1px solid var(--border); padding: 16px; }\r\n      .brand { font-weight: 700; font-size: 14px; letter-spacing: .2px; }\r\n      .desc { margin-top: 6px; font-size: 12px; color: var(--muted); line-height: 1.4; }\r\n      .nav { margin-top: 14px; display: grid; gap: 8px; }\r\n      .nav button { width: 100%; text-align: left; background: var(--panel2); border: 1px solid var(--border); color: var(--text); padding: 10px 10px; border-radius: 10px; cursor: pointer; font-size: 12px; }\r\n      .nav button.active { border-color: rgba(37, 99, 235, .6); box-shadow: 0 0 0 2px rgba(37, 99, 235, .25) inset; }\r\n      .main { padding: 20px; }\r\n      .card { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 16px; }\r\n      .title { font-size: 18px; font-weight: 700; margin: 0; }\r\n      .subtitle { margin: 8px 0 0; font-size: 12px; color: var(--muted); }\r\n      .section { margin-top: 14px; }\r\n      .section h3 { margin: 0 0 8px; font-size: 12px; color: #d4d4d8; font-weight: 600; }\r\n      ul { margin: 0; padding-left: 18px; }\r\n      li { margin: 6px 0; color: #e4e4e7; font-size: 12px; }\r\n      .cta { margin-top: 14px; display: flex; gap: 10px; flex-wrap: wrap; }\r\n      .cta button { background: var(--accent); border: 1px solid rgba(37, 99, 235, .6); color: white; padding: 10px 12px; border-radius: 10px; cursor: pointer; font-size: 12px; }\r\n      .cta button.secondary { background: transparent; color: #e4e4e7; border: 1px solid var(--border); }\r\n      .toast { position: fixed; bottom: 18px; right: 18px; background: #0b1220; border: 1px solid rgba(37, 99, 235, .35); color: #dbeafe; padding: 10px 12px; border-radius: 12px; font-size: 12px; display: none; }\r\n    </style>\r\n  </head>\r\n  <body>\r\n    <div class=\"app\">\r\n      <aside class=\"sidebar\">\r\n        <div class=\"brand\">${appName}</div>\r\n        <div class=\"desc\">${description}</div>\r\n        <div class=\"nav\" id=\"nav\"></div>\r\n      </aside>\r\n      <main class=\"main\">\r\n        <div class=\"card\">\r\n          <h1 class=\"title\" id=\"pageTitle\"></h1>\r\n          <p class=\"subtitle\" id=\"pageSubtitle\"></p>\r\n\r\n          <div class=\"section\">\r\n            <h3>Key features</h3>\r\n            <ul id=\"features\"></ul>\r\n          </div>\r\n\r\n          <div class=\"cta\">\r\n            <button id=\"primaryAction\">Primary action</button>\r\n            <button class=\"secondary\" id=\"secondaryAction\">Secondary action</button>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n    <div class=\"toast\" id=\"toast\"></div>\r\n    <script>\r\n      const pages = ${JSON.stringify(pages.length ? pages : [\n            \"Home\",\n            \"Dashboard\",\n            \"Settings\"\n        ])};\r\n      const features = ${JSON.stringify(features.length ? features : [\n            \"Create items\",\n            \"Edit items\",\n            \"Search\",\n            \"Basic dashboard\"\n        ])};\r\n      const nav = document.getElementById('nav');\r\n      const pageTitle = document.getElementById('pageTitle');\r\n      const pageSubtitle = document.getElementById('pageSubtitle');\r\n      const featuresEl = document.getElementById('features');\r\n      const toast = document.getElementById('toast');\r\n\r\n      function showToast(msg) {\r\n        toast.textContent = msg;\r\n        toast.style.display = 'block';\r\n        clearTimeout(window.__toastTimeout);\r\n        window.__toastTimeout = setTimeout(() => (toast.style.display = 'none'), 1400);\r\n      }\r\n\r\n      function renderFeatures() {\r\n        featuresEl.innerHTML = '';\r\n        features.slice(0, 8).forEach((f) => {\r\n          const li = document.createElement('li');\r\n          li.textContent = f;\r\n          featuresEl.appendChild(li);\r\n        });\r\n      }\r\n\r\n      function setActive(page) {\r\n        pageTitle.textContent = page;\r\n        pageSubtitle.textContent = 'This is a live preview shell. Your full app code is in the generated files.';\r\n\r\n        [...nav.querySelectorAll('button')].forEach((b) => {\r\n          b.classList.toggle('active', b.dataset.page === page);\r\n        });\r\n      }\r\n\r\n      function renderNav() {\r\n        nav.innerHTML = '';\r\n        pages.slice(0, 8).forEach((p, i) => {\r\n          const btn = document.createElement('button');\r\n          btn.textContent = p;\r\n          btn.dataset.page = p;\r\n          btn.className = i === 0 ? 'active' : '';\r\n          btn.onclick = () => setActive(p);\r\n          nav.appendChild(btn);\r\n        });\r\n        setActive(pages[0] || 'Home');\r\n      }\r\n\r\n      document.getElementById('primaryAction').onclick = () => showToast('Primary action clicked');\r\n      document.getElementById('secondaryAction').onclick = () => showToast('Secondary action clicked');\r\n\r\n      renderNav();\r\n      renderFeatures();\r\n    </script>\r\n  </body>\r\n</html>`;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            blueprint: generatedData.blueprint,\n            files,\n            previewHtml,\n            zipUrl: null\n        });\n    } catch (error) {\n        console.error(\"Error in build API:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to generate app\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNvQixjQUFjQyxTQUFTLENBQUNNLEtBQUssSUFBSVAsY0FBY0MsU0FBUyxDQUFDTSxLQUFLLEdBQUcsRUFBRTtRQUV6RyxNQUFNa0MsY0FBYyxDQUFDOzs7OztXQUtkLEVBQUVELFFBQVE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MkJBcUNNLEVBQUVBLFFBQVE7MEJBQ1gsRUFBRXBDLFlBQVk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBc0JwQixFQUFFUCxLQUFLd0IsU0FBUyxDQUFDZCxNQUFNbUMsTUFBTSxHQUFHbkMsUUFBUTtZQUFDO1lBQVE7WUFBYTtTQUFXLEVBQUU7dUJBQ3hFLEVBQUVWLEtBQUt3QixTQUFTLENBQUNmLFNBQVNvQyxNQUFNLEdBQUdwQyxXQUFXO1lBQUM7WUFBZ0I7WUFBYztZQUFVO1NBQWtCLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7T0FvRDNILENBQUM7UUFFSixPQUFPbkMscURBQVlBLENBQUNNLElBQUksQ0FBQztZQUN2QndCLFdBQVdELGNBQWNDLFNBQVM7WUFDbENDO1lBQ0F1QztZQUNBRSxRQUFRO1FBQ1Y7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVCQUF1QkE7UUFDckMsT0FBT3pFLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO1lBQUVtRSxPQUFPO1FBQXlCLEdBQ2xDO1lBQUVFLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktYXBwLWJ1aWxkZXItd2ViLy4vYXBwL2FwaS9idWlsZC9yb3V0ZS50cz8xOWE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVUZXh0IH0gZnJvbSAnQC9hcHAvc2VydmljZXMvZ2VtaW5pJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBwcm9qZWN0SWQsIG1lc3NhZ2VzIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuXHJcbiAgICBjb25zdCBjb252ZXJzYXRpb25UZXh0ID0gQXJyYXkuaXNBcnJheShtZXNzYWdlcylcclxuICAgICAgPyBtZXNzYWdlc1xyXG4gICAgICAgICAgLnNsaWNlKC00MClcclxuICAgICAgICAgIC5tYXAoKG06IGFueSkgPT4gYCR7bS5yb2xlPy50b1VwcGVyQ2FzZT8uKCkgfHwgJ1VTRVInfTogJHttLmNvbnRlbnQgfHwgJyd9YClcclxuICAgICAgICAgIC5qb2luKCdcXG4nKVxyXG4gICAgICA6ICcnO1xyXG5cclxuICAgIGNvbnN0IHByb21wdCA9IGBZb3UgYXJlIGEgc2VuaW9yIHByb2R1Y3QgZW5naW5lZXIuXHJcblxyXG5CYXNlZCBvbiB0aGUgdXNlciBjb252ZXJzYXRpb24gYmVsb3csIGdlbmVyYXRlIGEgc21hbGwgd2ViIGFwcCBibHVlcHJpbnQgYW5kIHN0YXJ0ZXIgY29kZS5cclxuXHJcbkNvbnZlcnNhdGlvbjpcclxuJHtjb252ZXJzYXRpb25UZXh0fVxyXG5cclxuUmV0dXJuIEpTT04gT05MWSB3aXRoIHRoaXMgc3RydWN0dXJlOlxyXG57XHJcbiAgXCJibHVlcHJpbnRcIjoge1xyXG4gICAgXCJhcHBfbmFtZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgXCJkZXNjcmlwdGlvblwiOiBcInN0cmluZ1wiLFxyXG4gICAgXCJjb21wb25lbnRzXCI6IFtcInN0cmluZ1wiXSxcclxuICAgIFwiZmVhdHVyZXNcIjogW1wic3RyaW5nXCJdLFxyXG4gICAgXCJwYWdlc1wiOiBbXCJzdHJpbmdcIl1cclxuICB9LFxyXG4gIFwiZmlsZXNcIjogW1xyXG4gICAgeyBcInBhdGhcIjogXCJzdHJpbmdcIiwgXCJjb250ZW50XCI6IFwic3RyaW5nXCIgfVxyXG4gIF1cclxufVxyXG5cclxuQ29uc3RyYWludHM6XHJcbi0gS2VlcCBpdCBtaW5pbWFsIGFuZCBjb25zaXN0ZW50LlxyXG4tIFByZWZlciBSZWFjdCArIFRhaWx3aW5kIGNsYXNzZXMgaW4gY29kZS5cclxuLSBEbyBub3QgaW5jbHVkZSBtYXJrZG93biBmZW5jZXMuXHJcbmA7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZW5lcmF0ZVRleHQocHJvbXB0KTtcclxuXHJcbiAgICBjb25zdCBleHRyYWN0SnNvbiA9IChyYXc6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBzdGFydCA9IHJhdy5pbmRleE9mKCd7Jyk7XHJcbiAgICAgIGNvbnN0IGVuZCA9IHJhdy5sYXN0SW5kZXhPZignfScpO1xyXG4gICAgICBpZiAoc3RhcnQgPT09IC0xIHx8IGVuZCA9PT0gLTEgfHwgZW5kIDw9IHN0YXJ0KSByZXR1cm4gbnVsbDtcclxuICAgICAgcmV0dXJuIHJhdy5zbGljZShzdGFydCwgZW5kICsgMSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHNhZmVQYXJzZSA9IChyYXc6IHN0cmluZykgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHJhdyk7XHJcbiAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIGNvbnN0IGV4dHJhY3RlZCA9IGV4dHJhY3RKc29uKHJhdyk7XHJcbiAgICAgICAgaWYgKCFleHRyYWN0ZWQpIHJldHVybiBudWxsO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShleHRyYWN0ZWQpO1xyXG4gICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBnZW5lcmF0ZWREYXRhOiBhbnkgPSBzYWZlUGFyc2UocmVzcG9uc2UpO1xyXG5cclxuICAgIGlmICghZ2VuZXJhdGVkRGF0YT8uYmx1ZXByaW50IHx8ICFBcnJheS5pc0FycmF5KGdlbmVyYXRlZERhdGE/LmZpbGVzKSkge1xyXG4gICAgICBnZW5lcmF0ZWREYXRhID0ge1xyXG4gICAgICAgIGJsdWVwcmludDoge1xyXG4gICAgICAgICAgYXBwX25hbWU6ICdHZW5lcmF0ZWQgQXBwJyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQXBwIGJhc2VkIG9uIHlvdXIgY2hhdCByZXF1aXJlbWVudHMnLFxyXG4gICAgICAgICAgY29tcG9uZW50czogWydBcHAnXSxcclxuICAgICAgICAgIGZlYXR1cmVzOiBbJ0NvcmUgZmxvd3MgYmFzZWQgb24geW91ciBhbnN3ZXJzJ10sXHJcbiAgICAgICAgICBwYWdlczogWydIb21lJ10sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBmaWxlczogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBwYXRoOiAnc3JjL0FwcC50c3gnLFxyXG4gICAgICAgICAgICBjb250ZW50OlxyXG4gICAgICAgICAgICAgIFwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwKCkge1xcbiAgcmV0dXJuIChcXG4gICAgPGRpdiBjbGFzc05hbWU9XFxcIm1pbi1oLXNjcmVlbiBiZy1ibGFjayB0ZXh0LXdoaXRlIHAtOFxcXCI+XFxuICAgICAgPGgxIGNsYXNzTmFtZT1cXFwidGV4dC0yeGwgZm9udC1ib2xkXFxcIj5HZW5lcmF0ZWQgQXBwPC9oMT5cXG4gICAgICA8cCBjbGFzc05hbWU9XFxcIm10LTIgdGV4dC1ncmF5LTMwMFxcXCI+VGhpcyBpcyBhIHN0YXJ0ZXIgYXBwIGdlbmVyYXRlZCBmcm9tIHlvdXIgcmVxdWlyZW1lbnRzLjwvcD5cXG4gICAgPC9kaXY+XFxuICApO1xcbn1cXG5cIixcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgXSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmaWxlczogeyBwYXRoOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZyB9W10gPSBBcnJheS5pc0FycmF5KGdlbmVyYXRlZERhdGEuZmlsZXMpXHJcbiAgICAgID8gZ2VuZXJhdGVkRGF0YS5maWxlcy5maWx0ZXIoKGY6IGFueSkgPT4gdHlwZW9mIGY/LnBhdGggPT09ICdzdHJpbmcnICYmIHR5cGVvZiBmPy5jb250ZW50ID09PSAnc3RyaW5nJylcclxuICAgICAgOiBbXTtcclxuXHJcbiAgICBjb25zdCB1cHNlcnRGaWxlID0gKHBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlkeCA9IGZpbGVzLmZpbmRJbmRleCgoZikgPT4gZi5wYXRoID09PSBwYXRoKTtcclxuICAgICAgaWYgKGlkeCA+PSAwKSB7XHJcbiAgICAgICAgaWYgKCFmaWxlc1tpZHhdLmNvbnRlbnQ/LnRyaW0oKSkgZmlsZXNbaWR4XS5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgZmlsZXMucHVzaCh7IHBhdGgsIGNvbnRlbnQgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGdldEZpbGUgPSAocGF0aDogc3RyaW5nKSA9PiBmaWxlcy5maW5kKChmKSA9PiBmLnBhdGggPT09IHBhdGgpPy5jb250ZW50O1xyXG5cclxuICAgIGNvbnN0IGRlZmF1bHRBcHBUc3ggPVxyXG4gICAgICBcImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFwcCgpIHtcXG4gIHJldHVybiAoXFxuICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogMjQsIGZvbnRGYW1pbHk6ICdzeXN0ZW0tdWknIH19PlxcbiAgICAgIDxoMSBzdHlsZT17eyBtYXJnaW46IDAsIGZvbnRTaXplOiAyMiB9fT5HZW5lcmF0ZWQgQXBwPC9oMT5cXG4gICAgICA8cCBzdHlsZT17eyBtYXJnaW5Ub3A6IDgsIG9wYWNpdHk6IDAuOCB9fT5FZGl0IHNyYy9BcHAudHN4IHRvIHN0YXJ0IGJ1aWxkaW5nLjwvcD5cXG4gICAgPC9kaXY+XFxuICApO1xcbn1cXG5cIjtcclxuXHJcbiAgICBjb25zdCBoYXNBcHAgPSBCb29sZWFuKGdldEZpbGUoJ3NyYy9BcHAudHN4JykpIHx8IEJvb2xlYW4oZ2V0RmlsZSgnc3JjL0FwcC5qc3gnKSk7XHJcbiAgICBpZiAoIWhhc0FwcCkgdXBzZXJ0RmlsZSgnc3JjL0FwcC50c3gnLCBkZWZhdWx0QXBwVHN4KTtcclxuXHJcbiAgICB1cHNlcnRGaWxlKFxyXG4gICAgICAnc3JjL21haW4udHN4JyxcclxuICAgICAgYGltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XFxuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbS9jbGllbnQnO1xcbmltcG9ydCBBcHAgZnJvbSAnLi9BcHAnO1xcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xcblxcblJlYWN0RE9NLmNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSEpLnJlbmRlcihcXG4gIDxSZWFjdC5TdHJpY3RNb2RlPlxcbiAgICA8QXBwIC8+XFxuICA8L1JlYWN0LlN0cmljdE1vZGU+XFxuKTtcXG5gLFxyXG4gICAgKTtcclxuXHJcbiAgICB1cHNlcnRGaWxlKCdzcmMvaW5kZXguY3NzJywgYDpyb290IHsgY29sb3Itc2NoZW1lOiBkYXJrOyB9XFxuYm9keSB7IG1hcmdpbjogMDsgYmFja2dyb3VuZDogIzAwMDsgY29sb3I6ICNmZmY7IH1cXG5gKTtcclxuICAgIHVwc2VydEZpbGUoJ3NyYy92aXRlLWVudi5kLnRzJywgYC8vLyA8cmVmZXJlbmNlIHR5cGVzPVwidml0ZS9jbGllbnRcIiAvPlxcbmApO1xyXG5cclxuICAgIHVwc2VydEZpbGUoXHJcbiAgICAgICdpbmRleC5odG1sJyxcclxuICAgICAgYDwhZG9jdHlwZSBodG1sPlxcbjxodG1sIGxhbmc9XCJlblwiPlxcbiAgPGhlYWQ+XFxuICAgIDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiIC8+XFxuICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCIgLz5cXG4gICAgPHRpdGxlPiR7Z2VuZXJhdGVkRGF0YT8uYmx1ZXByaW50Py5hcHBfbmFtZSB8fCAnQXBwJ308L3RpdGxlPlxcbiAgPC9oZWFkPlxcbiAgPGJvZHk+XFxuICAgIDxkaXYgaWQ9XCJyb290XCI+PC9kaXY+XFxuICAgIDxzY3JpcHQgdHlwZT1cIm1vZHVsZVwiIHNyYz1cIi9zcmMvbWFpbi50c3hcIj48L3NjcmlwdD5cXG4gIDwvYm9keT5cXG48L2h0bWw+XFxuYCxcclxuICAgICk7XHJcblxyXG4gICAgdXBzZXJ0RmlsZShcclxuICAgICAgJ3ZpdGUuY29uZmlnLnRzJyxcclxuICAgICAgYGltcG9ydCB7IGRlZmluZUNvbmZpZyB9IGZyb20gJ3ZpdGUnO1xcbmltcG9ydCByZWFjdCBmcm9tICdAdml0ZWpzL3BsdWdpbi1yZWFjdCc7XFxuXFxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKHtcXG4gIHBsdWdpbnM6IFtyZWFjdCgpXSxcXG4gIHNlcnZlcjogeyBwb3J0OiA1MTczLCBzdHJpY3RQb3J0OiB0cnVlIH0sXFxufSk7XFxuYCxcclxuICAgICk7XHJcblxyXG4gICAgdXBzZXJ0RmlsZShcclxuICAgICAgJ3BhY2thZ2UuanNvbicsXHJcbiAgICAgIEpTT04uc3RyaW5naWZ5KFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hbWU6IFN0cmluZyhnZW5lcmF0ZWREYXRhPy5ibHVlcHJpbnQ/LmFwcF9uYW1lIHx8ICdnZW5lcmF0ZWQtYXBwJylcclxuICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgLnJlcGxhY2UoL1teYS16MC05XFwtXSsvZywgJy0nKSxcclxuICAgICAgICAgIHByaXZhdGU6IHRydWUsXHJcbiAgICAgICAgICB2ZXJzaW9uOiAnMC4wLjAnLFxyXG4gICAgICAgICAgdHlwZTogJ21vZHVsZScsXHJcbiAgICAgICAgICBzY3JpcHRzOiB7XHJcbiAgICAgICAgICAgIGRldjogJ3ZpdGUnLFxyXG4gICAgICAgICAgICBidWlsZDogJ3ZpdGUgYnVpbGQnLFxyXG4gICAgICAgICAgICBwcmV2aWV3OiAndml0ZSBwcmV2aWV3JyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBkZXBlbmRlbmNpZXM6IHtcclxuICAgICAgICAgICAgcmVhY3Q6ICdeMTguMy4xJyxcclxuICAgICAgICAgICAgJ3JlYWN0LWRvbSc6ICdeMTguMy4xJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBkZXZEZXBlbmRlbmNpZXM6IHtcclxuICAgICAgICAgICAgJ0B0eXBlcy9yZWFjdCc6ICdeMTguMy43JyxcclxuICAgICAgICAgICAgJ0B0eXBlcy9yZWFjdC1kb20nOiAnXjE4LjMuMCcsXHJcbiAgICAgICAgICAgICdAdml0ZWpzL3BsdWdpbi1yZWFjdCc6ICdeNC4zLjEnLFxyXG4gICAgICAgICAgICB0eXBlc2NyaXB0OiAnXjUuNi4zJyxcclxuICAgICAgICAgICAgdml0ZTogJ141LjQuMCcsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbnVsbCxcclxuICAgICAgICAyLFxyXG4gICAgICApLFxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBlc2NhcGVIdG1sID0gKHZhbHVlOiB1bmtub3duKSA9PlxyXG4gICAgICBTdHJpbmcodmFsdWUgPz8gJycpXHJcbiAgICAgICAgLnJlcGxhY2UoLyYvZywgJyZhbXA7JylcclxuICAgICAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXHJcbiAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcclxuICAgICAgICAucmVwbGFjZSgvJy9nLCAnJiMwMzk7Jyk7XHJcblxyXG4gICAgY29uc3QgYXBwTmFtZSA9IGVzY2FwZUh0bWwoZ2VuZXJhdGVkRGF0YS5ibHVlcHJpbnQuYXBwX25hbWUgfHwgJ0dlbmVyYXRlZCBBcHAnKTtcclxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZXNjYXBlSHRtbChnZW5lcmF0ZWREYXRhLmJsdWVwcmludC5kZXNjcmlwdGlvbiB8fCAnJyk7XHJcbiAgICBjb25zdCBmZWF0dXJlczogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGdlbmVyYXRlZERhdGEuYmx1ZXByaW50LmZlYXR1cmVzKSA/IGdlbmVyYXRlZERhdGEuYmx1ZXByaW50LmZlYXR1cmVzIDogW107XHJcbiAgICBjb25zdCBwYWdlczogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGdlbmVyYXRlZERhdGEuYmx1ZXByaW50LnBhZ2VzKSA/IGdlbmVyYXRlZERhdGEuYmx1ZXByaW50LnBhZ2VzIDogW107XHJcblxyXG4gICAgY29uc3QgcHJldmlld0h0bWwgPSBgPCFkb2N0eXBlIGh0bWw+XHJcbjxodG1sIGxhbmc9XCJlblwiPlxyXG4gIDxoZWFkPlxyXG4gICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCIgLz5cclxuICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCIgLz5cclxuICAgIDx0aXRsZT4ke2FwcE5hbWV9PC90aXRsZT5cclxuICAgIDxzdHlsZT5cclxuICAgICAgOnJvb3Qge1xyXG4gICAgICAgIC0tYmc6ICMwMDA7XHJcbiAgICAgICAgLS1wYW5lbDogIzBiMGIwYztcclxuICAgICAgICAtLXBhbmVsMjogIzExMTExMztcclxuICAgICAgICAtLWJvcmRlcjogIzIzMjMyNjtcclxuICAgICAgICAtLXRleHQ6ICNmNWY1ZjU7XHJcbiAgICAgICAgLS1tdXRlZDogI2ExYTFhYTtcclxuICAgICAgICAtLWFjY2VudDogIzI1NjNlYjtcclxuICAgICAgfVxyXG4gICAgICAqIHsgYm94LXNpemluZzogYm9yZGVyLWJveDsgfVxyXG4gICAgICBib2R5IHsgbWFyZ2luOiAwOyBmb250LWZhbWlseTogdWktc2Fucy1zZXJpZiwgc3lzdGVtLXVpLCAtYXBwbGUtc3lzdGVtLCBTZWdvZSBVSSwgUm9ib3RvLCBBcmlhbDsgYmFja2dyb3VuZDogdmFyKC0tYmcpOyBjb2xvcjogdmFyKC0tdGV4dCk7IH1cclxuICAgICAgLmFwcCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjYwcHggMWZyOyBtaW4taGVpZ2h0OiAxMDB2aDsgfVxyXG4gICAgICAuc2lkZWJhciB7IGJhY2tncm91bmQ6IHZhcigtLXBhbmVsKTsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsgcGFkZGluZzogMTZweDsgfVxyXG4gICAgICAuYnJhbmQgeyBmb250LXdlaWdodDogNzAwOyBmb250LXNpemU6IDE0cHg7IGxldHRlci1zcGFjaW5nOiAuMnB4OyB9XHJcbiAgICAgIC5kZXNjIHsgbWFyZ2luLXRvcDogNnB4OyBmb250LXNpemU6IDEycHg7IGNvbG9yOiB2YXIoLS1tdXRlZCk7IGxpbmUtaGVpZ2h0OiAxLjQ7IH1cclxuICAgICAgLm5hdiB7IG1hcmdpbi10b3A6IDE0cHg7IGRpc3BsYXk6IGdyaWQ7IGdhcDogOHB4OyB9XHJcbiAgICAgIC5uYXYgYnV0dG9uIHsgd2lkdGg6IDEwMCU7IHRleHQtYWxpZ246IGxlZnQ7IGJhY2tncm91bmQ6IHZhcigtLXBhbmVsMik7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7IGNvbG9yOiB2YXIoLS10ZXh0KTsgcGFkZGluZzogMTBweCAxMHB4OyBib3JkZXItcmFkaXVzOiAxMHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMTJweDsgfVxyXG4gICAgICAubmF2IGJ1dHRvbi5hY3RpdmUgeyBib3JkZXItY29sb3I6IHJnYmEoMzcsIDk5LCAyMzUsIC42KTsgYm94LXNoYWRvdzogMCAwIDAgMnB4IHJnYmEoMzcsIDk5LCAyMzUsIC4yNSkgaW5zZXQ7IH1cclxuICAgICAgLm1haW4geyBwYWRkaW5nOiAyMHB4OyB9XHJcbiAgICAgIC5jYXJkIHsgYmFja2dyb3VuZDogdmFyKC0tcGFuZWwpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOyBib3JkZXItcmFkaXVzOiAxNHB4OyBwYWRkaW5nOiAxNnB4OyB9XHJcbiAgICAgIC50aXRsZSB7IGZvbnQtc2l6ZTogMThweDsgZm9udC13ZWlnaHQ6IDcwMDsgbWFyZ2luOiAwOyB9XHJcbiAgICAgIC5zdWJ0aXRsZSB7IG1hcmdpbjogOHB4IDAgMDsgZm9udC1zaXplOiAxMnB4OyBjb2xvcjogdmFyKC0tbXV0ZWQpOyB9XHJcbiAgICAgIC5zZWN0aW9uIHsgbWFyZ2luLXRvcDogMTRweDsgfVxyXG4gICAgICAuc2VjdGlvbiBoMyB7IG1hcmdpbjogMCAwIDhweDsgZm9udC1zaXplOiAxMnB4OyBjb2xvcjogI2Q0ZDRkODsgZm9udC13ZWlnaHQ6IDYwMDsgfVxyXG4gICAgICB1bCB7IG1hcmdpbjogMDsgcGFkZGluZy1sZWZ0OiAxOHB4OyB9XHJcbiAgICAgIGxpIHsgbWFyZ2luOiA2cHggMDsgY29sb3I6ICNlNGU0ZTc7IGZvbnQtc2l6ZTogMTJweDsgfVxyXG4gICAgICAuY3RhIHsgbWFyZ2luLXRvcDogMTRweDsgZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBmbGV4LXdyYXA6IHdyYXA7IH1cclxuICAgICAgLmN0YSBidXR0b24geyBiYWNrZ3JvdW5kOiB2YXIoLS1hY2NlbnQpOyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDM3LCA5OSwgMjM1LCAuNik7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTBweCAxMnB4OyBib3JkZXItcmFkaXVzOiAxMHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMTJweDsgfVxyXG4gICAgICAuY3RhIGJ1dHRvbi5zZWNvbmRhcnkgeyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgY29sb3I6ICNlNGU0ZTc7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7IH1cclxuICAgICAgLnRvYXN0IHsgcG9zaXRpb246IGZpeGVkOyBib3R0b206IDE4cHg7IHJpZ2h0OiAxOHB4OyBiYWNrZ3JvdW5kOiAjMGIxMjIwOyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDM3LCA5OSwgMjM1LCAuMzUpOyBjb2xvcjogI2RiZWFmZTsgcGFkZGluZzogMTBweCAxMnB4OyBib3JkZXItcmFkaXVzOiAxMnB4OyBmb250LXNpemU6IDEycHg7IGRpc3BsYXk6IG5vbmU7IH1cclxuICAgIDwvc3R5bGU+XHJcbiAgPC9oZWFkPlxyXG4gIDxib2R5PlxyXG4gICAgPGRpdiBjbGFzcz1cImFwcFwiPlxyXG4gICAgICA8YXNpZGUgY2xhc3M9XCJzaWRlYmFyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImJyYW5kXCI+JHthcHBOYW1lfTwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJkZXNjXCI+JHtkZXNjcmlwdGlvbn08L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibmF2XCIgaWQ9XCJuYXZcIj48L2Rpdj5cclxuICAgICAgPC9hc2lkZT5cclxuICAgICAgPG1haW4gY2xhc3M9XCJtYWluXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cclxuICAgICAgICAgIDxoMSBjbGFzcz1cInRpdGxlXCIgaWQ9XCJwYWdlVGl0bGVcIj48L2gxPlxyXG4gICAgICAgICAgPHAgY2xhc3M9XCJzdWJ0aXRsZVwiIGlkPVwicGFnZVN1YnRpdGxlXCI+PC9wPlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxoMz5LZXkgZmVhdHVyZXM8L2gzPlxyXG4gICAgICAgICAgICA8dWwgaWQ9XCJmZWF0dXJlc1wiPjwvdWw+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3RhXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJwcmltYXJ5QWN0aW9uXCI+UHJpbWFyeSBhY3Rpb248L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInNlY29uZGFyeVwiIGlkPVwic2Vjb25kYXJ5QWN0aW9uXCI+U2Vjb25kYXJ5IGFjdGlvbjwvYnV0dG9uPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvbWFpbj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cInRvYXN0XCIgaWQ9XCJ0b2FzdFwiPjwvZGl2PlxyXG4gICAgPHNjcmlwdD5cclxuICAgICAgY29uc3QgcGFnZXMgPSAke0pTT04uc3RyaW5naWZ5KHBhZ2VzLmxlbmd0aCA/IHBhZ2VzIDogWydIb21lJywgJ0Rhc2hib2FyZCcsICdTZXR0aW5ncyddKX07XHJcbiAgICAgIGNvbnN0IGZlYXR1cmVzID0gJHtKU09OLnN0cmluZ2lmeShmZWF0dXJlcy5sZW5ndGggPyBmZWF0dXJlcyA6IFsnQ3JlYXRlIGl0ZW1zJywgJ0VkaXQgaXRlbXMnLCAnU2VhcmNoJywgJ0Jhc2ljIGRhc2hib2FyZCddKX07XHJcbiAgICAgIGNvbnN0IG5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXYnKTtcclxuICAgICAgY29uc3QgcGFnZVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VUaXRsZScpO1xyXG4gICAgICBjb25zdCBwYWdlU3VidGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZVN1YnRpdGxlJyk7XHJcbiAgICAgIGNvbnN0IGZlYXR1cmVzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmVhdHVyZXMnKTtcclxuICAgICAgY29uc3QgdG9hc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9hc3QnKTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIHNob3dUb2FzdChtc2cpIHtcclxuICAgICAgICB0b2FzdC50ZXh0Q29udGVudCA9IG1zZztcclxuICAgICAgICB0b2FzdC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICBjbGVhclRpbWVvdXQod2luZG93Ll9fdG9hc3RUaW1lb3V0KTtcclxuICAgICAgICB3aW5kb3cuX190b2FzdFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+ICh0b2FzdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKSwgMTQwMCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJlbmRlckZlYXR1cmVzKCkge1xyXG4gICAgICAgIGZlYXR1cmVzRWwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgZmVhdHVyZXMuc2xpY2UoMCwgOCkuZm9yRWFjaCgoZikgPT4ge1xyXG4gICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgICAgbGkudGV4dENvbnRlbnQgPSBmO1xyXG4gICAgICAgICAgZmVhdHVyZXNFbC5hcHBlbmRDaGlsZChsaSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHNldEFjdGl2ZShwYWdlKSB7XHJcbiAgICAgICAgcGFnZVRpdGxlLnRleHRDb250ZW50ID0gcGFnZTtcclxuICAgICAgICBwYWdlU3VidGl0bGUudGV4dENvbnRlbnQgPSAnVGhpcyBpcyBhIGxpdmUgcHJldmlldyBzaGVsbC4gWW91ciBmdWxsIGFwcCBjb2RlIGlzIGluIHRoZSBnZW5lcmF0ZWQgZmlsZXMuJztcclxuXHJcbiAgICAgICAgWy4uLm5hdi5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKV0uZm9yRWFjaCgoYikgPT4ge1xyXG4gICAgICAgICAgYi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCBiLmRhdGFzZXQucGFnZSA9PT0gcGFnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJlbmRlck5hdigpIHtcclxuICAgICAgICBuYXYuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgcGFnZXMuc2xpY2UoMCwgOCkuZm9yRWFjaCgocCwgaSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSBwO1xyXG4gICAgICAgICAgYnRuLmRhdGFzZXQucGFnZSA9IHA7XHJcbiAgICAgICAgICBidG4uY2xhc3NOYW1lID0gaSA9PT0gMCA/ICdhY3RpdmUnIDogJyc7XHJcbiAgICAgICAgICBidG4ub25jbGljayA9ICgpID0+IHNldEFjdGl2ZShwKTtcclxuICAgICAgICAgIG5hdi5hcHBlbmRDaGlsZChidG4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNldEFjdGl2ZShwYWdlc1swXSB8fCAnSG9tZScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbWFyeUFjdGlvbicpLm9uY2xpY2sgPSAoKSA9PiBzaG93VG9hc3QoJ1ByaW1hcnkgYWN0aW9uIGNsaWNrZWQnKTtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY29uZGFyeUFjdGlvbicpLm9uY2xpY2sgPSAoKSA9PiBzaG93VG9hc3QoJ1NlY29uZGFyeSBhY3Rpb24gY2xpY2tlZCcpO1xyXG5cclxuICAgICAgcmVuZGVyTmF2KCk7XHJcbiAgICAgIHJlbmRlckZlYXR1cmVzKCk7XHJcbiAgICA8L3NjcmlwdD5cclxuICA8L2JvZHk+XHJcbjwvaHRtbD5gO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIGJsdWVwcmludDogZ2VuZXJhdGVkRGF0YS5ibHVlcHJpbnQsXHJcbiAgICAgIGZpbGVzLFxyXG4gICAgICBwcmV2aWV3SHRtbCxcclxuICAgICAgemlwVXJsOiBudWxsLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGJ1aWxkIEFQSTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgYXBwJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZW5lcmF0ZVRleHQiLCJQT1NUIiwicmVxdWVzdCIsInByb2plY3RJZCIsIm1lc3NhZ2VzIiwianNvbiIsImNvbnZlcnNhdGlvblRleHQiLCJBcnJheSIsImlzQXJyYXkiLCJzbGljZSIsIm1hcCIsIm0iLCJyb2xlIiwidG9VcHBlckNhc2UiLCJjb250ZW50Iiwiam9pbiIsInByb21wdCIsInJlc3BvbnNlIiwiZXh0cmFjdEpzb24iLCJyYXciLCJzdGFydCIsImluZGV4T2YiLCJlbmQiLCJsYXN0SW5kZXhPZiIsInNhZmVQYXJzZSIsIkpTT04iLCJwYXJzZSIsImV4dHJhY3RlZCIsImdlbmVyYXRlZERhdGEiLCJibHVlcHJpbnQiLCJmaWxlcyIsImFwcF9uYW1lIiwiZGVzY3JpcHRpb24iLCJjb21wb25lbnRzIiwiZmVhdHVyZXMiLCJwYWdlcyIsInBhdGgiLCJmaWx0ZXIiLCJmIiwidXBzZXJ0RmlsZSIsImlkeCIsImZpbmRJbmRleCIsInRyaW0iLCJwdXNoIiwiZ2V0RmlsZSIsImZpbmQiLCJkZWZhdWx0QXBwVHN4IiwiaGFzQXBwIiwiQm9vbGVhbiIsInN0cmluZ2lmeSIsIm5hbWUiLCJTdHJpbmciLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJwcml2YXRlIiwidmVyc2lvbiIsInR5cGUiLCJzY3JpcHRzIiwiZGV2IiwiYnVpbGQiLCJwcmV2aWV3IiwiZGVwZW5kZW5jaWVzIiwicmVhY3QiLCJkZXZEZXBlbmRlbmNpZXMiLCJ0eXBlc2NyaXB0Iiwidml0ZSIsImVzY2FwZUh0bWwiLCJ2YWx1ZSIsImFwcE5hbWUiLCJwcmV2aWV3SHRtbCIsImxlbmd0aCIsInppcFVybCIsImVycm9yIiwiY29uc29sZSIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/build/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/services/gemini.ts":
/*!********************************!*\
  !*** ./app/services/gemini.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateText: () => (/* binding */ generateText)\n/* harmony export */ });\n// app/services/gemini.ts\nconst GEMINI_API_KEY = \"AIzaSyCpGUitfjyJ8WAzRsyGehkVjpV8jq9tUuk\";\nconst GEMINI_API_URL = \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent\";\nasync function generateText(prompt) {\n    try {\n        console.log(\"Calling Gemini API with prompt:\", prompt);\n        const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                contents: [\n                    {\n                        parts: [\n                            {\n                                text: prompt\n                            }\n                        ]\n                    }\n                ]\n            })\n        });\n        console.log(\"Gemini API response status:\", response.status);\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"Gemini API error response:\", errorText);\n            throw new Error(`Gemini API Error: ${response.status} - ${errorText}`);\n        }\n        const data = await response.json();\n        console.log(\"Gemini API response data:\", data);\n        const text = data.candidates?.[0]?.content?.parts?.[0]?.text;\n        if (!text) {\n            console.error(\"No text in Gemini response:\", data);\n            throw new Error(\"No valid response from Gemini\");\n        }\n        return text;\n    } catch (error) {\n        console.error(\"Error generating text with Gemini:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvc2VydmljZXMvZ2VtaW5pLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSx5QkFBeUI7QUFDekIsTUFBTUEsaUJBQWlCO0FBQ3ZCLE1BQU1DLGlCQUFpQjtBQUVoQixlQUFlQyxhQUFhQyxNQUFjO0lBQy9DLElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDLG1DQUFtQ0Y7UUFFL0MsTUFBTUcsV0FBVyxNQUFNQyxNQUFNLENBQUMsRUFBRU4sZUFBZSxLQUFLLEVBQUVELGVBQWUsQ0FBQyxFQUFFO1lBQ3RFUSxRQUFRO1lBQ1JDLFNBQVM7Z0JBQ1AsZ0JBQWdCO1lBQ2xCO1lBQ0FDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQztnQkFDbkJDLFVBQVU7b0JBQUM7d0JBQ1RDLE9BQU87NEJBQUM7Z0NBQ05DLE1BQU1aOzRCQUNSO3lCQUFFO29CQUNKO2lCQUFFO1lBQ0o7UUFDRjtRQUVBQyxRQUFRQyxHQUFHLENBQUMsK0JBQStCQyxTQUFTVSxNQUFNO1FBRTFELElBQUksQ0FBQ1YsU0FBU1csRUFBRSxFQUFFO1lBQ2hCLE1BQU1DLFlBQVksTUFBTVosU0FBU1MsSUFBSTtZQUNyQ1gsUUFBUWUsS0FBSyxDQUFDLDhCQUE4QkQ7WUFDNUMsTUFBTSxJQUFJRSxNQUFNLENBQUMsa0JBQWtCLEVBQUVkLFNBQVNVLE1BQU0sQ0FBQyxHQUFHLEVBQUVFLFVBQVUsQ0FBQztRQUN2RTtRQUVBLE1BQU1HLE9BQU8sTUFBTWYsU0FBU2dCLElBQUk7UUFDaENsQixRQUFRQyxHQUFHLENBQUMsNkJBQTZCZ0I7UUFFekMsTUFBTU4sT0FBT00sS0FBS0UsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFQyxTQUFTVixPQUFPLENBQUMsRUFBRSxFQUFFQztRQUN4RCxJQUFJLENBQUNBLE1BQU07WUFDVFgsUUFBUWUsS0FBSyxDQUFDLCtCQUErQkU7WUFDN0MsTUFBTSxJQUFJRCxNQUFNO1FBQ2xCO1FBRUEsT0FBT0w7SUFDVCxFQUFFLE9BQU9JLE9BQU87UUFDZGYsUUFBUWUsS0FBSyxDQUFDLHNDQUFzQ0E7UUFDcEQsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktYXBwLWJ1aWxkZXItd2ViLy4vYXBwL3NlcnZpY2VzL2dlbWluaS50cz8yOTIwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGFwcC9zZXJ2aWNlcy9nZW1pbmkudHNcclxuY29uc3QgR0VNSU5JX0FQSV9LRVkgPSAnQUl6YVN5Q3BHVWl0Zmp5SjhXQXpSc3lHZWhrVmpwVjhqcTl0VXVrJztcclxuY29uc3QgR0VNSU5JX0FQSV9VUkwgPSAnaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy9nZW1pbmktMi41LWZsYXNoOmdlbmVyYXRlQ29udGVudCc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVUZXh0KHByb21wdDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdDYWxsaW5nIEdlbWluaSBBUEkgd2l0aCBwcm9tcHQ6JywgcHJvbXB0KTtcclxuICAgIFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtHRU1JTklfQVBJX1VSTH0/a2V5PSR7R0VNSU5JX0FQSV9LRVl9YCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBjb250ZW50czogW3tcclxuICAgICAgICAgIHBhcnRzOiBbe1xyXG4gICAgICAgICAgICB0ZXh0OiBwcm9tcHRcclxuICAgICAgICAgIH1dXHJcbiAgICAgICAgfV1cclxuICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdHZW1pbmkgQVBJIHJlc3BvbnNlIHN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdHZW1pbmkgQVBJIGVycm9yIHJlc3BvbnNlOicsIGVycm9yVGV4dCk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgR2VtaW5pIEFQSSBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGNvbnNvbGUubG9nKCdHZW1pbmkgQVBJIHJlc3BvbnNlIGRhdGE6JywgZGF0YSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHRleHQgPSBkYXRhLmNhbmRpZGF0ZXM/LlswXT8uY29udGVudD8ucGFydHM/LlswXT8udGV4dDtcclxuICAgIGlmICghdGV4dCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdObyB0ZXh0IGluIEdlbWluaSByZXNwb25zZTonLCBkYXRhKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB2YWxpZCByZXNwb25zZSBmcm9tIEdlbWluaScpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gdGV4dDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyB0ZXh0IHdpdGggR2VtaW5pOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJHRU1JTklfQVBJX0tFWSIsIkdFTUlOSV9BUElfVVJMIiwiZ2VuZXJhdGVUZXh0IiwicHJvbXB0IiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb250ZW50cyIsInBhcnRzIiwidGV4dCIsInN0YXR1cyIsIm9rIiwiZXJyb3JUZXh0IiwiZXJyb3IiLCJFcnJvciIsImRhdGEiLCJqc29uIiwiY2FuZGlkYXRlcyIsImNvbnRlbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/services/gemini.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbuild%2Froute&page=%2Fapi%2Fbuild%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbuild%2Froute.ts&appDir=E%3A%5CAI%20App%20Builder%5Cproject%5Cweb%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CAI%20App%20Builder%5Cproject%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();