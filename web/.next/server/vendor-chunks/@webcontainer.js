"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@webcontainer";
exports.ids = ["vendor-chunks/@webcontainer"];
exports.modules = {

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/index.js":
/*!******************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreviewMessageType: () => (/* reexport safe */ _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__.PreviewMessageType),\n/* harmony export */   WebContainer: () => (/* binding */ WebContainer),\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   configureAPIKey: () => (/* binding */ configureAPIKey),\n/* harmony export */   isPreviewMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_5__.isPreviewMessage),\n/* harmony export */   reloadPreview: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_5__.reloadPreview)\n/* harmony export */ });\n/* harmony import */ var _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/auth-state.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/auth-state.js\");\n/* harmony import */ var _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./preview-message-types.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\");\n/* harmony import */ var _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vendor/index.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/vendor/index.js\");\n/* harmony import */ var _internal_tokens_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./internal/tokens.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js\");\n/* harmony import */ var _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./internal/iframe-url.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils.js\");\n/* harmony import */ var _utils_file_system_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/file-system.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/file-system.js\");\n/**\n * The WebContainer Public API allows you build custom applications on top of an in-browser Node.js runtime.\n *\n * Its main entrypoint is the {@link WebContainer} class.\n *\n * @packageDocumentation\n */\n\n\n\n\n\n\n\n\nconst auth = _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.auth;\n\n\nlet bootPromise = null;\nlet cachedServerPromise = null;\nlet cachedBootOptions = {};\nconst decoder = new TextDecoder();\nconst encoder = new TextEncoder();\n/**\n * The main export of this library. An instance of `WebContainer` represents a runtime\n * ready to be used.\n */\nclass WebContainer {\n    _instance;\n    _runtimeInfo;\n    /**\n     * Gives access to the underlying file system.\n     */\n    fs;\n    /** @internal */\n    static _instance = null;\n    /** @internal */\n    static _teardownPromise = null;\n    _tornDown = false;\n    _unsubscribeFromTokenChangedListener = () => { };\n    /** @internal */\n    constructor(\n    /** @internal */\n    _instance, fs, previewScript, \n    /** @internal */\n    _runtimeInfo) {\n        this._instance = _instance;\n        this._runtimeInfo = _runtimeInfo;\n        this.fs = new FileSystemAPIClient(fs);\n        // forward the credentials to webcontainer if needed\n        if (_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.initialized) {\n            this._unsubscribeFromTokenChangedListener = (0,_internal_tokens_js__WEBPACK_IMPORTED_MODULE_3__.addAccessTokenChangedListener)((accessToken) => {\n                this._instance.setCredentials({ accessToken, editorOrigin: _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.editorOrigin });\n            });\n            (async () => {\n                await _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.authComplete.promise;\n                if (this._tornDown) {\n                    return;\n                }\n                (0,_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.assertAuthTokens)(_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.tokens);\n                await this._instance.setCredentials({\n                    accessToken: _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.tokens.access,\n                    editorOrigin: _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.editorOrigin,\n                });\n            })().catch((error) => {\n                // print the error as this is likely a bug in webcontainer\n                console.error(error);\n            });\n        }\n    }\n    async spawn(command, optionsOrArgs, options) {\n        let args = [];\n        if (Array.isArray(optionsOrArgs)) {\n            args = optionsOrArgs;\n        }\n        else {\n            options = optionsOrArgs;\n        }\n        let output = undefined;\n        let outputStream = new ReadableStream();\n        if (options?.output !== false) {\n            const result = streamWithPush();\n            output = result.push;\n            outputStream = result.stream;\n        }\n        let stdout = undefined;\n        let stdoutStream;\n        let stderr = undefined;\n        let stderrStream;\n        const wrappedOutput = proxyListener(binaryListener(output));\n        const wrappedStdout = proxyListener(binaryListener(stdout));\n        const wrappedStderr = proxyListener(binaryListener(stderr));\n        const process = await this._instance.run({\n            command,\n            args,\n            cwd: options?.cwd,\n            env: options?.env,\n            terminal: options?.terminal,\n        }, wrappedStdout, wrappedStderr, wrappedOutput);\n        return new WebContainerProcessImpl(process, outputStream, stdoutStream, stderrStream);\n    }\n    async export(path, options) {\n        const serializeOptions = {\n            format: options?.format ?? 'json',\n            includes: options?.includes,\n            excludes: options?.excludes,\n            external: true,\n        };\n        const result = await this._instance.serialize(path, serializeOptions);\n        if (serializeOptions.format === 'json') {\n            const data = JSON.parse(decoder.decode(result));\n            return (0,_utils_file_system_js__WEBPACK_IMPORTED_MODULE_6__.toExternalFileSystemTree)(data);\n        }\n        return result;\n    }\n    on(event, listener) {\n        if (event === 'preview-message') {\n            const originalListener = listener;\n            listener = ((message) => {\n                if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.isPreviewMessage)(message)) {\n                    originalListener(message);\n                }\n            });\n        }\n        const { listener: wrapped, subscribe } = syncSubscription(listener);\n        return subscribe(this._instance.on(event, _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.proxy(wrapped)));\n    }\n    /**\n     * Mounts a tree of files into the filesystem. This can be specified as a tree object ({@link FileSystemTree})\n     * or as a binary snapshot generated by [`@webcontainer/snapshot`](https://www.npmjs.com/package/@webcontainer/snapshot).\n     *\n     * @param snapshotOrTree - A tree of files, or a binary snapshot. Note that binary payloads will be transferred.\n     * @param options.mountPoint - Specifies a nested path where the tree should be mounted.\n     */\n    mount(snapshotOrTree, options) {\n        const payload = snapshotOrTree instanceof Uint8Array\n            ? snapshotOrTree\n            : snapshotOrTree instanceof ArrayBuffer\n                ? new Uint8Array(snapshotOrTree)\n                : encoder.encode(JSON.stringify((0,_utils_file_system_js__WEBPACK_IMPORTED_MODULE_6__.toInternalFileSystemTree)(snapshotOrTree)));\n        return this._instance.loadFiles(_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.transfer(payload, [payload.buffer]), {\n            mountPoints: options?.mountPoint,\n        });\n    }\n    /**\n     * Set a custom script to be injected into all previews. When this function is called, every\n     * future page reload will contain the provided script tag on all HTML responses.\n     *\n     * Note:\n     *\n     * When this function resolves, every preview reloaded _after_ will have the new script.\n     * Existing preview have to be explicitely reloaded.\n     *\n     * To reload a preview you can use `reloadPreview`.\n     *\n     * @param scriptSrc Source for the script tag.\n     * @param options Options to define which type of script this is.\n     */\n    setPreviewScript(scriptSrc, options) {\n        return this._instance.setPreviewScript(scriptSrc, options);\n    }\n    /**\n     * The default value of the `PATH` environment variable for processes started through {@link spawn}.\n     */\n    get path() {\n        return this._runtimeInfo.path;\n    }\n    /**\n     * The full path to the working directory (see {@link FileSystemAPI}).\n     */\n    get workdir() {\n        return this._runtimeInfo.cwd;\n    }\n    /**\n     * Destroys the WebContainer instance, turning it unusable, and releases its resources. After this,\n     * a new WebContainer instance can be obtained by calling {@link WebContainer.boot | `boot`}.\n     *\n     * All entities derived from this instance (e.g. processes, the file system, etc.) also become unusable\n     * after calling this method.\n     */\n    teardown() {\n        if (this._tornDown) {\n            throw new Error('WebContainer already torn down');\n        }\n        this._tornDown = true;\n        this._unsubscribeFromTokenChangedListener();\n        const teardownFn = async () => {\n            try {\n                await this.fs._teardown();\n                await this._instance.teardown();\n            }\n            finally {\n                this._instance[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n                if (WebContainer._instance === this) {\n                    WebContainer._instance = null;\n                }\n            }\n        };\n        WebContainer._teardownPromise = teardownFn();\n    }\n    /**\n     * Boots a WebContainer. Only a single instance of WebContainer can be booted concurrently\n     * (see {@link WebContainer.teardown | `teardown`}).\n     *\n     * Booting WebContainer is an expensive operation.\n     */\n    static async boot(options = {}) {\n        await this._teardownPromise;\n        WebContainer._teardownPromise = null;\n        const { workdirName } = options;\n        if (window.crossOriginIsolated && options.coep === 'none') {\n            console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.\\nSet the 'coep' option to 'require-corp'.`);\n        }\n        if (workdirName?.includes('/') || workdirName === '..' || workdirName === '.') {\n            throw new Error('workdirName should be a valid folder name');\n        }\n        // signal that boot was called to auth module as calling auth.init after boot is likely incorrect\n        _internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.bootCalled = true;\n        // try to \"acquire the lock\", i.e. wait for any ongoing boot request to finish\n        while (bootPromise) {\n            await bootPromise;\n        }\n        if (WebContainer._instance) {\n            throw new Error('Only a single WebContainer instance can be booted');\n        }\n        const instancePromise = unsynchronizedBoot(options);\n        // the \"lock\" is a promise for the ongoing boot that never fails\n        bootPromise = instancePromise.catch(() => { });\n        try {\n            const instance = await instancePromise;\n            WebContainer._instance = instance;\n            return instance;\n        }\n        finally {\n            // release the \"lock\"\n            bootPromise = null;\n        }\n    }\n}\n/**\n * Configure an API key to be used for this instance of WebContainer.\n *\n * @param key WebContainer API key.\n */\nfunction configureAPIKey(key) {\n    if (_internal_auth_state_js__WEBPACK_IMPORTED_MODULE_0__.authState.bootCalled) {\n        throw new Error('`configureAPIKey` should always be called before `WebContainer.boot`');\n    }\n    _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.setQueryParam('client_id', key);\n}\nconst DIR_ENTRY_TYPE_FILE = 1;\nconst DIR_ENTRY_TYPE_DIR = 2;\n/**\n * @internal\n */\nclass DirEntImpl {\n    name;\n    _type;\n    constructor(name, _type) {\n        this.name = name;\n        this._type = _type;\n    }\n    isFile() {\n        return this._type === DIR_ENTRY_TYPE_FILE;\n    }\n    isDirectory() {\n        return this._type === DIR_ENTRY_TYPE_DIR;\n    }\n}\nclass FSWatcher {\n    _apiClient;\n    _path;\n    _options;\n    _listener;\n    _wrappedListener;\n    _watcher;\n    _closed = false;\n    constructor(_apiClient, _path, _options, _listener) {\n        this._apiClient = _apiClient;\n        this._path = _path;\n        this._options = _options;\n        this._listener = _listener;\n        this._apiClient._watchers.add(this);\n        this._wrappedListener = (event, filename) => {\n            if (this._listener && !this._closed) {\n                this._listener(event, filename);\n            }\n        };\n        this._apiClient._fs\n            .watch(this._path, this._options, proxyListener(this._wrappedListener))\n            .then((_watcher) => {\n            this._watcher = _watcher;\n            if (this._closed) {\n                return this._teardown();\n            }\n            return undefined;\n        })\n            .catch(console.error);\n    }\n    async close() {\n        if (!this._closed) {\n            this._closed = true;\n            this._apiClient._watchers.delete(this);\n            await this._teardown();\n        }\n    }\n    /**\n     * @internal\n     */\n    async _teardown() {\n        await this._watcher?.close().finally(() => {\n            this._watcher?.[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n        });\n    }\n}\n/**\n * @internal\n */\nclass WebContainerProcessImpl {\n    output;\n    input;\n    exit;\n    _process;\n    stdout;\n    stderr;\n    constructor(process, output, stdout, stderr) {\n        this.output = output;\n        this._process = process;\n        this.input = new WritableStream({\n            write: (data) => {\n                // this promise is not supposed to fail anyway\n                this._getProcess()\n                    ?.write(data)\n                    .catch(() => { });\n            },\n        });\n        this.exit = this._onExit();\n        this.stdout = stdout;\n        this.stderr = stderr;\n    }\n    kill() {\n        this._process?.kill();\n    }\n    resize(dimensions) {\n        this._getProcess()?.resize(dimensions);\n    }\n    async _onExit() {\n        try {\n            return await this._process.onExit;\n        }\n        finally {\n            this._process?.[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n            this._process = null;\n        }\n    }\n    _getProcess() {\n        if (this._process == null) {\n            console.warn('This process already exited');\n        }\n        return this._process;\n    }\n}\n/**\n * @internal\n */\nclass FileSystemAPIClient {\n    _fs;\n    _watchers = new Set([]);\n    constructor(fs) {\n        this._fs = fs;\n    }\n    rm(...args) {\n        return this._fs.rm(...args);\n    }\n    async readFile(path, encoding) {\n        return await this._fs.readFile(path, encoding);\n    }\n    async rename(oldPath, newPath) {\n        return await this._fs.rename(oldPath, newPath);\n    }\n    async writeFile(path, data, options) {\n        if (data instanceof Uint8Array) {\n            const buffer = data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);\n            data = _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.transfer(new Uint8Array(buffer), [buffer]);\n        }\n        await this._fs.writeFile(path, data, options);\n    }\n    async readdir(path, options) {\n        const result = await this._fs.readdir(path, options);\n        if (isStringArray(result)) {\n            return result;\n        }\n        if (isTypedArrayCollection(result)) {\n            return result;\n        }\n        const entries = result.map((entry) => new DirEntImpl(entry.name, entry['Symbol(type)']));\n        return entries;\n    }\n    async mkdir(path, options) {\n        return await this._fs.mkdir(path, options);\n    }\n    watch(path, options, listener) {\n        if (typeof options === 'function') {\n            listener = options;\n            options = null;\n        }\n        return new FSWatcher(this, path, options, listener);\n    }\n    /**\n     * @internal\n     */\n    async _teardown() {\n        this._fs[_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.releaseProxy]();\n        await Promise.all([...this._watchers].map((watcher) => watcher.close()));\n    }\n}\nasync function unsynchronizedBoot(options) {\n    const { serverPromise } = serverFactory(options);\n    const server = await serverPromise;\n    const instance = await server.build({\n        host: window.location.host,\n        version: \"1.6.1\",\n        workdirName: options.workdirName,\n        forwardPreviewErrors: options.forwardPreviewErrors,\n    });\n    const [fs, previewScript, runtimeInfo] = await Promise.all([\n        instance.fs(),\n        instance.previewScript(),\n        instance.runtimeInfo(),\n    ]);\n    return new WebContainer(instance, fs, previewScript, runtimeInfo);\n}\nfunction binaryListener(listener) {\n    if (listener == null) {\n        return undefined;\n    }\n    return (data) => {\n        if (data instanceof Uint8Array) {\n            listener(decoder.decode(data));\n        }\n        else if (data == null) {\n            listener(null);\n        }\n    };\n}\nfunction proxyListener(listener) {\n    if (listener == null) {\n        return undefined;\n    }\n    return _vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.proxy(listener);\n}\nfunction serverFactory(options) {\n    if (cachedServerPromise != null) {\n        if (options.coep !== cachedBootOptions.coep) {\n            console.warn(`Attempting to boot WebContainer with 'coep: ${options.coep}'`);\n            console.warn(`First boot had 'coep: ${cachedBootOptions.coep}', new settings will not take effect!`);\n        }\n        return { serverPromise: cachedServerPromise };\n    }\n    if (options.coep) {\n        _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.setQueryParam('coep', options.coep);\n    }\n    if (options.experimentalNode) {\n        _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.setQueryParam('experimental_node', '1');\n    }\n    const iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n    iframe.setAttribute('allow', 'cross-origin-isolated');\n    const url = _internal_iframe_url_js__WEBPACK_IMPORTED_MODULE_4__.iframeSettings.url;\n    iframe.src = url.toString();\n    const { origin } = url;\n    cachedBootOptions = { ...options };\n    cachedServerPromise = new Promise((resolve) => {\n        const onMessage = (event) => {\n            if (event.origin !== origin) {\n                return;\n            }\n            const { data } = event;\n            if (data.type === 'init') {\n                resolve(_vendor_index_js__WEBPACK_IMPORTED_MODULE_2__.Comlink.wrap(event.ports[0]));\n                return;\n            }\n            if (data.type === 'warning') {\n                console[data.level].call(console, data.message);\n                return;\n            }\n        };\n        window.addEventListener('message', onMessage);\n    });\n    document.body.insertBefore(iframe, null);\n    return { serverPromise: cachedServerPromise };\n}\nfunction isStringArray(list) {\n    return typeof list[0] === 'string';\n}\nfunction isTypedArrayCollection(list) {\n    return list[0] instanceof Uint8Array;\n}\nfunction streamWithPush() {\n    let controller = null;\n    const stream = new ReadableStream({\n        start(controller_) {\n            controller = controller_;\n        },\n    });\n    const push = (item) => {\n        if (item != null) {\n            controller?.enqueue(item);\n        }\n        else {\n            controller?.close();\n            controller = null;\n        }\n    };\n    return { stream, push };\n}\nfunction syncSubscription(listener) {\n    let stopped = false;\n    let unsubscribe = () => { };\n    const wrapped = ((...args) => {\n        if (stopped) {\n            return;\n        }\n        listener(...args);\n    });\n    return {\n        subscribe(promise) {\n            promise.then((unsubscribe_) => {\n                unsubscribe = unsubscribe_;\n                if (stopped) {\n                    unsubscribe();\n                }\n            });\n            return () => {\n                stopped = true;\n                unsubscribe();\n            };\n        },\n        listener: wrapped,\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9CQUFvQjtBQUNuRDtBQUNBO0FBQ0E7QUFDdUU7QUFDUDtBQUNwQjtBQUNnQjtBQUNTO0FBQ1g7QUFDWjtBQUM4QztBQUNyRixhQUFhLHlEQUFRO0FBQ0U7QUFDSDtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBUztBQUNyQix3REFBd0Qsa0ZBQTZCO0FBQ3JGLGdEQUFnRCwyQkFBMkIsOERBQVMsZUFBZTtBQUNuRyxhQUFhO0FBQ2I7QUFDQSxzQkFBc0IsOERBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHlFQUFnQixDQUFDLDhEQUFTO0FBQzFDO0FBQ0EsaUNBQWlDLDhEQUFTO0FBQzFDLGtDQUFrQyw4REFBUztBQUMzQyxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwrRUFBd0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkRBQWdCO0FBQ3BDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxnQkFBZ0IsK0JBQStCO0FBQy9DLGtEQUFrRCxxREFBTztBQUN6RDtBQUNBO0FBQ0EsNEZBQTRGLHFCQUFxQjtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCwrRUFBd0I7QUFDeEUsd0NBQXdDLHFEQUFPO0FBQy9DO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLFlBQVk7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxvQkFBb0I7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGlDQUFpQztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixxREFBTztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlDQUF5QztBQUN0RDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4REFBUztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFFBQVEsOERBQVM7QUFDakI7QUFDQTtBQUNBLElBQUksbUVBQWM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHFEQUFPO0FBQ25DLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHFEQUFPO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFEQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHFEQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnQkFBZ0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsYUFBYTtBQUNyRixrREFBa0QsdUJBQXVCO0FBQ3pFO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxRQUFRLG1FQUFjO0FBQ3RCO0FBQ0E7QUFDQSxRQUFRLG1FQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1FQUFjO0FBQzlCO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQSx3QkFBd0IscURBQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktYXBwLWJ1aWxkZXItd2ViLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW5kZXguanM/Y2IwNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoZSBXZWJDb250YWluZXIgUHVibGljIEFQSSBhbGxvd3MgeW91IGJ1aWxkIGN1c3RvbSBhcHBsaWNhdGlvbnMgb24gdG9wIG9mIGFuIGluLWJyb3dzZXIgTm9kZS5qcyBydW50aW1lLlxuICpcbiAqIEl0cyBtYWluIGVudHJ5cG9pbnQgaXMgdGhlIHtAbGluayBXZWJDb250YWluZXJ9IGNsYXNzLlxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5pbXBvcnQgeyBhdXRoU3RhdGUsIGFzc2VydEF1dGhUb2tlbnMgfSBmcm9tICcuL2ludGVybmFsL2F1dGgtc3RhdGUuanMnO1xuaW1wb3J0IHsgUHJldmlld01lc3NhZ2VUeXBlIH0gZnJvbSAnLi9wcmV2aWV3LW1lc3NhZ2UtdHlwZXMuanMnO1xuaW1wb3J0IHsgQ29tbGluayB9IGZyb20gJy4vdmVuZG9yL2luZGV4LmpzJztcbmltcG9ydCB7IGF1dGggYXMgYXV0aEltcGwgfSBmcm9tICcuL2ludGVybmFsL2F1dGgtc3RhdGUuanMnO1xuaW1wb3J0IHsgYWRkQWNjZXNzVG9rZW5DaGFuZ2VkTGlzdGVuZXIgfSBmcm9tICcuL2ludGVybmFsL3Rva2Vucy5qcyc7XG5pbXBvcnQgeyBpZnJhbWVTZXR0aW5ncyB9IGZyb20gJy4vaW50ZXJuYWwvaWZyYW1lLXVybC5qcyc7XG5pbXBvcnQgeyBpc1ByZXZpZXdNZXNzYWdlIH0gZnJvbSAnLi91dGlscy5qcyc7XG5pbXBvcnQgeyB0b0V4dGVybmFsRmlsZVN5c3RlbVRyZWUsIHRvSW50ZXJuYWxGaWxlU3lzdGVtVHJlZSB9IGZyb20gJy4vdXRpbHMvZmlsZS1zeXN0ZW0uanMnO1xuZXhwb3J0IGNvbnN0IGF1dGggPSBhdXRoSW1wbDtcbmV4cG9ydCB7IFByZXZpZXdNZXNzYWdlVHlwZSB9O1xuZXhwb3J0ICogZnJvbSAnLi91dGlscy5qcyc7XG5sZXQgYm9vdFByb21pc2UgPSBudWxsO1xubGV0IGNhY2hlZFNlcnZlclByb21pc2UgPSBudWxsO1xubGV0IGNhY2hlZEJvb3RPcHRpb25zID0ge307XG5jb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG5jb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4vKipcbiAqIFRoZSBtYWluIGV4cG9ydCBvZiB0aGlzIGxpYnJhcnkuIEFuIGluc3RhbmNlIG9mIGBXZWJDb250YWluZXJgIHJlcHJlc2VudHMgYSBydW50aW1lXG4gKiByZWFkeSB0byBiZSB1c2VkLlxuICovXG5leHBvcnQgY2xhc3MgV2ViQ29udGFpbmVyIHtcbiAgICBfaW5zdGFuY2U7XG4gICAgX3J1bnRpbWVJbmZvO1xuICAgIC8qKlxuICAgICAqIEdpdmVzIGFjY2VzcyB0byB0aGUgdW5kZXJseWluZyBmaWxlIHN5c3RlbS5cbiAgICAgKi9cbiAgICBmcztcbiAgICAvKiogQGludGVybmFsICovXG4gICAgc3RhdGljIF9pbnN0YW5jZSA9IG51bGw7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIHN0YXRpYyBfdGVhcmRvd25Qcm9taXNlID0gbnVsbDtcbiAgICBfdG9ybkRvd24gPSBmYWxzZTtcbiAgICBfdW5zdWJzY3JpYmVGcm9tVG9rZW5DaGFuZ2VkTGlzdGVuZXIgPSAoKSA9PiB7IH07XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfaW5zdGFuY2UsIGZzLCBwcmV2aWV3U2NyaXB0LCBcbiAgICAvKiogQGludGVybmFsICovXG4gICAgX3J1bnRpbWVJbmZvKSB7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlID0gX2luc3RhbmNlO1xuICAgICAgICB0aGlzLl9ydW50aW1lSW5mbyA9IF9ydW50aW1lSW5mbztcbiAgICAgICAgdGhpcy5mcyA9IG5ldyBGaWxlU3lzdGVtQVBJQ2xpZW50KGZzKTtcbiAgICAgICAgLy8gZm9yd2FyZCB0aGUgY3JlZGVudGlhbHMgdG8gd2ViY29udGFpbmVyIGlmIG5lZWRlZFxuICAgICAgICBpZiAoYXV0aFN0YXRlLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aGlzLl91bnN1YnNjcmliZUZyb21Ub2tlbkNoYW5nZWRMaXN0ZW5lciA9IGFkZEFjY2Vzc1Rva2VuQ2hhbmdlZExpc3RlbmVyKChhY2Nlc3NUb2tlbikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlLnNldENyZWRlbnRpYWxzKHsgYWNjZXNzVG9rZW4sIGVkaXRvck9yaWdpbjogYXV0aFN0YXRlLmVkaXRvck9yaWdpbiB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhdXRoU3RhdGUuYXV0aENvbXBsZXRlLnByb21pc2U7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Rvcm5Eb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXNzZXJ0QXV0aFRva2VucyhhdXRoU3RhdGUudG9rZW5zKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9pbnN0YW5jZS5zZXRDcmVkZW50aWFscyh7XG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBhdXRoU3RhdGUudG9rZW5zLmFjY2VzcyxcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yT3JpZ2luOiBhdXRoU3RhdGUuZWRpdG9yT3JpZ2luLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkoKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBwcmludCB0aGUgZXJyb3IgYXMgdGhpcyBpcyBsaWtlbHkgYSBidWcgaW4gd2ViY29udGFpbmVyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzcGF3bihjb21tYW5kLCBvcHRpb25zT3JBcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBhcmdzID0gW107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnNPckFyZ3MpKSB7XG4gICAgICAgICAgICBhcmdzID0gb3B0aW9uc09yQXJncztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JBcmdzO1xuICAgICAgICB9XG4gICAgICAgIGxldCBvdXRwdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBvdXRwdXRTdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oKTtcbiAgICAgICAgaWYgKG9wdGlvbnM/Lm91dHB1dCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHN0cmVhbVdpdGhQdXNoKCk7XG4gICAgICAgICAgICBvdXRwdXQgPSByZXN1bHQucHVzaDtcbiAgICAgICAgICAgIG91dHB1dFN0cmVhbSA9IHJlc3VsdC5zdHJlYW07XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0ZG91dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHN0ZG91dFN0cmVhbTtcbiAgICAgICAgbGV0IHN0ZGVyciA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHN0ZGVyclN0cmVhbTtcbiAgICAgICAgY29uc3Qgd3JhcHBlZE91dHB1dCA9IHByb3h5TGlzdGVuZXIoYmluYXJ5TGlzdGVuZXIob3V0cHV0KSk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRTdGRvdXQgPSBwcm94eUxpc3RlbmVyKGJpbmFyeUxpc3RlbmVyKHN0ZG91dCkpO1xuICAgICAgICBjb25zdCB3cmFwcGVkU3RkZXJyID0gcHJveHlMaXN0ZW5lcihiaW5hcnlMaXN0ZW5lcihzdGRlcnIpKTtcbiAgICAgICAgY29uc3QgcHJvY2VzcyA9IGF3YWl0IHRoaXMuX2luc3RhbmNlLnJ1bih7XG4gICAgICAgICAgICBjb21tYW5kLFxuICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgIGN3ZDogb3B0aW9ucz8uY3dkLFxuICAgICAgICAgICAgZW52OiBvcHRpb25zPy5lbnYsXG4gICAgICAgICAgICB0ZXJtaW5hbDogb3B0aW9ucz8udGVybWluYWwsXG4gICAgICAgIH0sIHdyYXBwZWRTdGRvdXQsIHdyYXBwZWRTdGRlcnIsIHdyYXBwZWRPdXRwdXQpO1xuICAgICAgICByZXR1cm4gbmV3IFdlYkNvbnRhaW5lclByb2Nlc3NJbXBsKHByb2Nlc3MsIG91dHB1dFN0cmVhbSwgc3Rkb3V0U3RyZWFtLCBzdGRlcnJTdHJlYW0pO1xuICAgIH1cbiAgICBhc3luYyBleHBvcnQocGF0aCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBzZXJpYWxpemVPcHRpb25zID0ge1xuICAgICAgICAgICAgZm9ybWF0OiBvcHRpb25zPy5mb3JtYXQgPz8gJ2pzb24nLFxuICAgICAgICAgICAgaW5jbHVkZXM6IG9wdGlvbnM/LmluY2x1ZGVzLFxuICAgICAgICAgICAgZXhjbHVkZXM6IG9wdGlvbnM/LmV4Y2x1ZGVzLFxuICAgICAgICAgICAgZXh0ZXJuYWw6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2luc3RhbmNlLnNlcmlhbGl6ZShwYXRoLCBzZXJpYWxpemVPcHRpb25zKTtcbiAgICAgICAgaWYgKHNlcmlhbGl6ZU9wdGlvbnMuZm9ybWF0ID09PSAnanNvbicpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRlY29kZXIuZGVjb2RlKHJlc3VsdCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRvRXh0ZXJuYWxGaWxlU3lzdGVtVHJlZShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBvbihldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKGV2ZW50ID09PSAncHJldmlldy1tZXNzYWdlJykge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgICAgICAgICAgbGlzdGVuZXIgPSAoKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNQcmV2aWV3TWVzc2FnZShtZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgbGlzdGVuZXI6IHdyYXBwZWQsIHN1YnNjcmliZSB9ID0gc3luY1N1YnNjcmlwdGlvbihsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmUodGhpcy5faW5zdGFuY2Uub24oZXZlbnQsIENvbWxpbmsucHJveHkod3JhcHBlZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW91bnRzIGEgdHJlZSBvZiBmaWxlcyBpbnRvIHRoZSBmaWxlc3lzdGVtLiBUaGlzIGNhbiBiZSBzcGVjaWZpZWQgYXMgYSB0cmVlIG9iamVjdCAoe0BsaW5rIEZpbGVTeXN0ZW1UcmVlfSlcbiAgICAgKiBvciBhcyBhIGJpbmFyeSBzbmFwc2hvdCBnZW5lcmF0ZWQgYnkgW2BAd2ViY29udGFpbmVyL3NuYXBzaG90YF0oaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvQHdlYmNvbnRhaW5lci9zbmFwc2hvdCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc25hcHNob3RPclRyZWUgLSBBIHRyZWUgb2YgZmlsZXMsIG9yIGEgYmluYXJ5IHNuYXBzaG90LiBOb3RlIHRoYXQgYmluYXJ5IHBheWxvYWRzIHdpbGwgYmUgdHJhbnNmZXJyZWQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMubW91bnRQb2ludCAtIFNwZWNpZmllcyBhIG5lc3RlZCBwYXRoIHdoZXJlIHRoZSB0cmVlIHNob3VsZCBiZSBtb3VudGVkLlxuICAgICAqL1xuICAgIG1vdW50KHNuYXBzaG90T3JUcmVlLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBzbmFwc2hvdE9yVHJlZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXlcbiAgICAgICAgICAgID8gc25hcHNob3RPclRyZWVcbiAgICAgICAgICAgIDogc25hcHNob3RPclRyZWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlclxuICAgICAgICAgICAgICAgID8gbmV3IFVpbnQ4QXJyYXkoc25hcHNob3RPclRyZWUpXG4gICAgICAgICAgICAgICAgOiBlbmNvZGVyLmVuY29kZShKU09OLnN0cmluZ2lmeSh0b0ludGVybmFsRmlsZVN5c3RlbVRyZWUoc25hcHNob3RPclRyZWUpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YW5jZS5sb2FkRmlsZXMoQ29tbGluay50cmFuc2ZlcihwYXlsb2FkLCBbcGF5bG9hZC5idWZmZXJdKSwge1xuICAgICAgICAgICAgbW91bnRQb2ludHM6IG9wdGlvbnM/Lm1vdW50UG9pbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYSBjdXN0b20gc2NyaXB0IHRvIGJlIGluamVjdGVkIGludG8gYWxsIHByZXZpZXdzLiBXaGVuIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkLCBldmVyeVxuICAgICAqIGZ1dHVyZSBwYWdlIHJlbG9hZCB3aWxsIGNvbnRhaW4gdGhlIHByb3ZpZGVkIHNjcmlwdCB0YWcgb24gYWxsIEhUTUwgcmVzcG9uc2VzLlxuICAgICAqXG4gICAgICogTm90ZTpcbiAgICAgKlxuICAgICAqIFdoZW4gdGhpcyBmdW5jdGlvbiByZXNvbHZlcywgZXZlcnkgcHJldmlldyByZWxvYWRlZCBfYWZ0ZXJfIHdpbGwgaGF2ZSB0aGUgbmV3IHNjcmlwdC5cbiAgICAgKiBFeGlzdGluZyBwcmV2aWV3IGhhdmUgdG8gYmUgZXhwbGljaXRlbHkgcmVsb2FkZWQuXG4gICAgICpcbiAgICAgKiBUbyByZWxvYWQgYSBwcmV2aWV3IHlvdSBjYW4gdXNlIGByZWxvYWRQcmV2aWV3YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzY3JpcHRTcmMgU291cmNlIGZvciB0aGUgc2NyaXB0IHRhZy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIHRvIGRlZmluZSB3aGljaCB0eXBlIG9mIHNjcmlwdCB0aGlzIGlzLlxuICAgICAqL1xuICAgIHNldFByZXZpZXdTY3JpcHQoc2NyaXB0U3JjLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YW5jZS5zZXRQcmV2aWV3U2NyaXB0KHNjcmlwdFNyYywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBkZWZhdWx0IHZhbHVlIG9mIHRoZSBgUEFUSGAgZW52aXJvbm1lbnQgdmFyaWFibGUgZm9yIHByb2Nlc3NlcyBzdGFydGVkIHRocm91Z2gge0BsaW5rIHNwYXdufS5cbiAgICAgKi9cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVJbmZvLnBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmdWxsIHBhdGggdG8gdGhlIHdvcmtpbmcgZGlyZWN0b3J5IChzZWUge0BsaW5rIEZpbGVTeXN0ZW1BUEl9KS5cbiAgICAgKi9cbiAgICBnZXQgd29ya2RpcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVJbmZvLmN3ZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIFdlYkNvbnRhaW5lciBpbnN0YW5jZSwgdHVybmluZyBpdCB1bnVzYWJsZSwgYW5kIHJlbGVhc2VzIGl0cyByZXNvdXJjZXMuIEFmdGVyIHRoaXMsXG4gICAgICogYSBuZXcgV2ViQ29udGFpbmVyIGluc3RhbmNlIGNhbiBiZSBvYnRhaW5lZCBieSBjYWxsaW5nIHtAbGluayBXZWJDb250YWluZXIuYm9vdCB8IGBib290YH0uXG4gICAgICpcbiAgICAgKiBBbGwgZW50aXRpZXMgZGVyaXZlZCBmcm9tIHRoaXMgaW5zdGFuY2UgKGUuZy4gcHJvY2Vzc2VzLCB0aGUgZmlsZSBzeXN0ZW0sIGV0Yy4pIGFsc28gYmVjb21lIHVudXNhYmxlXG4gICAgICogYWZ0ZXIgY2FsbGluZyB0aGlzIG1ldGhvZC5cbiAgICAgKi9cbiAgICB0ZWFyZG93bigpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Rvcm5Eb3duKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYkNvbnRhaW5lciBhbHJlYWR5IHRvcm4gZG93bicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Rvcm5Eb3duID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmVGcm9tVG9rZW5DaGFuZ2VkTGlzdGVuZXIoKTtcbiAgICAgICAgY29uc3QgdGVhcmRvd25GbiA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5mcy5fdGVhcmRvd24oKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9pbnN0YW5jZS50ZWFyZG93bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2VbQ29tbGluay5yZWxlYXNlUHJveHldKCk7XG4gICAgICAgICAgICAgICAgaWYgKFdlYkNvbnRhaW5lci5faW5zdGFuY2UgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgV2ViQ29udGFpbmVyLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBXZWJDb250YWluZXIuX3RlYXJkb3duUHJvbWlzZSA9IHRlYXJkb3duRm4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQm9vdHMgYSBXZWJDb250YWluZXIuIE9ubHkgYSBzaW5nbGUgaW5zdGFuY2Ugb2YgV2ViQ29udGFpbmVyIGNhbiBiZSBib290ZWQgY29uY3VycmVudGx5XG4gICAgICogKHNlZSB7QGxpbmsgV2ViQ29udGFpbmVyLnRlYXJkb3duIHwgYHRlYXJkb3duYH0pLlxuICAgICAqXG4gICAgICogQm9vdGluZyBXZWJDb250YWluZXIgaXMgYW4gZXhwZW5zaXZlIG9wZXJhdGlvbi5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgYm9vdChvcHRpb25zID0ge30pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fdGVhcmRvd25Qcm9taXNlO1xuICAgICAgICBXZWJDb250YWluZXIuX3RlYXJkb3duUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIGNvbnN0IHsgd29ya2Rpck5hbWUgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmICh3aW5kb3cuY3Jvc3NPcmlnaW5Jc29sYXRlZCAmJiBvcHRpb25zLmNvZXAgPT09ICdub25lJykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBBIENyb3NzLU9yaWdpbi1FbWJlZGRlci1Qb2xpY3kgaGVhZGVyIGlzIHJlcXVpcmVkIGluIGNyb3NzIG9yaWdpbiBpc29sYXRlZCBlbnZpcm9ubWVudHMuXFxuU2V0IHRoZSAnY29lcCcgb3B0aW9uIHRvICdyZXF1aXJlLWNvcnAnLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3b3JrZGlyTmFtZT8uaW5jbHVkZXMoJy8nKSB8fCB3b3JrZGlyTmFtZSA9PT0gJy4uJyB8fCB3b3JrZGlyTmFtZSA9PT0gJy4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dvcmtkaXJOYW1lIHNob3VsZCBiZSBhIHZhbGlkIGZvbGRlciBuYW1lJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2lnbmFsIHRoYXQgYm9vdCB3YXMgY2FsbGVkIHRvIGF1dGggbW9kdWxlIGFzIGNhbGxpbmcgYXV0aC5pbml0IGFmdGVyIGJvb3QgaXMgbGlrZWx5IGluY29ycmVjdFxuICAgICAgICBhdXRoU3RhdGUuYm9vdENhbGxlZCA9IHRydWU7XG4gICAgICAgIC8vIHRyeSB0byBcImFjcXVpcmUgdGhlIGxvY2tcIiwgaS5lLiB3YWl0IGZvciBhbnkgb25nb2luZyBib290IHJlcXVlc3QgdG8gZmluaXNoXG4gICAgICAgIHdoaWxlIChib290UHJvbWlzZSkge1xuICAgICAgICAgICAgYXdhaXQgYm9vdFByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFdlYkNvbnRhaW5lci5faW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBhIHNpbmdsZSBXZWJDb250YWluZXIgaW5zdGFuY2UgY2FuIGJlIGJvb3RlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluc3RhbmNlUHJvbWlzZSA9IHVuc3luY2hyb25pemVkQm9vdChvcHRpb25zKTtcbiAgICAgICAgLy8gdGhlIFwibG9ja1wiIGlzIGEgcHJvbWlzZSBmb3IgdGhlIG9uZ29pbmcgYm9vdCB0aGF0IG5ldmVyIGZhaWxzXG4gICAgICAgIGJvb3RQcm9taXNlID0gaW5zdGFuY2VQcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGF3YWl0IGluc3RhbmNlUHJvbWlzZTtcbiAgICAgICAgICAgIFdlYkNvbnRhaW5lci5faW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIC8vIHJlbGVhc2UgdGhlIFwibG9ja1wiXG4gICAgICAgICAgICBib290UHJvbWlzZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIENvbmZpZ3VyZSBhbiBBUEkga2V5IHRvIGJlIHVzZWQgZm9yIHRoaXMgaW5zdGFuY2Ugb2YgV2ViQ29udGFpbmVyLlxuICpcbiAqIEBwYXJhbSBrZXkgV2ViQ29udGFpbmVyIEFQSSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVBUElLZXkoa2V5KSB7XG4gICAgaWYgKGF1dGhTdGF0ZS5ib290Q2FsbGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYGNvbmZpZ3VyZUFQSUtleWAgc2hvdWxkIGFsd2F5cyBiZSBjYWxsZWQgYmVmb3JlIGBXZWJDb250YWluZXIuYm9vdGAnKTtcbiAgICB9XG4gICAgaWZyYW1lU2V0dGluZ3Muc2V0UXVlcnlQYXJhbSgnY2xpZW50X2lkJywga2V5KTtcbn1cbmNvbnN0IERJUl9FTlRSWV9UWVBFX0ZJTEUgPSAxO1xuY29uc3QgRElSX0VOVFJZX1RZUEVfRElSID0gMjtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIERpckVudEltcGwge1xuICAgIG5hbWU7XG4gICAgX3R5cGU7XG4gICAgY29uc3RydWN0b3IobmFtZSwgX3R5cGUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5fdHlwZSA9IF90eXBlO1xuICAgIH1cbiAgICBpc0ZpbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90eXBlID09PSBESVJfRU5UUllfVFlQRV9GSUxFO1xuICAgIH1cbiAgICBpc0RpcmVjdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R5cGUgPT09IERJUl9FTlRSWV9UWVBFX0RJUjtcbiAgICB9XG59XG5jbGFzcyBGU1dhdGNoZXIge1xuICAgIF9hcGlDbGllbnQ7XG4gICAgX3BhdGg7XG4gICAgX29wdGlvbnM7XG4gICAgX2xpc3RlbmVyO1xuICAgIF93cmFwcGVkTGlzdGVuZXI7XG4gICAgX3dhdGNoZXI7XG4gICAgX2Nsb3NlZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKF9hcGlDbGllbnQsIF9wYXRoLCBfb3B0aW9ucywgX2xpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuX2FwaUNsaWVudCA9IF9hcGlDbGllbnQ7XG4gICAgICAgIHRoaXMuX3BhdGggPSBfcGF0aDtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IF9vcHRpb25zO1xuICAgICAgICB0aGlzLl9saXN0ZW5lciA9IF9saXN0ZW5lcjtcbiAgICAgICAgdGhpcy5fYXBpQ2xpZW50Ll93YXRjaGVycy5hZGQodGhpcyk7XG4gICAgICAgIHRoaXMuX3dyYXBwZWRMaXN0ZW5lciA9IChldmVudCwgZmlsZW5hbWUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9saXN0ZW5lciAmJiAhdGhpcy5fY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXIoZXZlbnQsIGZpbGVuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fYXBpQ2xpZW50Ll9mc1xuICAgICAgICAgICAgLndhdGNoKHRoaXMuX3BhdGgsIHRoaXMuX29wdGlvbnMsIHByb3h5TGlzdGVuZXIodGhpcy5fd3JhcHBlZExpc3RlbmVyKSlcbiAgICAgICAgICAgIC50aGVuKChfd2F0Y2hlcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fd2F0Y2hlciA9IF93YXRjaGVyO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl90ZWFyZG93bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9XG4gICAgYXN5bmMgY2xvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2xvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fYXBpQ2xpZW50Ll93YXRjaGVycy5kZWxldGUodGhpcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl90ZWFyZG93bigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jIF90ZWFyZG93bigpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fd2F0Y2hlcj8uY2xvc2UoKS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3dhdGNoZXI/LltDb21saW5rLnJlbGVhc2VQcm94eV0oKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgV2ViQ29udGFpbmVyUHJvY2Vzc0ltcGwge1xuICAgIG91dHB1dDtcbiAgICBpbnB1dDtcbiAgICBleGl0O1xuICAgIF9wcm9jZXNzO1xuICAgIHN0ZG91dDtcbiAgICBzdGRlcnI7XG4gICAgY29uc3RydWN0b3IocHJvY2Vzcywgb3V0cHV0LCBzdGRvdXQsIHN0ZGVycikge1xuICAgICAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICAgICAgdGhpcy5fcHJvY2VzcyA9IHByb2Nlc3M7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBuZXcgV3JpdGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgd3JpdGU6IChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcyBwcm9taXNlIGlzIG5vdCBzdXBwb3NlZCB0byBmYWlsIGFueXdheVxuICAgICAgICAgICAgICAgIHRoaXMuX2dldFByb2Nlc3MoKVxuICAgICAgICAgICAgICAgICAgICA/LndyaXRlKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXhpdCA9IHRoaXMuX29uRXhpdCgpO1xuICAgICAgICB0aGlzLnN0ZG91dCA9IHN0ZG91dDtcbiAgICAgICAgdGhpcy5zdGRlcnIgPSBzdGRlcnI7XG4gICAgfVxuICAgIGtpbGwoKSB7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3M/LmtpbGwoKTtcbiAgICB9XG4gICAgcmVzaXplKGRpbWVuc2lvbnMpIHtcbiAgICAgICAgdGhpcy5fZ2V0UHJvY2VzcygpPy5yZXNpemUoZGltZW5zaW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIF9vbkV4aXQoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcHJvY2Vzcy5vbkV4aXQ7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzPy5bQ29tbGluay5yZWxlYXNlUHJveHldKCk7XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2V0UHJvY2VzcygpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Byb2Nlc3MgPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUaGlzIHByb2Nlc3MgYWxyZWFkeSBleGl0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2VzcztcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBGaWxlU3lzdGVtQVBJQ2xpZW50IHtcbiAgICBfZnM7XG4gICAgX3dhdGNoZXJzID0gbmV3IFNldChbXSk7XG4gICAgY29uc3RydWN0b3IoZnMpIHtcbiAgICAgICAgdGhpcy5fZnMgPSBmcztcbiAgICB9XG4gICAgcm0oLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnMucm0oLi4uYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIHJlYWRGaWxlKHBhdGgsIGVuY29kaW5nKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9mcy5yZWFkRmlsZShwYXRoLCBlbmNvZGluZyk7XG4gICAgfVxuICAgIGFzeW5jIHJlbmFtZShvbGRQYXRoLCBuZXdQYXRoKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9mcy5yZW5hbWUob2xkUGF0aCwgbmV3UGF0aCk7XG4gICAgfVxuICAgIGFzeW5jIHdyaXRlRmlsZShwYXRoLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gZGF0YS5idWZmZXIuc2xpY2UoZGF0YS5ieXRlT2Zmc2V0LCBkYXRhLmJ5dGVPZmZzZXQgKyBkYXRhLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgZGF0YSA9IENvbWxpbmsudHJhbnNmZXIobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSwgW2J1ZmZlcl0pO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuX2ZzLndyaXRlRmlsZShwYXRoLCBkYXRhLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgcmVhZGRpcihwYXRoLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2ZzLnJlYWRkaXIocGF0aCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChpc1N0cmluZ0FycmF5KHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVHlwZWRBcnJheUNvbGxlY3Rpb24ocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbnRyaWVzID0gcmVzdWx0Lm1hcCgoZW50cnkpID0+IG5ldyBEaXJFbnRJbXBsKGVudHJ5Lm5hbWUsIGVudHJ5WydTeW1ib2wodHlwZSknXSkpO1xuICAgICAgICByZXR1cm4gZW50cmllcztcbiAgICB9XG4gICAgYXN5bmMgbWtkaXIocGF0aCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fZnMubWtkaXIocGF0aCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHdhdGNoKHBhdGgsIG9wdGlvbnMsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgbGlzdGVuZXIgPSBvcHRpb25zO1xuICAgICAgICAgICAgb3B0aW9ucyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBGU1dhdGNoZXIodGhpcywgcGF0aCwgb3B0aW9ucywgbGlzdGVuZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyBfdGVhcmRvd24oKSB7XG4gICAgICAgIHRoaXMuX2ZzW0NvbWxpbmsucmVsZWFzZVByb3h5XSgpO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbLi4udGhpcy5fd2F0Y2hlcnNdLm1hcCgod2F0Y2hlcikgPT4gd2F0Y2hlci5jbG9zZSgpKSk7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gdW5zeW5jaHJvbml6ZWRCb290KG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHNlcnZlclByb21pc2UgfSA9IHNlcnZlckZhY3Rvcnkob3B0aW9ucyk7XG4gICAgY29uc3Qgc2VydmVyID0gYXdhaXQgc2VydmVyUHJvbWlzZTtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGF3YWl0IHNlcnZlci5idWlsZCh7XG4gICAgICAgIGhvc3Q6IHdpbmRvdy5sb2NhdGlvbi5ob3N0LFxuICAgICAgICB2ZXJzaW9uOiBcIjEuNi4xXCIsXG4gICAgICAgIHdvcmtkaXJOYW1lOiBvcHRpb25zLndvcmtkaXJOYW1lLFxuICAgICAgICBmb3J3YXJkUHJldmlld0Vycm9yczogb3B0aW9ucy5mb3J3YXJkUHJldmlld0Vycm9ycyxcbiAgICB9KTtcbiAgICBjb25zdCBbZnMsIHByZXZpZXdTY3JpcHQsIHJ1bnRpbWVJbmZvXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgaW5zdGFuY2UuZnMoKSxcbiAgICAgICAgaW5zdGFuY2UucHJldmlld1NjcmlwdCgpLFxuICAgICAgICBpbnN0YW5jZS5ydW50aW1lSW5mbygpLFxuICAgIF0pO1xuICAgIHJldHVybiBuZXcgV2ViQ29udGFpbmVyKGluc3RhbmNlLCBmcywgcHJldmlld1NjcmlwdCwgcnVudGltZUluZm8pO1xufVxuZnVuY3Rpb24gYmluYXJ5TGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gKGRhdGEpID0+IHtcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihkZWNvZGVyLmRlY29kZShkYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGF0YSA9PSBudWxsKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihudWxsKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBwcm94eUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgaWYgKGxpc3RlbmVyID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIENvbWxpbmsucHJveHkobGlzdGVuZXIpO1xufVxuZnVuY3Rpb24gc2VydmVyRmFjdG9yeShvcHRpb25zKSB7XG4gICAgaWYgKGNhY2hlZFNlcnZlclByb21pc2UgIT0gbnVsbCkge1xuICAgICAgICBpZiAob3B0aW9ucy5jb2VwICE9PSBjYWNoZWRCb290T3B0aW9ucy5jb2VwKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEF0dGVtcHRpbmcgdG8gYm9vdCBXZWJDb250YWluZXIgd2l0aCAnY29lcDogJHtvcHRpb25zLmNvZXB9J2ApO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBGaXJzdCBib290IGhhZCAnY29lcDogJHtjYWNoZWRCb290T3B0aW9ucy5jb2VwfScsIG5ldyBzZXR0aW5ncyB3aWxsIG5vdCB0YWtlIGVmZmVjdCFgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzZXJ2ZXJQcm9taXNlOiBjYWNoZWRTZXJ2ZXJQcm9taXNlIH07XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmNvZXApIHtcbiAgICAgICAgaWZyYW1lU2V0dGluZ3Muc2V0UXVlcnlQYXJhbSgnY29lcCcsIG9wdGlvbnMuY29lcCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmV4cGVyaW1lbnRhbE5vZGUpIHtcbiAgICAgICAgaWZyYW1lU2V0dGluZ3Muc2V0UXVlcnlQYXJhbSgnZXhwZXJpbWVudGFsX25vZGUnLCAnMScpO1xuICAgIH1cbiAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhbGxvdycsICdjcm9zcy1vcmlnaW4taXNvbGF0ZWQnKTtcbiAgICBjb25zdCB1cmwgPSBpZnJhbWVTZXR0aW5ncy51cmw7XG4gICAgaWZyYW1lLnNyYyA9IHVybC50b1N0cmluZygpO1xuICAgIGNvbnN0IHsgb3JpZ2luIH0gPSB1cmw7XG4gICAgY2FjaGVkQm9vdE9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICBjYWNoZWRTZXJ2ZXJQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgY29uc3Qgb25NZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQub3JpZ2luICE9PSBvcmlnaW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGV2ZW50O1xuICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2luaXQnKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShDb21saW5rLndyYXAoZXZlbnQucG9ydHNbMF0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSAnd2FybmluZycpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlW2RhdGEubGV2ZWxdLmNhbGwoY29uc29sZSwgZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25NZXNzYWdlKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShpZnJhbWUsIG51bGwpO1xuICAgIHJldHVybiB7IHNlcnZlclByb21pc2U6IGNhY2hlZFNlcnZlclByb21pc2UgfTtcbn1cbmZ1bmN0aW9uIGlzU3RyaW5nQXJyYXkobGlzdCkge1xuICAgIHJldHVybiB0eXBlb2YgbGlzdFswXSA9PT0gJ3N0cmluZyc7XG59XG5mdW5jdGlvbiBpc1R5cGVkQXJyYXlDb2xsZWN0aW9uKGxpc3QpIHtcbiAgICByZXR1cm4gbGlzdFswXSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXk7XG59XG5mdW5jdGlvbiBzdHJlYW1XaXRoUHVzaCgpIHtcbiAgICBsZXQgY29udHJvbGxlciA9IG51bGw7XG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgc3RhcnQoY29udHJvbGxlcl8pIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgPSBjb250cm9sbGVyXztcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zdCBwdXNoID0gKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGl0ZW0gIT0gbnVsbCkge1xuICAgICAgICAgICAgY29udHJvbGxlcj8uZW5xdWV1ZShpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI/LmNsb3NlKCk7XG4gICAgICAgICAgICBjb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHsgc3RyZWFtLCBwdXNoIH07XG59XG5mdW5jdGlvbiBzeW5jU3Vic2NyaXB0aW9uKGxpc3RlbmVyKSB7XG4gICAgbGV0IHN0b3BwZWQgPSBmYWxzZTtcbiAgICBsZXQgdW5zdWJzY3JpYmUgPSAoKSA9PiB7IH07XG4gICAgY29uc3Qgd3JhcHBlZCA9ICgoLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAoc3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN1YnNjcmliZShwcm9taXNlKSB7XG4gICAgICAgICAgICBwcm9taXNlLnRoZW4oKHVuc3Vic2NyaWJlXykgPT4ge1xuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gdW5zdWJzY3JpYmVfO1xuICAgICAgICAgICAgICAgIGlmIChzdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBsaXN0ZW5lcjogd3JhcHBlZCxcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TypedEventTarget: () => (/* binding */ TypedEventTarget)\n/* harmony export */ });\nclass TypedEventTarget {\n    _bus = new EventTarget();\n    listen(listener) {\n        function wrappedListener(event) {\n            listener(event.data);\n        }\n        this._bus.addEventListener('message', wrappedListener);\n        return () => this._bus.removeEventListener('message', wrappedListener);\n    }\n    fireEvent(data) {\n        this._bus.dispatchEvent(new MessageEvent('message', { data }));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9UeXBlZEV2ZW50VGFyZ2V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxNQUFNO0FBQ3BFO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1hcHAtYnVpbGRlci13ZWIvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9UeXBlZEV2ZW50VGFyZ2V0LmpzPzNiNGQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFR5cGVkRXZlbnRUYXJnZXQge1xuICAgIF9idXMgPSBuZXcgRXZlbnRUYXJnZXQoKTtcbiAgICBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICAgICAgZnVuY3Rpb24gd3JhcHBlZExpc3RlbmVyKGV2ZW50KSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihldmVudC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9idXMuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHdyYXBwZWRMaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiAoKSA9PiB0aGlzLl9idXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHdyYXBwZWRMaXN0ZW5lcik7XG4gICAgfVxuICAgIGZpcmVFdmVudChkYXRhKSB7XG4gICAgICAgIHRoaXMuX2J1cy5kaXNwYXRjaEV2ZW50KG5ldyBNZXNzYWdlRXZlbnQoJ21lc3NhZ2UnLCB7IGRhdGEgfSkpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/auth-state.js":
/*!********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/auth-state.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertAuthTokens: () => (/* binding */ assertAuthTokens),\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   authState: () => (/* binding */ authState)\n/* harmony export */ });\n/* harmony import */ var _tokens_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tokens.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\");\n/* harmony import */ var _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./iframe-url.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js\");\n/* harmony import */ var _code_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./code.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/code.js\");\n/* harmony import */ var _reset_promise_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./reset-promise.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/reset-promise.js\");\n/* harmony import */ var _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TypedEventTarget.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js\");\n\n\n\n\n\n\n/**\n * @internal\n */\nconst authState = {\n    initialized: false,\n    bootCalled: false,\n    authComplete: (0,_reset_promise_js__WEBPACK_IMPORTED_MODULE_4__.resettablePromise)(),\n    clientId: '',\n    oauthScope: '',\n    broadcastChannel: null,\n    get editorOrigin() {\n        return _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__.iframeSettings.editorOrigin;\n    },\n    tokens: null,\n};\nconst authFailedListeners = new _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_5__.TypedEventTarget();\nconst loggedOutListeners = new _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_5__.TypedEventTarget();\nfunction broadcastMessage(message) {\n    if (!authState.broadcastChannel) {\n        return;\n    }\n    authState.broadcastChannel.postMessage(message);\n    // check if we are in a popup mode\n    if (localStorage.getItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_POPUP_NAME) === 'true' && message.type !== 'auth-logout') {\n        localStorage.removeItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_POPUP_NAME);\n        // wait a tick to make sure the posted message has been sent\n        setTimeout(() => {\n            window.close();\n        });\n    }\n}\nconst auth = {\n    init({ editorOrigin, clientId, scope }) {\n        if (authState.initialized) {\n            throw new Error('Init should only be called once');\n        }\n        let enterprise = true;\n        if (enterprise && authState.bootCalled) {\n            throw new Error('`auth.init` should always be called before `WebContainer.boot`');\n        }\n        authState.initialized = true;\n        authState.tokens = _tokens_js__WEBPACK_IMPORTED_MODULE_0__.Tokens.fromStorage();\n        authState.clientId = clientId;\n        authState.oauthScope = scope;\n        authState.broadcastChannel = new BroadcastChannel(_constants_js__WEBPACK_IMPORTED_MODULE_1__.BROADCAST_CHANNEL_NAME);\n        // configure iframe url\n        _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__.iframeSettings.setQueryParam('client_id', clientId);\n        if (editorOrigin) {\n            _iframe_url_js__WEBPACK_IMPORTED_MODULE_2__.iframeSettings.editorOrigin = new URL(editorOrigin).origin;\n        }\n        loggedOutListeners.listen(() => authState.authComplete.reset());\n        // if authentication or logout are done in another page, we want to reflect the state on this page as well\n        authState.broadcastChannel.addEventListener('message', onChannelMessage);\n        async function onChannelMessage(event) {\n            const typedEvent = event.data;\n            if (typedEvent.type === 'auth-complete') {\n                authState.tokens = _tokens_js__WEBPACK_IMPORTED_MODULE_0__.Tokens.fromStorage();\n                // we ignore the possible error here because they can't have expired just yet\n                await authState.tokens.activate(onFailedTokenRefresh);\n                authState.authComplete.resolve();\n                return;\n            }\n            if (typedEvent.type === 'auth-failed') {\n                authFailedListeners.fireEvent(typedEvent);\n                return;\n            }\n            if (typedEvent.type === 'auth-logout') {\n                loggedOutListeners.fireEvent();\n                return;\n            }\n        }\n        if (authState.tokens) {\n            const tokens = authState.tokens;\n            if (tokens.origin === authState.editorOrigin) {\n                /**\n                 * Here we assume that the refresh token never expires which\n                 * might not be correct. If that is the case though, we will\n                 * emit a 'logged-out' event to signal that the user has been\n                 * logged out, which could also happen at a later time anyway.\n                 *\n                 * Because this flow is done entirely locally, we do not broadcast\n                 * anything to the other tabs. They should be performing a similar\n                 * check.\n                 */\n                (async () => {\n                    const success = await tokens.activate(onFailedTokenRefresh);\n                    if (!success) {\n                        // if we got new token in the meantime we discard this error\n                        if (authState.tokens !== tokens) {\n                            return;\n                        }\n                        loggedOutListeners.fireEvent();\n                        return;\n                    }\n                    authState.authComplete.resolve();\n                })();\n                return { status: 'authorized' };\n            }\n            (0,_tokens_js__WEBPACK_IMPORTED_MODULE_0__.clearTokensInStorage)();\n            authState.tokens = null;\n        }\n        const locationURL = new URL(window.location.href);\n        const { searchParams } = locationURL;\n        const updateURL = () => window.history.replaceState({}, document.title, locationURL);\n        // check for errors first, aka the user declined the authorisation or stackblitz did\n        if (searchParams.has(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR)) {\n            const error = searchParams.get(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR);\n            const description = searchParams.get(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR_DESCRIPTION);\n            searchParams.delete(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR);\n            searchParams.delete(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_ERROR_DESCRIPTION);\n            updateURL();\n            broadcastMessage({ type: 'auth-failed', error, description });\n            return { status: 'auth-failed', error, description };\n        }\n        // if there's an auth code\n        if (searchParams.has(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_AUTH_CODE)) {\n            const authCode = searchParams.get(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_AUTH_CODE);\n            const editorOrigin = authState.editorOrigin;\n            searchParams.delete(_constants_js__WEBPACK_IMPORTED_MODULE_1__.SEARCH_PARAM_AUTH_CODE);\n            updateURL();\n            const codeVerifier = localStorage.getItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_CODE_VERIFIER_NAME);\n            if (!codeVerifier) {\n                return { status: 'need-auth' };\n            }\n            localStorage.removeItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_CODE_VERIFIER_NAME);\n            _tokens_js__WEBPACK_IMPORTED_MODULE_0__.Tokens.fromAuthCode({\n                editorOrigin,\n                clientId: authState.clientId,\n                authCode,\n                codeVerifier,\n                redirectUri: defaultRedirectUri(),\n            })\n                .then(async (tokens) => {\n                authState.tokens = tokens;\n                assertAuthTokens(authState.tokens);\n                const success = await authState.tokens.activate(onFailedTokenRefresh);\n                // if authentication failed we throw, and we'll mark auth as failed\n                if (!success) {\n                    throw new Error();\n                }\n                authState.authComplete.resolve();\n                broadcastMessage({ type: 'auth-complete' });\n            })\n                .catch((error) => {\n                // this should never happen unless the rails app is now down for some reason?\n                console.error(error);\n                // treat it as a logged out event so that the user can retry to login\n                loggedOutListeners.fireEvent();\n                broadcastMessage({ type: 'auth-logout' });\n            });\n            return { status: 'authorized' };\n        }\n        return { status: 'need-auth' };\n    },\n    async startAuthFlow({ popup } = {}) {\n        if (!authState.initialized) {\n            throw new Error('auth.init must be called first');\n        }\n        if (popup) {\n            localStorage.setItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_POPUP_NAME, 'true');\n            const height = 500;\n            const width = 620;\n            const left = window.screenLeft + (window.outerWidth - width) / 2;\n            const top = window.screenTop + (window.outerHeight - height) / 2;\n            window.open(await generateOAuthRequest(), '_blank', `popup,width=${width},height=${height},left=${left},top=${top}`);\n        }\n        else {\n            window.location.href = await generateOAuthRequest();\n        }\n    },\n    async logout({ ignoreRevokeError } = {}) {\n        await authState.tokens?.revoke(authState.clientId, ignoreRevokeError ?? false);\n        loggedOutListeners.fireEvent();\n        broadcastMessage({ type: 'auth-logout' });\n    },\n    loggedIn() {\n        return authState.authComplete.promise;\n    },\n    on(event, listener) {\n        switch (event) {\n            case 'auth-failed': {\n                return authFailedListeners.listen(listener);\n            }\n            case 'logged-out': {\n                return loggedOutListeners.listen(listener);\n            }\n            default: {\n                throw new Error(`Unsupported event type '${event}'.`);\n            }\n        }\n    },\n};\nfunction onFailedTokenRefresh() {\n    loggedOutListeners.fireEvent();\n    broadcastMessage({ type: 'auth-logout' });\n}\nfunction defaultRedirectUri() {\n    return window.location.href;\n}\nasync function generateOAuthRequest() {\n    const codeVerifier = (0,_code_js__WEBPACK_IMPORTED_MODULE_3__.newCodeVerifier)();\n    localStorage.setItem(_constants_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE_CODE_VERIFIER_NAME, codeVerifier);\n    const codeChallenge = await (0,_code_js__WEBPACK_IMPORTED_MODULE_3__.S256)(codeVerifier);\n    const url = new URL('/oauth/authorize', authState.editorOrigin);\n    const { searchParams } = url;\n    searchParams.append('response_type', 'code');\n    searchParams.append('client_id', authState.clientId);\n    searchParams.append('redirect_uri', defaultRedirectUri());\n    searchParams.append('scope', authState.oauthScope);\n    searchParams.append('code_challenge', codeChallenge);\n    searchParams.append('code_challenge_method', 'S256');\n    return url.toString();\n}\n/**\n * @internal\n */\nfunction assertAuthTokens(tokens) {\n    if (!tokens) {\n        throw new Error('Oops! Tokens is not defined when it always should be.');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9hdXRoLXN0YXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUEyRDtBQUMwSDtBQUNwSTtBQUNDO0FBQ0s7QUFDRTtBQUN6RDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxrQkFBa0Isb0VBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwwREFBYztBQUM3QixLQUFLO0FBQ0w7QUFDQTtBQUNBLGdDQUFnQyxrRUFBZ0I7QUFDaEQsK0JBQStCLGtFQUFnQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNkRBQWtCO0FBQy9DLGdDQUFnQyw2REFBa0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDTztBQUNQLFdBQVcsK0JBQStCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsOENBQU07QUFDakM7QUFDQTtBQUNBLDBEQUEwRCxpRUFBc0I7QUFDaEY7QUFDQSxRQUFRLDBEQUFjO0FBQ3RCO0FBQ0EsWUFBWSwwREFBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw4Q0FBTTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLHlCQUF5QjtBQUN6QjtBQUNBLFlBQVksZ0VBQW9CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixlQUFlO0FBQy9CLDhEQUE4RDtBQUM5RDtBQUNBLDZCQUE2Qiw2REFBa0I7QUFDL0MsMkNBQTJDLDZEQUFrQjtBQUM3RCxpREFBaUQseUVBQThCO0FBQy9FLGdDQUFnQyw2REFBa0I7QUFDbEQsZ0NBQWdDLHlFQUE4QjtBQUM5RDtBQUNBLCtCQUErQix5Q0FBeUM7QUFDeEUscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSw2QkFBNkIsaUVBQXNCO0FBQ25ELDhDQUE4QyxpRUFBc0I7QUFDcEU7QUFDQSxnQ0FBZ0MsaUVBQXNCO0FBQ3REO0FBQ0Esc0RBQXNELHFFQUEwQjtBQUNoRjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLG9DQUFvQyxxRUFBMEI7QUFDOUQsWUFBWSw4Q0FBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx1QkFBdUI7QUFDMUQsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMscUJBQXFCO0FBQ3hELGFBQWE7QUFDYixxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMLDBCQUEwQixRQUFRLElBQUk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNkRBQWtCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLE1BQU0sVUFBVSxPQUFPLFFBQVEsS0FBSyxPQUFPLElBQUk7QUFDOUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsbUJBQW1CLG9CQUFvQixJQUFJO0FBQzNDO0FBQ0E7QUFDQSwyQkFBMkIscUJBQXFCO0FBQ2hELEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxNQUFNO0FBQ2pFO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHFCQUFxQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHlEQUFlO0FBQ3hDLHlCQUF5QixxRUFBMEI7QUFDbkQsZ0NBQWdDLDhDQUFJO0FBQ3BDO0FBQ0EsWUFBWSxlQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktYXBwLWJ1aWxkZXItd2ViLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW50ZXJuYWwvYXV0aC1zdGF0ZS5qcz9hNjFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRva2VucywgY2xlYXJUb2tlbnNJblN0b3JhZ2UgfSBmcm9tICcuL3Rva2Vucy5qcyc7XG5pbXBvcnQgeyBTRUFSQ0hfUEFSQU1fQVVUSF9DT0RFLCBTRUFSQ0hfUEFSQU1fRVJST1IsIFNUT1JBR0VfQ09ERV9WRVJJRklFUl9OQU1FLCBCUk9BRENBU1RfQ0hBTk5FTF9OQU1FLCBTVE9SQUdFX1BPUFVQX05BTUUsIFNFQVJDSF9QQVJBTV9FUlJPUl9ERVNDUklQVElPTiwgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBpZnJhbWVTZXR0aW5ncyB9IGZyb20gJy4vaWZyYW1lLXVybC5qcyc7XG5pbXBvcnQgeyBTMjU2LCBuZXdDb2RlVmVyaWZpZXIgfSBmcm9tICcuL2NvZGUuanMnO1xuaW1wb3J0IHsgcmVzZXR0YWJsZVByb21pc2UgfSBmcm9tICcuL3Jlc2V0LXByb21pc2UuanMnO1xuaW1wb3J0IHsgVHlwZWRFdmVudFRhcmdldCB9IGZyb20gJy4vVHlwZWRFdmVudFRhcmdldC5qcyc7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3QgYXV0aFN0YXRlID0ge1xuICAgIGluaXRpYWxpemVkOiBmYWxzZSxcbiAgICBib290Q2FsbGVkOiBmYWxzZSxcbiAgICBhdXRoQ29tcGxldGU6IHJlc2V0dGFibGVQcm9taXNlKCksXG4gICAgY2xpZW50SWQ6ICcnLFxuICAgIG9hdXRoU2NvcGU6ICcnLFxuICAgIGJyb2FkY2FzdENoYW5uZWw6IG51bGwsXG4gICAgZ2V0IGVkaXRvck9yaWdpbigpIHtcbiAgICAgICAgcmV0dXJuIGlmcmFtZVNldHRpbmdzLmVkaXRvck9yaWdpbjtcbiAgICB9LFxuICAgIHRva2VuczogbnVsbCxcbn07XG5jb25zdCBhdXRoRmFpbGVkTGlzdGVuZXJzID0gbmV3IFR5cGVkRXZlbnRUYXJnZXQoKTtcbmNvbnN0IGxvZ2dlZE91dExpc3RlbmVycyA9IG5ldyBUeXBlZEV2ZW50VGFyZ2V0KCk7XG5mdW5jdGlvbiBicm9hZGNhc3RNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBpZiAoIWF1dGhTdGF0ZS5icm9hZGNhc3RDaGFubmVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXV0aFN0YXRlLmJyb2FkY2FzdENoYW5uZWwucG9zdE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgLy8gY2hlY2sgaWYgd2UgYXJlIGluIGEgcG9wdXAgbW9kZVxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX1BPUFVQX05BTUUpID09PSAndHJ1ZScgJiYgbWVzc2FnZS50eXBlICE9PSAnYXV0aC1sb2dvdXQnKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfUE9QVVBfTkFNRSk7XG4gICAgICAgIC8vIHdhaXQgYSB0aWNrIHRvIG1ha2Ugc3VyZSB0aGUgcG9zdGVkIG1lc3NhZ2UgaGFzIGJlZW4gc2VudFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgYXV0aCA9IHtcbiAgICBpbml0KHsgZWRpdG9yT3JpZ2luLCBjbGllbnRJZCwgc2NvcGUgfSkge1xuICAgICAgICBpZiAoYXV0aFN0YXRlLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luaXQgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UnKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZW50ZXJwcmlzZSA9IHRydWU7XG4gICAgICAgIGlmIChlbnRlcnByaXNlICYmIGF1dGhTdGF0ZS5ib290Q2FsbGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BhdXRoLmluaXRgIHNob3VsZCBhbHdheXMgYmUgY2FsbGVkIGJlZm9yZSBgV2ViQ29udGFpbmVyLmJvb3RgJyk7XG4gICAgICAgIH1cbiAgICAgICAgYXV0aFN0YXRlLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgYXV0aFN0YXRlLnRva2VucyA9IFRva2Vucy5mcm9tU3RvcmFnZSgpO1xuICAgICAgICBhdXRoU3RhdGUuY2xpZW50SWQgPSBjbGllbnRJZDtcbiAgICAgICAgYXV0aFN0YXRlLm9hdXRoU2NvcGUgPSBzY29wZTtcbiAgICAgICAgYXV0aFN0YXRlLmJyb2FkY2FzdENoYW5uZWwgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbChCUk9BRENBU1RfQ0hBTk5FTF9OQU1FKTtcbiAgICAgICAgLy8gY29uZmlndXJlIGlmcmFtZSB1cmxcbiAgICAgICAgaWZyYW1lU2V0dGluZ3Muc2V0UXVlcnlQYXJhbSgnY2xpZW50X2lkJywgY2xpZW50SWQpO1xuICAgICAgICBpZiAoZWRpdG9yT3JpZ2luKSB7XG4gICAgICAgICAgICBpZnJhbWVTZXR0aW5ncy5lZGl0b3JPcmlnaW4gPSBuZXcgVVJMKGVkaXRvck9yaWdpbikub3JpZ2luO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlZE91dExpc3RlbmVycy5saXN0ZW4oKCkgPT4gYXV0aFN0YXRlLmF1dGhDb21wbGV0ZS5yZXNldCgpKTtcbiAgICAgICAgLy8gaWYgYXV0aGVudGljYXRpb24gb3IgbG9nb3V0IGFyZSBkb25lIGluIGFub3RoZXIgcGFnZSwgd2Ugd2FudCB0byByZWZsZWN0IHRoZSBzdGF0ZSBvbiB0aGlzIHBhZ2UgYXMgd2VsbFxuICAgICAgICBhdXRoU3RhdGUuYnJvYWRjYXN0Q2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25DaGFubmVsTWVzc2FnZSk7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIG9uQ2hhbm5lbE1lc3NhZ2UoZXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVkRXZlbnQgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgaWYgKHR5cGVkRXZlbnQudHlwZSA9PT0gJ2F1dGgtY29tcGxldGUnKSB7XG4gICAgICAgICAgICAgICAgYXV0aFN0YXRlLnRva2VucyA9IFRva2Vucy5mcm9tU3RvcmFnZSgpO1xuICAgICAgICAgICAgICAgIC8vIHdlIGlnbm9yZSB0aGUgcG9zc2libGUgZXJyb3IgaGVyZSBiZWNhdXNlIHRoZXkgY2FuJ3QgaGF2ZSBleHBpcmVkIGp1c3QgeWV0XG4gICAgICAgICAgICAgICAgYXdhaXQgYXV0aFN0YXRlLnRva2Vucy5hY3RpdmF0ZShvbkZhaWxlZFRva2VuUmVmcmVzaCk7XG4gICAgICAgICAgICAgICAgYXV0aFN0YXRlLmF1dGhDb21wbGV0ZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVkRXZlbnQudHlwZSA9PT0gJ2F1dGgtZmFpbGVkJykge1xuICAgICAgICAgICAgICAgIGF1dGhGYWlsZWRMaXN0ZW5lcnMuZmlyZUV2ZW50KHR5cGVkRXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlZEV2ZW50LnR5cGUgPT09ICdhdXRoLWxvZ291dCcpIHtcbiAgICAgICAgICAgICAgICBsb2dnZWRPdXRMaXN0ZW5lcnMuZmlyZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhdXRoU3RhdGUudG9rZW5zKSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbnMgPSBhdXRoU3RhdGUudG9rZW5zO1xuICAgICAgICAgICAgaWYgKHRva2Vucy5vcmlnaW4gPT09IGF1dGhTdGF0ZS5lZGl0b3JPcmlnaW4pIHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBIZXJlIHdlIGFzc3VtZSB0aGF0IHRoZSByZWZyZXNoIHRva2VuIG5ldmVyIGV4cGlyZXMgd2hpY2hcbiAgICAgICAgICAgICAgICAgKiBtaWdodCBub3QgYmUgY29ycmVjdC4gSWYgdGhhdCBpcyB0aGUgY2FzZSB0aG91Z2gsIHdlIHdpbGxcbiAgICAgICAgICAgICAgICAgKiBlbWl0IGEgJ2xvZ2dlZC1vdXQnIGV2ZW50IHRvIHNpZ25hbCB0aGF0IHRoZSB1c2VyIGhhcyBiZWVuXG4gICAgICAgICAgICAgICAgICogbG9nZ2VkIG91dCwgd2hpY2ggY291bGQgYWxzbyBoYXBwZW4gYXQgYSBsYXRlciB0aW1lIGFueXdheS5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEJlY2F1c2UgdGhpcyBmbG93IGlzIGRvbmUgZW50aXJlbHkgbG9jYWxseSwgd2UgZG8gbm90IGJyb2FkY2FzdFxuICAgICAgICAgICAgICAgICAqIGFueXRoaW5nIHRvIHRoZSBvdGhlciB0YWJzLiBUaGV5IHNob3VsZCBiZSBwZXJmb3JtaW5nIGEgc2ltaWxhclxuICAgICAgICAgICAgICAgICAqIGNoZWNrLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0b2tlbnMuYWN0aXZhdGUob25GYWlsZWRUb2tlblJlZnJlc2gpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGdvdCBuZXcgdG9rZW4gaW4gdGhlIG1lYW50aW1lIHdlIGRpc2NhcmQgdGhpcyBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGhTdGF0ZS50b2tlbnMgIT09IHRva2Vucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlZE91dExpc3RlbmVycy5maXJlRXZlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhdXRoU3RhdGUuYXV0aENvbXBsZXRlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogJ2F1dGhvcml6ZWQnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhclRva2Vuc0luU3RvcmFnZSgpO1xuICAgICAgICAgICAgYXV0aFN0YXRlLnRva2VucyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYXRpb25VUkwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IGxvY2F0aW9uVVJMO1xuICAgICAgICBjb25zdCB1cGRhdGVVUkwgPSAoKSA9PiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIGRvY3VtZW50LnRpdGxlLCBsb2NhdGlvblVSTCk7XG4gICAgICAgIC8vIGNoZWNrIGZvciBlcnJvcnMgZmlyc3QsIGFrYSB0aGUgdXNlciBkZWNsaW5lZCB0aGUgYXV0aG9yaXNhdGlvbiBvciBzdGFja2JsaXR6IGRpZFxuICAgICAgICBpZiAoc2VhcmNoUGFyYW1zLmhhcyhTRUFSQ0hfUEFSQU1fRVJST1IpKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IHNlYXJjaFBhcmFtcy5nZXQoU0VBUkNIX1BBUkFNX0VSUk9SKTtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gc2VhcmNoUGFyYW1zLmdldChTRUFSQ0hfUEFSQU1fRVJST1JfREVTQ1JJUFRJT04pO1xuICAgICAgICAgICAgc2VhcmNoUGFyYW1zLmRlbGV0ZShTRUFSQ0hfUEFSQU1fRVJST1IpO1xuICAgICAgICAgICAgc2VhcmNoUGFyYW1zLmRlbGV0ZShTRUFSQ0hfUEFSQU1fRVJST1JfREVTQ1JJUFRJT04pO1xuICAgICAgICAgICAgdXBkYXRlVVJMKCk7XG4gICAgICAgICAgICBicm9hZGNhc3RNZXNzYWdlKHsgdHlwZTogJ2F1dGgtZmFpbGVkJywgZXJyb3IsIGRlc2NyaXB0aW9uIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnYXV0aC1mYWlsZWQnLCBlcnJvciwgZGVzY3JpcHRpb24gfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB0aGVyZSdzIGFuIGF1dGggY29kZVxuICAgICAgICBpZiAoc2VhcmNoUGFyYW1zLmhhcyhTRUFSQ0hfUEFSQU1fQVVUSF9DT0RFKSkge1xuICAgICAgICAgICAgY29uc3QgYXV0aENvZGUgPSBzZWFyY2hQYXJhbXMuZ2V0KFNFQVJDSF9QQVJBTV9BVVRIX0NPREUpO1xuICAgICAgICAgICAgY29uc3QgZWRpdG9yT3JpZ2luID0gYXV0aFN0YXRlLmVkaXRvck9yaWdpbjtcbiAgICAgICAgICAgIHNlYXJjaFBhcmFtcy5kZWxldGUoU0VBUkNIX1BBUkFNX0FVVEhfQ09ERSk7XG4gICAgICAgICAgICB1cGRhdGVVUkwoKTtcbiAgICAgICAgICAgIGNvbnN0IGNvZGVWZXJpZmllciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfQ09ERV9WRVJJRklFUl9OQU1FKTtcbiAgICAgICAgICAgIGlmICghY29kZVZlcmlmaWVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnbmVlZC1hdXRoJyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9DT0RFX1ZFUklGSUVSX05BTUUpO1xuICAgICAgICAgICAgVG9rZW5zLmZyb21BdXRoQ29kZSh7XG4gICAgICAgICAgICAgICAgZWRpdG9yT3JpZ2luLFxuICAgICAgICAgICAgICAgIGNsaWVudElkOiBhdXRoU3RhdGUuY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgYXV0aENvZGUsXG4gICAgICAgICAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICAgICAgICAgIHJlZGlyZWN0VXJpOiBkZWZhdWx0UmVkaXJlY3RVcmkoKSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgKHRva2VucykgPT4ge1xuICAgICAgICAgICAgICAgIGF1dGhTdGF0ZS50b2tlbnMgPSB0b2tlbnM7XG4gICAgICAgICAgICAgICAgYXNzZXJ0QXV0aFRva2VucyhhdXRoU3RhdGUudG9rZW5zKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgYXV0aFN0YXRlLnRva2Vucy5hY3RpdmF0ZShvbkZhaWxlZFRva2VuUmVmcmVzaCk7XG4gICAgICAgICAgICAgICAgLy8gaWYgYXV0aGVudGljYXRpb24gZmFpbGVkIHdlIHRocm93LCBhbmQgd2UnbGwgbWFyayBhdXRoIGFzIGZhaWxlZFxuICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXV0aFN0YXRlLmF1dGhDb21wbGV0ZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgYnJvYWRjYXN0TWVzc2FnZSh7IHR5cGU6ICdhdXRoLWNvbXBsZXRlJyB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbiB1bmxlc3MgdGhlIHJhaWxzIGFwcCBpcyBub3cgZG93biBmb3Igc29tZSByZWFzb24/XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgLy8gdHJlYXQgaXQgYXMgYSBsb2dnZWQgb3V0IGV2ZW50IHNvIHRoYXQgdGhlIHVzZXIgY2FuIHJldHJ5IHRvIGxvZ2luXG4gICAgICAgICAgICAgICAgbG9nZ2VkT3V0TGlzdGVuZXJzLmZpcmVFdmVudCgpO1xuICAgICAgICAgICAgICAgIGJyb2FkY2FzdE1lc3NhZ2UoeyB0eXBlOiAnYXV0aC1sb2dvdXQnIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6ICdhdXRob3JpemVkJyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogJ25lZWQtYXV0aCcgfTtcbiAgICB9LFxuICAgIGFzeW5jIHN0YXJ0QXV0aEZsb3coeyBwb3B1cCB9ID0ge30pIHtcbiAgICAgICAgaWYgKCFhdXRoU3RhdGUuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYXV0aC5pbml0IG11c3QgYmUgY2FsbGVkIGZpcnN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvcHVwKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX1BPUFVQX05BTUUsICd0cnVlJyk7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSA1MDA7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IDYyMDtcbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSB3aW5kb3cuc2NyZWVuTGVmdCArICh3aW5kb3cub3V0ZXJXaWR0aCAtIHdpZHRoKSAvIDI7XG4gICAgICAgICAgICBjb25zdCB0b3AgPSB3aW5kb3cuc2NyZWVuVG9wICsgKHdpbmRvdy5vdXRlckhlaWdodCAtIGhlaWdodCkgLyAyO1xuICAgICAgICAgICAgd2luZG93Lm9wZW4oYXdhaXQgZ2VuZXJhdGVPQXV0aFJlcXVlc3QoKSwgJ19ibGFuaycsIGBwb3B1cCx3aWR0aD0ke3dpZHRofSxoZWlnaHQ9JHtoZWlnaHR9LGxlZnQ9JHtsZWZ0fSx0b3A9JHt0b3B9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGF3YWl0IGdlbmVyYXRlT0F1dGhSZXF1ZXN0KCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIGxvZ291dCh7IGlnbm9yZVJldm9rZUVycm9yIH0gPSB7fSkge1xuICAgICAgICBhd2FpdCBhdXRoU3RhdGUudG9rZW5zPy5yZXZva2UoYXV0aFN0YXRlLmNsaWVudElkLCBpZ25vcmVSZXZva2VFcnJvciA/PyBmYWxzZSk7XG4gICAgICAgIGxvZ2dlZE91dExpc3RlbmVycy5maXJlRXZlbnQoKTtcbiAgICAgICAgYnJvYWRjYXN0TWVzc2FnZSh7IHR5cGU6ICdhdXRoLWxvZ291dCcgfSk7XG4gICAgfSxcbiAgICBsb2dnZWRJbigpIHtcbiAgICAgICAgcmV0dXJuIGF1dGhTdGF0ZS5hdXRoQ29tcGxldGUucHJvbWlzZTtcbiAgICB9LFxuICAgIG9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50KSB7XG4gICAgICAgICAgICBjYXNlICdhdXRoLWZhaWxlZCc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXV0aEZhaWxlZExpc3RlbmVycy5saXN0ZW4obGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnbG9nZ2VkLW91dCc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VkT3V0TGlzdGVuZXJzLmxpc3RlbihsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBldmVudCB0eXBlICcke2V2ZW50fScuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxufTtcbmZ1bmN0aW9uIG9uRmFpbGVkVG9rZW5SZWZyZXNoKCkge1xuICAgIGxvZ2dlZE91dExpc3RlbmVycy5maXJlRXZlbnQoKTtcbiAgICBicm9hZGNhc3RNZXNzYWdlKHsgdHlwZTogJ2F1dGgtbG9nb3V0JyB9KTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRSZWRpcmVjdFVyaSgpIHtcbiAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWY7XG59XG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZU9BdXRoUmVxdWVzdCgpIHtcbiAgICBjb25zdCBjb2RlVmVyaWZpZXIgPSBuZXdDb2RlVmVyaWZpZXIoKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0NPREVfVkVSSUZJRVJfTkFNRSwgY29kZVZlcmlmaWVyKTtcbiAgICBjb25zdCBjb2RlQ2hhbGxlbmdlID0gYXdhaXQgUzI1Nihjb2RlVmVyaWZpZXIpO1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJy9vYXV0aC9hdXRob3JpemUnLCBhdXRoU3RhdGUuZWRpdG9yT3JpZ2luKTtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gdXJsO1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ3Jlc3BvbnNlX3R5cGUnLCAnY29kZScpO1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ2NsaWVudF9pZCcsIGF1dGhTdGF0ZS5jbGllbnRJZCk7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZCgncmVkaXJlY3RfdXJpJywgZGVmYXVsdFJlZGlyZWN0VXJpKCkpO1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ3Njb3BlJywgYXV0aFN0YXRlLm9hdXRoU2NvcGUpO1xuICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoJ2NvZGVfY2hhbGxlbmdlJywgY29kZUNoYWxsZW5nZSk7XG4gICAgc2VhcmNoUGFyYW1zLmFwcGVuZCgnY29kZV9jaGFsbGVuZ2VfbWV0aG9kJywgJ1MyNTYnKTtcbiAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0QXV0aFRva2Vucyh0b2tlbnMpIHtcbiAgICBpZiAoIXRva2Vucykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09vcHMhIFRva2VucyBpcyBub3QgZGVmaW5lZCB3aGVuIGl0IGFsd2F5cyBzaG91bGQgYmUuJyk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/auth-state.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/code.js":
/*!**************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/code.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   S256: () => (/* binding */ S256),\n/* harmony export */   newCodeVerifier: () => (/* binding */ newCodeVerifier)\n/* harmony export */ });\n/**\n * Implementation of https://www.rfc-editor.org/rfc/rfc7636#section-4.2 that can\n * run in the browser.\n *\n * @internal\n *\n * @param input Code verifier.\n */\nasync function S256(input) {\n    // input here is assumed to match https://www.rfc-editor.org/rfc/rfc3986#section-2.3\n    const ascii = new TextEncoder().encode(input);\n    const sha256 = new Uint8Array(await crypto.subtle.digest('SHA-256', ascii));\n    // base64url encode, based on https://developer.mozilla.org/en-US/docs/Glossary/Base64#the_unicode_problem\n    return btoa(sha256.reduce((binary, byte) => binary + String.fromCodePoint(byte), ''))\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/=+$/, '');\n}\n/**\n * Implementation of https://www.rfc-editor.org/rfc/rfc7636#section-4.1 with\n * a slight deviation:\n *\n *  - We use 128 characters (it's expected to be between 43 and 128)\n *  - We use 64 characters instead of 66\n *\n * So the entropy is lower given the space size is 64^128 instead of 66^128.\n * It still satisfies the entropy constraint given that 64^128 > 66^43.\n *\n * @internal\n */\nfunction newCodeVerifier() {\n    const random = new Uint8Array(96);\n    crypto.getRandomValues(random);\n    let codeVerifier = '';\n    for (let i = 0; i < 32; ++i) {\n        codeVerifier += nextFourChars(random[3 * i + 0], random[3 * i + 1], random[3 * i + 2]);\n    }\n    return codeVerifier;\n}\nfunction nextFourChars(byte1, byte2, byte3) {\n    const char1 = byte1 >> 2;\n    const char2 = ((byte1 & 3) << 4) | (byte2 >> 4);\n    const char3 = (byte2 & 15) | ((byte3 & 192) >> 2);\n    const char4 = byte3 & 63;\n    return [char1, char2, char3, char4].map(unreservedCharacters).join('');\n}\nfunction unreservedCharacters(code) {\n    let offset;\n    if (code < 26) {\n        offset = code + 65; // [A-Z]\n    }\n    else if (code < 52) {\n        offset = code - 26 + 97; // [a-z]\n    }\n    else if (code < 62) {\n        offset = code - 52 + 48; // [0-9]\n    }\n    else {\n        offset = code === 62 ? 30 /* _ */ : 45 /* - */;\n    }\n    return String.fromCharCode(offset);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9jb2RlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1hcHAtYnVpbGRlci13ZWIvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9jb2RlLmpzPzMwOTIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNzYzNiNzZWN0aW9uLTQuMiB0aGF0IGNhblxuICogcnVuIGluIHRoZSBicm93c2VyLlxuICpcbiAqIEBpbnRlcm5hbFxuICpcbiAqIEBwYXJhbSBpbnB1dCBDb2RlIHZlcmlmaWVyLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUzI1NihpbnB1dCkge1xuICAgIC8vIGlucHV0IGhlcmUgaXMgYXNzdW1lZCB0byBtYXRjaCBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjMzk4NiNzZWN0aW9uLTIuM1xuICAgIGNvbnN0IGFzY2lpID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGlucHV0KTtcbiAgICBjb25zdCBzaGEyNTYgPSBuZXcgVWludDhBcnJheShhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGFzY2lpKSk7XG4gICAgLy8gYmFzZTY0dXJsIGVuY29kZSwgYmFzZWQgb24gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9HbG9zc2FyeS9CYXNlNjQjdGhlX3VuaWNvZGVfcHJvYmxlbVxuICAgIHJldHVybiBidG9hKHNoYTI1Ni5yZWR1Y2UoKGJpbmFyeSwgYnl0ZSkgPT4gYmluYXJ5ICsgU3RyaW5nLmZyb21Db2RlUG9pbnQoYnl0ZSksICcnKSlcbiAgICAgICAgLnJlcGxhY2UoL1xcKy9nLCAnLScpXG4gICAgICAgIC5yZXBsYWNlKC9cXC8vZywgJ18nKVxuICAgICAgICAucmVwbGFjZSgvPSskLywgJycpO1xufVxuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNzYzNiNzZWN0aW9uLTQuMSB3aXRoXG4gKiBhIHNsaWdodCBkZXZpYXRpb246XG4gKlxuICogIC0gV2UgdXNlIDEyOCBjaGFyYWN0ZXJzIChpdCdzIGV4cGVjdGVkIHRvIGJlIGJldHdlZW4gNDMgYW5kIDEyOClcbiAqICAtIFdlIHVzZSA2NCBjaGFyYWN0ZXJzIGluc3RlYWQgb2YgNjZcbiAqXG4gKiBTbyB0aGUgZW50cm9weSBpcyBsb3dlciBnaXZlbiB0aGUgc3BhY2Ugc2l6ZSBpcyA2NF4xMjggaW5zdGVhZCBvZiA2Nl4xMjguXG4gKiBJdCBzdGlsbCBzYXRpc2ZpZXMgdGhlIGVudHJvcHkgY29uc3RyYWludCBnaXZlbiB0aGF0IDY0XjEyOCA+IDY2XjQzLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gbmV3Q29kZVZlcmlmaWVyKCkge1xuICAgIGNvbnN0IHJhbmRvbSA9IG5ldyBVaW50OEFycmF5KDk2KTtcbiAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHJhbmRvbSk7XG4gICAgbGV0IGNvZGVWZXJpZmllciA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzI7ICsraSkge1xuICAgICAgICBjb2RlVmVyaWZpZXIgKz0gbmV4dEZvdXJDaGFycyhyYW5kb21bMyAqIGkgKyAwXSwgcmFuZG9tWzMgKiBpICsgMV0sIHJhbmRvbVszICogaSArIDJdKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvZGVWZXJpZmllcjtcbn1cbmZ1bmN0aW9uIG5leHRGb3VyQ2hhcnMoYnl0ZTEsIGJ5dGUyLCBieXRlMykge1xuICAgIGNvbnN0IGNoYXIxID0gYnl0ZTEgPj4gMjtcbiAgICBjb25zdCBjaGFyMiA9ICgoYnl0ZTEgJiAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcbiAgICBjb25zdCBjaGFyMyA9IChieXRlMiAmIDE1KSB8ICgoYnl0ZTMgJiAxOTIpID4+IDIpO1xuICAgIGNvbnN0IGNoYXI0ID0gYnl0ZTMgJiA2MztcbiAgICByZXR1cm4gW2NoYXIxLCBjaGFyMiwgY2hhcjMsIGNoYXI0XS5tYXAodW5yZXNlcnZlZENoYXJhY3RlcnMpLmpvaW4oJycpO1xufVxuZnVuY3Rpb24gdW5yZXNlcnZlZENoYXJhY3RlcnMoY29kZSkge1xuICAgIGxldCBvZmZzZXQ7XG4gICAgaWYgKGNvZGUgPCAyNikge1xuICAgICAgICBvZmZzZXQgPSBjb2RlICsgNjU7IC8vIFtBLVpdXG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGUgPCA1Mikge1xuICAgICAgICBvZmZzZXQgPSBjb2RlIC0gMjYgKyA5NzsgLy8gW2Etel1cbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZSA8IDYyKSB7XG4gICAgICAgIG9mZnNldCA9IGNvZGUgLSA1MiArIDQ4OyAvLyBbMC05XVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgb2Zmc2V0ID0gY29kZSA9PT0gNjIgPyAzMCAvKiBfICovIDogNDUgLyogLSAqLztcbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUob2Zmc2V0KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/code.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/constants.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BROADCAST_CHANNEL_NAME: () => (/* binding */ BROADCAST_CHANNEL_NAME),\n/* harmony export */   DEFAULT_EDITOR_ORIGIN: () => (/* binding */ DEFAULT_EDITOR_ORIGIN),\n/* harmony export */   SEARCH_PARAM_AUTH_CODE: () => (/* binding */ SEARCH_PARAM_AUTH_CODE),\n/* harmony export */   SEARCH_PARAM_ERROR: () => (/* binding */ SEARCH_PARAM_ERROR),\n/* harmony export */   SEARCH_PARAM_ERROR_DESCRIPTION: () => (/* binding */ SEARCH_PARAM_ERROR_DESCRIPTION),\n/* harmony export */   STORAGE_CODE_VERIFIER_NAME: () => (/* binding */ STORAGE_CODE_VERIFIER_NAME),\n/* harmony export */   STORAGE_POPUP_NAME: () => (/* binding */ STORAGE_POPUP_NAME),\n/* harmony export */   STORAGE_TOKENS_NAME: () => (/* binding */ STORAGE_TOKENS_NAME)\n/* harmony export */ });\nconst DEFAULT_EDITOR_ORIGIN = 'https://stackblitz.com';\nconst SEARCH_PARAM_AUTH_CODE = 'code';\nconst SEARCH_PARAM_ERROR = 'error';\nconst SEARCH_PARAM_ERROR_DESCRIPTION = 'error_description';\nconst BROADCAST_CHANNEL_NAME = '__wc_api_bc__';\nconst STORAGE_TOKENS_NAME = '__wc_api_tokens__';\nconst STORAGE_CODE_VERIFIER_NAME = '__wc_api_verifier__';\nconst STORAGE_POPUP_NAME = '__wc_api_popup__';\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9jb25zdGFudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktYXBwLWJ1aWxkZXItd2ViLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvaW50ZXJuYWwvY29uc3RhbnRzLmpzP2UzNmQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IERFRkFVTFRfRURJVE9SX09SSUdJTiA9ICdodHRwczovL3N0YWNrYmxpdHouY29tJztcbmV4cG9ydCBjb25zdCBTRUFSQ0hfUEFSQU1fQVVUSF9DT0RFID0gJ2NvZGUnO1xuZXhwb3J0IGNvbnN0IFNFQVJDSF9QQVJBTV9FUlJPUiA9ICdlcnJvcic7XG5leHBvcnQgY29uc3QgU0VBUkNIX1BBUkFNX0VSUk9SX0RFU0NSSVBUSU9OID0gJ2Vycm9yX2Rlc2NyaXB0aW9uJztcbmV4cG9ydCBjb25zdCBCUk9BRENBU1RfQ0hBTk5FTF9OQU1FID0gJ19fd2NfYXBpX2JjX18nO1xuZXhwb3J0IGNvbnN0IFNUT1JBR0VfVE9LRU5TX05BTUUgPSAnX193Y19hcGlfdG9rZW5zX18nO1xuZXhwb3J0IGNvbnN0IFNUT1JBR0VfQ09ERV9WRVJJRklFUl9OQU1FID0gJ19fd2NfYXBpX3ZlcmlmaWVyX18nO1xuZXhwb3J0IGNvbnN0IFNUT1JBR0VfUE9QVVBfTkFNRSA9ICdfX3djX2FwaV9wb3B1cF9fJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js":
/*!********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/iframe-url.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   iframeSettings: () => (/* binding */ iframeSettings)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\");\n\nconst params = {};\nlet editorOrigin = null;\nconst iframeSettings = {\n    get editorOrigin() {\n        if (editorOrigin == null) {\n            editorOrigin = new URL(globalThis.WEBCONTAINER_API_IFRAME_URL ?? _constants_js__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_EDITOR_ORIGIN).origin;\n        }\n        return editorOrigin;\n    },\n    set editorOrigin(newOrigin) {\n        editorOrigin = new URL(newOrigin).origin;\n    },\n    setQueryParam(key, value) {\n        params[key] = value;\n    },\n    get url() {\n        const url = new URL(this.editorOrigin);\n        url.pathname = '/headless';\n        for (const param in params) {\n            url.searchParams.set(param, params[param]);\n        }\n        url.searchParams.set('version', \"1.6.1\");\n        return url;\n    },\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9pZnJhbWUtdXJsLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVEO0FBQ3ZEO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSw2RUFBNkUsZ0VBQXFCO0FBQ2xHO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1hcHAtYnVpbGRlci13ZWIvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9pZnJhbWUtdXJsLmpzP2Y3MWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgREVGQVVMVF9FRElUT1JfT1JJR0lOIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuY29uc3QgcGFyYW1zID0ge307XG5sZXQgZWRpdG9yT3JpZ2luID0gbnVsbDtcbmV4cG9ydCBjb25zdCBpZnJhbWVTZXR0aW5ncyA9IHtcbiAgICBnZXQgZWRpdG9yT3JpZ2luKCkge1xuICAgICAgICBpZiAoZWRpdG9yT3JpZ2luID09IG51bGwpIHtcbiAgICAgICAgICAgIGVkaXRvck9yaWdpbiA9IG5ldyBVUkwoZ2xvYmFsVGhpcy5XRUJDT05UQUlORVJfQVBJX0lGUkFNRV9VUkwgPz8gREVGQVVMVF9FRElUT1JfT1JJR0lOKS5vcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVkaXRvck9yaWdpbjtcbiAgICB9LFxuICAgIHNldCBlZGl0b3JPcmlnaW4obmV3T3JpZ2luKSB7XG4gICAgICAgIGVkaXRvck9yaWdpbiA9IG5ldyBVUkwobmV3T3JpZ2luKS5vcmlnaW47XG4gICAgfSxcbiAgICBzZXRRdWVyeVBhcmFtKGtleSwgdmFsdWUpIHtcbiAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcbiAgICB9LFxuICAgIGdldCB1cmwoKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodGhpcy5lZGl0b3JPcmlnaW4pO1xuICAgICAgICB1cmwucGF0aG5hbWUgPSAnL2hlYWRsZXNzJztcbiAgICAgICAgZm9yIChjb25zdCBwYXJhbSBpbiBwYXJhbXMpIHtcbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KHBhcmFtLCBwYXJhbXNbcGFyYW1dKTtcbiAgICAgICAgfVxuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgndmVyc2lvbicsIFwiMS42LjFcIik7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfSxcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/iframe-url.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/reset-promise.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/reset-promise.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resettablePromise: () => (/* binding */ resettablePromise)\n/* harmony export */ });\n/**\n * @internal\n */\nfunction resettablePromise() {\n    let resolve;\n    let promise;\n    function reset() {\n        promise = new Promise((_resolve) => (resolve = _resolve));\n    }\n    reset();\n    return {\n        get promise() {\n            return promise;\n        },\n        resolve(value) {\n            return resolve(value);\n        },\n        reset,\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC9yZXNldC1wcm9taXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWFwcC1idWlsZGVyLXdlYi8uL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L2ludGVybmFsL3Jlc2V0LXByb21pc2UuanM/Y2YwYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXR0YWJsZVByb21pc2UoKSB7XG4gICAgbGV0IHJlc29sdmU7XG4gICAgbGV0IHByb21pc2U7XG4gICAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgIHByb21pc2UgPSBuZXcgUHJvbWlzZSgoX3Jlc29sdmUpID0+IChyZXNvbHZlID0gX3Jlc29sdmUpKTtcbiAgICB9XG4gICAgcmVzZXQoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQgcHJvbWlzZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9LFxuICAgICAgICByZXNvbHZlKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc2V0LFxuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/reset-promise.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js":
/*!****************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/internal/tokens.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Tokens: () => (/* binding */ Tokens),\n/* harmony export */   addAccessTokenChangedListener: () => (/* binding */ addAccessTokenChangedListener),\n/* harmony export */   clearTokensInStorage: () => (/* binding */ clearTokensInStorage)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/constants.js\");\n/* harmony import */ var _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TypedEventTarget.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/internal/TypedEventTarget.js\");\n\n\nconst IGNORED_ERROR = new Error();\nIGNORED_ERROR.stack = '';\nconst accessTokenChangedListeners = new _TypedEventTarget_js__WEBPACK_IMPORTED_MODULE_1__.TypedEventTarget();\n/**\n * @internal\n */\nclass Tokens {\n    origin;\n    refresh;\n    access;\n    expires;\n    _revoked = new AbortController();\n    constructor(\n    // editor origin that those tokens are bound to, mostly used for development\n    origin, \n    // token to use to get a new access token\n    refresh, \n    // token to provide to webcontainer\n    access, \n    // time in UTC when the token expires\n    expires) {\n        this.origin = origin;\n        this.refresh = refresh;\n        this.access = access;\n        this.expires = expires;\n    }\n    async activate(onFailedRefresh) {\n        if (this._revoked.signal.aborted) {\n            throw new Error('Token revoked');\n        }\n        // if the access token expired we fetch a new one\n        if (this.expires < Date.now()) {\n            if (!(await this._fetchNewAccessToken())) {\n                return false;\n            }\n        }\n        this._sync();\n        this._startRefreshTokensLoop(onFailedRefresh);\n        return true;\n    }\n    async revoke(clientId, ignoreRevokeError) {\n        this._revoked.abort();\n        try {\n            const response = await fetch(`${this.origin}/oauth/revoke`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                body: new URLSearchParams({ token: this.refresh, token_type_hint: 'refresh_token', client_id: clientId }),\n                mode: 'cors',\n            });\n            if (!response.ok) {\n                throw new Error(`Failed to logout`);\n            }\n        }\n        catch (error) {\n            if (!ignoreRevokeError) {\n                throw error;\n            }\n        }\n        clearTokensInStorage();\n    }\n    static fromStorage() {\n        const savedTokens = readTokensFromStorage();\n        if (!savedTokens) {\n            return null;\n        }\n        return new Tokens(savedTokens.origin, savedTokens.refresh, savedTokens.access, savedTokens.expires);\n    }\n    static async fromAuthCode({ editorOrigin, clientId, codeVerifier, authCode, redirectUri, }) {\n        const response = await fetch(`${editorOrigin}/oauth/token`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            body: new URLSearchParams({\n                client_id: clientId,\n                code: authCode,\n                code_verifier: codeVerifier,\n                grant_type: 'authorization_code',\n                redirect_uri: redirectUri,\n            }),\n            mode: 'cors',\n        });\n        if (!response.ok) {\n            throw new Error(`Failed to fetch token: ${response.status}`);\n        }\n        const tokenResponse = await response.json();\n        assertTokenResponse(tokenResponse);\n        const { access_token: access, refresh_token: refresh } = tokenResponse;\n        const expires = getExpiresFromTokenResponse(tokenResponse);\n        return new Tokens(editorOrigin, refresh, access, expires);\n    }\n    async _fetchNewAccessToken() {\n        try {\n            const response = await fetch(`${this.origin}/oauth/token`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                body: new URLSearchParams({\n                    grant_type: 'refresh_token',\n                    refresh_token: this.refresh,\n                }),\n                mode: 'cors',\n                signal: this._revoked.signal,\n            });\n            if (!response.ok) {\n                throw IGNORED_ERROR;\n            }\n            const tokenResponse = await response.json();\n            assertTokenResponse(tokenResponse);\n            const { access_token: access, refresh_token: refresh } = tokenResponse;\n            const expires = getExpiresFromTokenResponse(tokenResponse);\n            this.access = access;\n            this.expires = expires;\n            this.refresh = refresh;\n            return true;\n        }\n        catch {\n            clearTokensInStorage();\n            return false;\n        }\n    }\n    _sync() {\n        persistTokensInStorage(this);\n        fireAccessTokenChanged(this.access);\n    }\n    async _startRefreshTokensLoop(onFailedRefresh) {\n        while (true) {\n            const expiresIn = this.expires - Date.now() - 1000;\n            await wait(Math.max(expiresIn, 1000));\n            if (this._revoked.signal.aborted) {\n                return;\n            }\n            if (!this._fetchNewAccessToken()) {\n                onFailedRefresh();\n                return;\n            }\n            this._sync();\n        }\n    }\n}\n/**\n * @internal\n */\nfunction clearTokensInStorage() {\n    localStorage.removeItem(_constants_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE_TOKENS_NAME);\n}\n/**\n * @internal\n */\nfunction addAccessTokenChangedListener(listener) {\n    return accessTokenChangedListeners.listen(listener);\n}\nfunction readTokensFromStorage() {\n    const serializedTokens = localStorage.getItem(_constants_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE_TOKENS_NAME);\n    if (!serializedTokens) {\n        return null;\n    }\n    try {\n        return JSON.parse(serializedTokens);\n    }\n    catch {\n        return null;\n    }\n}\nfunction persistTokensInStorage(tokens) {\n    localStorage.setItem(_constants_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE_TOKENS_NAME, JSON.stringify(tokens));\n}\nfunction getExpiresFromTokenResponse({ created_at, expires_in }) {\n    return (created_at + expires_in) * 1000;\n}\nfunction assertTokenResponse(token) {\n    if (typeof token !== 'object' || !token) {\n        throw new Error('Invalid Token Response');\n    }\n    if (typeof token.access_token !== 'string' ||\n        typeof token.refresh_token !== 'string' ||\n        typeof token.created_at !== 'number' ||\n        typeof token.expires_in !== 'number') {\n        throw new Error('Invalid Token Response');\n    }\n}\nfunction wait(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n}\nfunction fireAccessTokenChanged(accessToken) {\n    accessTokenChangedListeners.fireEvent(accessToken);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC90b2tlbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUQ7QUFDSTtBQUN6RDtBQUNBO0FBQ0Esd0NBQXdDLGtFQUFnQjtBQUN4RDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxZQUFZO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQiw0Q0FBNEMsNEVBQTRFO0FBQ3hIO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw4REFBOEQ7QUFDOUYsd0NBQXdDLGFBQWE7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBLHNEQUFzRCxnQkFBZ0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtDQUErQztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFlBQVk7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0NBQStDO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsNEJBQTRCLDhEQUFtQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDhEQUFtQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDhEQUFtQjtBQUM1QztBQUNBLHVDQUF1Qyx3QkFBd0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1hcHAtYnVpbGRlci13ZWIvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9pbnRlcm5hbC90b2tlbnMuanM/Y2Y0OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTVE9SQUdFX1RPS0VOU19OQU1FIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgVHlwZWRFdmVudFRhcmdldCB9IGZyb20gJy4vVHlwZWRFdmVudFRhcmdldC5qcyc7XG5jb25zdCBJR05PUkVEX0VSUk9SID0gbmV3IEVycm9yKCk7XG5JR05PUkVEX0VSUk9SLnN0YWNrID0gJyc7XG5jb25zdCBhY2Nlc3NUb2tlbkNoYW5nZWRMaXN0ZW5lcnMgPSBuZXcgVHlwZWRFdmVudFRhcmdldCgpO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIFRva2VucyB7XG4gICAgb3JpZ2luO1xuICAgIHJlZnJlc2g7XG4gICAgYWNjZXNzO1xuICAgIGV4cGlyZXM7XG4gICAgX3Jldm9rZWQgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gZWRpdG9yIG9yaWdpbiB0aGF0IHRob3NlIHRva2VucyBhcmUgYm91bmQgdG8sIG1vc3RseSB1c2VkIGZvciBkZXZlbG9wbWVudFxuICAgIG9yaWdpbiwgXG4gICAgLy8gdG9rZW4gdG8gdXNlIHRvIGdldCBhIG5ldyBhY2Nlc3MgdG9rZW5cbiAgICByZWZyZXNoLCBcbiAgICAvLyB0b2tlbiB0byBwcm92aWRlIHRvIHdlYmNvbnRhaW5lclxuICAgIGFjY2VzcywgXG4gICAgLy8gdGltZSBpbiBVVEMgd2hlbiB0aGUgdG9rZW4gZXhwaXJlc1xuICAgIGV4cGlyZXMpIHtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBvcmlnaW47XG4gICAgICAgIHRoaXMucmVmcmVzaCA9IHJlZnJlc2g7XG4gICAgICAgIHRoaXMuYWNjZXNzID0gYWNjZXNzO1xuICAgICAgICB0aGlzLmV4cGlyZXMgPSBleHBpcmVzO1xuICAgIH1cbiAgICBhc3luYyBhY3RpdmF0ZShvbkZhaWxlZFJlZnJlc2gpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Jldm9rZWQuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVG9rZW4gcmV2b2tlZCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHRoZSBhY2Nlc3MgdG9rZW4gZXhwaXJlZCB3ZSBmZXRjaCBhIG5ldyBvbmVcbiAgICAgICAgaWYgKHRoaXMuZXhwaXJlcyA8IERhdGUubm93KCkpIHtcbiAgICAgICAgICAgIGlmICghKGF3YWl0IHRoaXMuX2ZldGNoTmV3QWNjZXNzVG9rZW4oKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3luYygpO1xuICAgICAgICB0aGlzLl9zdGFydFJlZnJlc2hUb2tlbnNMb29wKG9uRmFpbGVkUmVmcmVzaCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhc3luYyByZXZva2UoY2xpZW50SWQsIGlnbm9yZVJldm9rZUVycm9yKSB7XG4gICAgICAgIHRoaXMuX3Jldm9rZWQuYWJvcnQoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5vcmlnaW59L29hdXRoL3Jldm9rZWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoeyB0b2tlbjogdGhpcy5yZWZyZXNoLCB0b2tlbl90eXBlX2hpbnQ6ICdyZWZyZXNoX3Rva2VuJywgY2xpZW50X2lkOiBjbGllbnRJZCB9KSxcbiAgICAgICAgICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2dvdXRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghaWdub3JlUmV2b2tlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjbGVhclRva2Vuc0luU3RvcmFnZSgpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVN0b3JhZ2UoKSB7XG4gICAgICAgIGNvbnN0IHNhdmVkVG9rZW5zID0gcmVhZFRva2Vuc0Zyb21TdG9yYWdlKCk7XG4gICAgICAgIGlmICghc2F2ZWRUb2tlbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVG9rZW5zKHNhdmVkVG9rZW5zLm9yaWdpbiwgc2F2ZWRUb2tlbnMucmVmcmVzaCwgc2F2ZWRUb2tlbnMuYWNjZXNzLCBzYXZlZFRva2Vucy5leHBpcmVzKTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGZyb21BdXRoQ29kZSh7IGVkaXRvck9yaWdpbiwgY2xpZW50SWQsIGNvZGVWZXJpZmllciwgYXV0aENvZGUsIHJlZGlyZWN0VXJpLCB9KSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7ZWRpdG9yT3JpZ2lufS9vYXV0aC90b2tlbmAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgIGNvZGU6IGF1dGhDb2RlLFxuICAgICAgICAgICAgICAgIGNvZGVfdmVyaWZpZXI6IGNvZGVWZXJpZmllcixcbiAgICAgICAgICAgICAgICBncmFudF90eXBlOiAnYXV0aG9yaXphdGlvbl9jb2RlJyxcbiAgICAgICAgICAgICAgICByZWRpcmVjdF91cmk6IHJlZGlyZWN0VXJpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCB0b2tlbjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9rZW5SZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgYXNzZXJ0VG9rZW5SZXNwb25zZSh0b2tlblJlc3BvbnNlKTtcbiAgICAgICAgY29uc3QgeyBhY2Nlc3NfdG9rZW46IGFjY2VzcywgcmVmcmVzaF90b2tlbjogcmVmcmVzaCB9ID0gdG9rZW5SZXNwb25zZTtcbiAgICAgICAgY29uc3QgZXhwaXJlcyA9IGdldEV4cGlyZXNGcm9tVG9rZW5SZXNwb25zZSh0b2tlblJlc3BvbnNlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUb2tlbnMoZWRpdG9yT3JpZ2luLCByZWZyZXNoLCBhY2Nlc3MsIGV4cGlyZXMpO1xuICAgIH1cbiAgICBhc3luYyBfZmV0Y2hOZXdBY2Nlc3NUb2tlbigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5vcmlnaW59L29hdXRoL3Rva2VuYCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgICAgIGdyYW50X3R5cGU6ICdyZWZyZXNoX3Rva2VuJyxcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogdGhpcy5yZWZyZXNoLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IHRoaXMuX3Jldm9rZWQuc2lnbmFsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgSUdOT1JFRF9FUlJPUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzcG9uc2UgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBhc3NlcnRUb2tlblJlc3BvbnNlKHRva2VuUmVzcG9uc2UpO1xuICAgICAgICAgICAgY29uc3QgeyBhY2Nlc3NfdG9rZW46IGFjY2VzcywgcmVmcmVzaF90b2tlbjogcmVmcmVzaCB9ID0gdG9rZW5SZXNwb25zZTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGlyZXMgPSBnZXRFeHBpcmVzRnJvbVRva2VuUmVzcG9uc2UodG9rZW5SZXNwb25zZSk7XG4gICAgICAgICAgICB0aGlzLmFjY2VzcyA9IGFjY2VzcztcbiAgICAgICAgICAgIHRoaXMuZXhwaXJlcyA9IGV4cGlyZXM7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2ggPSByZWZyZXNoO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgY2xlYXJUb2tlbnNJblN0b3JhZ2UoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfc3luYygpIHtcbiAgICAgICAgcGVyc2lzdFRva2Vuc0luU3RvcmFnZSh0aGlzKTtcbiAgICAgICAgZmlyZUFjY2Vzc1Rva2VuQ2hhbmdlZCh0aGlzLmFjY2Vzcyk7XG4gICAgfVxuICAgIGFzeW5jIF9zdGFydFJlZnJlc2hUb2tlbnNMb29wKG9uRmFpbGVkUmVmcmVzaCkge1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgZXhwaXJlc0luID0gdGhpcy5leHBpcmVzIC0gRGF0ZS5ub3coKSAtIDEwMDA7XG4gICAgICAgICAgICBhd2FpdCB3YWl0KE1hdGgubWF4KGV4cGlyZXNJbiwgMTAwMCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3Jldm9rZWQuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2ZldGNoTmV3QWNjZXNzVG9rZW4oKSkge1xuICAgICAgICAgICAgICAgIG9uRmFpbGVkUmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3N5bmMoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclRva2Vuc0luU3RvcmFnZSgpIHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX1RPS0VOU19OQU1FKTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRBY2Nlc3NUb2tlbkNoYW5nZWRMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgIHJldHVybiBhY2Nlc3NUb2tlbkNoYW5nZWRMaXN0ZW5lcnMubGlzdGVuKGxpc3RlbmVyKTtcbn1cbmZ1bmN0aW9uIHJlYWRUb2tlbnNGcm9tU3RvcmFnZSgpIHtcbiAgICBjb25zdCBzZXJpYWxpemVkVG9rZW5zID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oU1RPUkFHRV9UT0tFTlNfTkFNRSk7XG4gICAgaWYgKCFzZXJpYWxpemVkVG9rZW5zKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzZXJpYWxpemVkVG9rZW5zKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5mdW5jdGlvbiBwZXJzaXN0VG9rZW5zSW5TdG9yYWdlKHRva2Vucykge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfVE9LRU5TX05BTUUsIEpTT04uc3RyaW5naWZ5KHRva2VucykpO1xufVxuZnVuY3Rpb24gZ2V0RXhwaXJlc0Zyb21Ub2tlblJlc3BvbnNlKHsgY3JlYXRlZF9hdCwgZXhwaXJlc19pbiB9KSB7XG4gICAgcmV0dXJuIChjcmVhdGVkX2F0ICsgZXhwaXJlc19pbikgKiAxMDAwO1xufVxuZnVuY3Rpb24gYXNzZXJ0VG9rZW5SZXNwb25zZSh0b2tlbikge1xuICAgIGlmICh0eXBlb2YgdG9rZW4gIT09ICdvYmplY3QnIHx8ICF0b2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgVG9rZW4gUmVzcG9uc2UnKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b2tlbi5hY2Nlc3NfdG9rZW4gIT09ICdzdHJpbmcnIHx8XG4gICAgICAgIHR5cGVvZiB0b2tlbi5yZWZyZXNoX3Rva2VuICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICB0eXBlb2YgdG9rZW4uY3JlYXRlZF9hdCAhPT0gJ251bWJlcicgfHxcbiAgICAgICAgdHlwZW9mIHRva2VuLmV4cGlyZXNfaW4gIT09ICdudW1iZXInKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBUb2tlbiBSZXNwb25zZScpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHdhaXQobXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cbmZ1bmN0aW9uIGZpcmVBY2Nlc3NUb2tlbkNoYW5nZWQoYWNjZXNzVG9rZW4pIHtcbiAgICBhY2Nlc3NUb2tlbkNoYW5nZWRMaXN0ZW5lcnMuZmlyZUV2ZW50KGFjY2Vzc1Rva2VuKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/internal/tokens.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/preview-message-types.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreviewMessageType: () => (/* binding */ PreviewMessageType)\n/* harmony export */ });\n/**\n * This type is in a separate module so that localservice can import it\n * without bundling all the other webcontainer specific stuff.\n */\nvar PreviewMessageType;\n(function (PreviewMessageType) {\n    PreviewMessageType[\"UncaughtException\"] = \"PREVIEW_UNCAUGHT_EXCEPTION\";\n    PreviewMessageType[\"UnhandledRejection\"] = \"PREVIEW_UNHANDLED_REJECTION\";\n    PreviewMessageType[\"ConsoleError\"] = \"PREVIEW_CONSOLE_ERROR\";\n})(PreviewMessageType || (PreviewMessageType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC9wcmV2aWV3LW1lc3NhZ2UtdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0RBQWdEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktYXBwLWJ1aWxkZXItd2ViLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvcHJldmlldy1tZXNzYWdlLXR5cGVzLmpzP2Y0OWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGlzIHR5cGUgaXMgaW4gYSBzZXBhcmF0ZSBtb2R1bGUgc28gdGhhdCBsb2NhbHNlcnZpY2UgY2FuIGltcG9ydCBpdFxuICogd2l0aG91dCBidW5kbGluZyBhbGwgdGhlIG90aGVyIHdlYmNvbnRhaW5lciBzcGVjaWZpYyBzdHVmZi5cbiAqL1xuZXhwb3J0IHZhciBQcmV2aWV3TWVzc2FnZVR5cGU7XG4oZnVuY3Rpb24gKFByZXZpZXdNZXNzYWdlVHlwZSkge1xuICAgIFByZXZpZXdNZXNzYWdlVHlwZVtcIlVuY2F1Z2h0RXhjZXB0aW9uXCJdID0gXCJQUkVWSUVXX1VOQ0FVR0hUX0VYQ0VQVElPTlwiO1xuICAgIFByZXZpZXdNZXNzYWdlVHlwZVtcIlVuaGFuZGxlZFJlamVjdGlvblwiXSA9IFwiUFJFVklFV19VTkhBTkRMRURfUkVKRUNUSU9OXCI7XG4gICAgUHJldmlld01lc3NhZ2VUeXBlW1wiQ29uc29sZUVycm9yXCJdID0gXCJQUkVWSUVXX0NPTlNPTEVfRVJST1JcIjtcbn0pKFByZXZpZXdNZXNzYWdlVHlwZSB8fCAoUHJldmlld01lc3NhZ2VUeXBlID0ge30pKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils.js":
/*!******************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreviewMessageType: () => (/* reexport safe */ _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__.PreviewMessageType),\n/* harmony export */   isPreviewMessage: () => (/* reexport safe */ _utils_is_preview_message_js__WEBPACK_IMPORTED_MODULE_2__.isPreviewMessage),\n/* harmony export */   reloadPreview: () => (/* reexport safe */ _utils_reload_preview_js__WEBPACK_IMPORTED_MODULE_0__.reloadPreview)\n/* harmony export */ });\n/* harmony import */ var _utils_reload_preview_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/reload-preview.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/reload-preview.js\");\n/* harmony import */ var _preview_message_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./preview-message-types.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\");\n/* harmony import */ var _utils_is_preview_message_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/is-preview-message.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/is-preview-message.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEQ7QUFDTTtBQUNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktYXBwLWJ1aWxkZXItd2ViLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvdXRpbHMuanM/ODI1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyByZWxvYWRQcmV2aWV3IH0gZnJvbSAnLi91dGlscy9yZWxvYWQtcHJldmlldy5qcyc7XG5leHBvcnQgeyBQcmV2aWV3TWVzc2FnZVR5cGUgfSBmcm9tICcuL3ByZXZpZXctbWVzc2FnZS10eXBlcy5qcyc7XG5leHBvcnQgeyBpc1ByZXZpZXdNZXNzYWdlIH0gZnJvbSAnLi91dGlscy9pcy1wcmV2aWV3LW1lc3NhZ2UuanMnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/file-system.js":
/*!******************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/file-system.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toExternalFileSystemTree: () => (/* binding */ toExternalFileSystemTree),\n/* harmony export */   toInternalFileSystemTree: () => (/* binding */ toInternalFileSystemTree)\n/* harmony export */ });\n/* harmony import */ var _null_prototype_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./null-prototype.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/utils/null-prototype.js\");\n\nconst binaryDecoder = new TextDecoder('latin1');\n/**\n * @internal\n */\nfunction toInternalFileSystemTree(tree) {\n    const newTree = { d: {} };\n    for (const name of Object.keys(tree)) {\n        const entry = tree[name];\n        if ('file' in entry) {\n            if ('symlink' in entry.file) {\n                newTree.d[name] = { f: { l: entry.file.symlink } };\n                continue;\n            }\n            const contents = entry.file.contents;\n            const stringContents = typeof contents === 'string' ? contents : binaryDecoder.decode(contents);\n            const binary = typeof contents === 'string' ? {} : { b: true };\n            newTree.d[name] = { f: { c: stringContents, ...binary } };\n            continue;\n        }\n        const newEntry = toInternalFileSystemTree(entry.directory);\n        newTree.d[name] = newEntry;\n    }\n    return newTree;\n}\n/**\n * @internal\n */\nfunction toExternalFileSystemTree(tree) {\n    const newTree = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)();\n    if ('f' in tree) {\n        throw new Error('It is not possible to export a single file in the JSON format.');\n    }\n    if ('d' in tree) {\n        for (const name of Object.keys(tree.d)) {\n            const entry = tree.d[name];\n            if ('d' in entry) {\n                newTree[name] = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                    directory: toExternalFileSystemTree(entry),\n                });\n            }\n            else if ('f' in entry) {\n                if ('c' in entry.f) {\n                    newTree[name] = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                        file: (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                            contents: entry.f.b ? fromBinaryString(entry.f.c) : entry.f.c,\n                        }),\n                    });\n                }\n                else if ('l' in entry.f) {\n                    newTree[name] = (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                        file: (0,_null_prototype_js__WEBPACK_IMPORTED_MODULE_0__.nullPrototype)({\n                            symlink: entry.f.l,\n                        }),\n                    });\n                }\n            }\n        }\n    }\n    return newTree;\n}\nfunction fromBinaryString(s) {\n    const encoded = new Uint8Array(s.length);\n    for (let i = 0; i < s.length; i++) {\n        encoded[i] = s[i].charCodeAt(0);\n    }\n    return encoded;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9maWxlLXN5c3RlbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxLQUFLO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELElBQUk7QUFDakUsZ0NBQWdDLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLG9CQUFvQixpRUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpRUFBYTtBQUM3QztBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsaUVBQWE7QUFDakQsOEJBQThCLGlFQUFhO0FBQzNDO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0Esb0NBQW9DLGlFQUFhO0FBQ2pELDhCQUE4QixpRUFBYTtBQUMzQztBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktYXBwLWJ1aWxkZXItd2ViLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvdXRpbHMvZmlsZS1zeXN0ZW0uanM/OTI4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBudWxsUHJvdG90eXBlIH0gZnJvbSAnLi9udWxsLXByb3RvdHlwZS5qcyc7XG5jb25zdCBiaW5hcnlEZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCdsYXRpbjEnKTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0ludGVybmFsRmlsZVN5c3RlbVRyZWUodHJlZSkge1xuICAgIGNvbnN0IG5ld1RyZWUgPSB7IGQ6IHt9IH07XG4gICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKHRyZWUpKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdHJlZVtuYW1lXTtcbiAgICAgICAgaWYgKCdmaWxlJyBpbiBlbnRyeSkge1xuICAgICAgICAgICAgaWYgKCdzeW1saW5rJyBpbiBlbnRyeS5maWxlKSB7XG4gICAgICAgICAgICAgICAgbmV3VHJlZS5kW25hbWVdID0geyBmOiB7IGw6IGVudHJ5LmZpbGUuc3ltbGluayB9IH07XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb250ZW50cyA9IGVudHJ5LmZpbGUuY29udGVudHM7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdDb250ZW50cyA9IHR5cGVvZiBjb250ZW50cyA9PT0gJ3N0cmluZycgPyBjb250ZW50cyA6IGJpbmFyeURlY29kZXIuZGVjb2RlKGNvbnRlbnRzKTtcbiAgICAgICAgICAgIGNvbnN0IGJpbmFyeSA9IHR5cGVvZiBjb250ZW50cyA9PT0gJ3N0cmluZycgPyB7fSA6IHsgYjogdHJ1ZSB9O1xuICAgICAgICAgICAgbmV3VHJlZS5kW25hbWVdID0geyBmOiB7IGM6IHN0cmluZ0NvbnRlbnRzLCAuLi5iaW5hcnkgfSB9O1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3RW50cnkgPSB0b0ludGVybmFsRmlsZVN5c3RlbVRyZWUoZW50cnkuZGlyZWN0b3J5KTtcbiAgICAgICAgbmV3VHJlZS5kW25hbWVdID0gbmV3RW50cnk7XG4gICAgfVxuICAgIHJldHVybiBuZXdUcmVlO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRXh0ZXJuYWxGaWxlU3lzdGVtVHJlZSh0cmVlKSB7XG4gICAgY29uc3QgbmV3VHJlZSA9IG51bGxQcm90b3R5cGUoKTtcbiAgICBpZiAoJ2YnIGluIHRyZWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJdCBpcyBub3QgcG9zc2libGUgdG8gZXhwb3J0IGEgc2luZ2xlIGZpbGUgaW4gdGhlIEpTT04gZm9ybWF0LicpO1xuICAgIH1cbiAgICBpZiAoJ2QnIGluIHRyZWUpIHtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKHRyZWUuZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gdHJlZS5kW25hbWVdO1xuICAgICAgICAgICAgaWYgKCdkJyBpbiBlbnRyeSkge1xuICAgICAgICAgICAgICAgIG5ld1RyZWVbbmFtZV0gPSBudWxsUHJvdG90eXBlKHtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiB0b0V4dGVybmFsRmlsZVN5c3RlbVRyZWUoZW50cnkpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoJ2YnIGluIGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCdjJyBpbiBlbnRyeS5mKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1RyZWVbbmFtZV0gPSBudWxsUHJvdG90eXBlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6IG51bGxQcm90b3R5cGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBlbnRyeS5mLmIgPyBmcm9tQmluYXJ5U3RyaW5nKGVudHJ5LmYuYykgOiBlbnRyeS5mLmMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCdsJyBpbiBlbnRyeS5mKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1RyZWVbbmFtZV0gPSBudWxsUHJvdG90eXBlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6IG51bGxQcm90b3R5cGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bWxpbms6IGVudHJ5LmYubCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ld1RyZWU7XG59XG5mdW5jdGlvbiBmcm9tQmluYXJ5U3RyaW5nKHMpIHtcbiAgICBjb25zdCBlbmNvZGVkID0gbmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbmNvZGVkW2ldID0gc1tpXS5jaGFyQ29kZUF0KDApO1xuICAgIH1cbiAgICByZXR1cm4gZW5jb2RlZDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/file-system.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/is-preview-message.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/is-preview-message.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPreviewMessage: () => (/* binding */ isPreviewMessage)\n/* harmony export */ });\n/* harmony import */ var _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../preview-message-types.js */ \"(ssr)/./node_modules/@webcontainer/api/dist/preview-message-types.js\");\n\nconst PREVIEW_MESSAGE_TYPES = [\n    _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__.PreviewMessageType.ConsoleError,\n    _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__.PreviewMessageType.UncaughtException,\n    _preview_message_types_js__WEBPACK_IMPORTED_MODULE_0__.PreviewMessageType.UnhandledRejection,\n];\nfunction isPreviewMessage(data) {\n    if (data == null || typeof data !== 'object') {\n        return false;\n    }\n    if (!('type' in data) || !PREVIEW_MESSAGE_TYPES.includes(data.type)) {\n        return false;\n    }\n    return true;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9pcy1wcmV2aWV3LW1lc3NhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBaUU7QUFDakU7QUFDQSxJQUFJLHlFQUFrQjtBQUN0QixJQUFJLHlFQUFrQjtBQUN0QixJQUFJLHlFQUFrQjtBQUN0QjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWFwcC1idWlsZGVyLXdlYi8uL25vZGVfbW9kdWxlcy9Ad2ViY29udGFpbmVyL2FwaS9kaXN0L3V0aWxzL2lzLXByZXZpZXctbWVzc2FnZS5qcz80MWRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByZXZpZXdNZXNzYWdlVHlwZSB9IGZyb20gJy4uL3ByZXZpZXctbWVzc2FnZS10eXBlcy5qcyc7XG5jb25zdCBQUkVWSUVXX01FU1NBR0VfVFlQRVMgPSBbXG4gICAgUHJldmlld01lc3NhZ2VUeXBlLkNvbnNvbGVFcnJvcixcbiAgICBQcmV2aWV3TWVzc2FnZVR5cGUuVW5jYXVnaHRFeGNlcHRpb24sXG4gICAgUHJldmlld01lc3NhZ2VUeXBlLlVuaGFuZGxlZFJlamVjdGlvbixcbl07XG5leHBvcnQgZnVuY3Rpb24gaXNQcmV2aWV3TWVzc2FnZShkYXRhKSB7XG4gICAgaWYgKGRhdGEgPT0gbnVsbCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoISgndHlwZScgaW4gZGF0YSkgfHwgIVBSRVZJRVdfTUVTU0FHRV9UWVBFUy5pbmNsdWRlcyhkYXRhLnR5cGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/is-preview-message.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/null-prototype.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/null-prototype.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   nullPrototype: () => (/* binding */ nullPrototype)\n/* harmony export */ });\n/**\n * @internal\n */\nfunction nullPrototype(source) {\n    const prototype = Object.create(null);\n    if (!source) {\n        return prototype;\n    }\n    return Object.assign(prototype, source);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9udWxsLXByb3RvdHlwZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1hcHAtYnVpbGRlci13ZWIvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9udWxsLXByb3RvdHlwZS5qcz8yY2Y4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBudWxsUHJvdG90eXBlKHNvdXJjZSkge1xuICAgIGNvbnN0IHByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHByb3RvdHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocHJvdG90eXBlLCBzb3VyY2UpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/null-prototype.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/utils/reload-preview.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/utils/reload-preview.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   reloadPreview: () => (/* binding */ reloadPreview)\n/* harmony export */ });\n/**\n * This function reloads the provided iframe.\n *\n * @param preview The iframe page to reload.\n * @param hardRefreshTimeout The timeout after which the preview is reset if it hasn't responded to the reload event.\n */\nfunction reloadPreview(preview, hardRefreshTimeout = 200) {\n    const { port1, port2 } = new MessageChannel();\n    let resolve;\n    const promise = new Promise((_resolve) => {\n        resolve = _resolve;\n    });\n    const done = () => {\n        resolve();\n        port2.close();\n    };\n    const timeout = setTimeout(() => {\n        const iframeSrc = preview.src;\n        preview.src = iframeSrc;\n        done();\n    }, hardRefreshTimeout);\n    port2.addEventListener('message', (event) => {\n        const data = event.data;\n        if (data == null || typeof data !== 'object') {\n            return;\n        }\n        if (data.type === 'LOCALSERVICE_WINDOW_RELOADED') {\n            clearTimeout(timeout);\n            done();\n        }\n    });\n    preview.contentWindow?.postMessage({\n        type: 'LOCALSERVICE_RELOAD_WINDOW',\n        callback: port1,\n    }, '*', [port1]);\n    return promise;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC91dGlscy9yZWxvYWQtcHJldmlldy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxZQUFZLGVBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktYXBwLWJ1aWxkZXItd2ViLy4vbm9kZV9tb2R1bGVzL0B3ZWJjb250YWluZXIvYXBpL2Rpc3QvdXRpbHMvcmVsb2FkLXByZXZpZXcuanM/ODZmNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoaXMgZnVuY3Rpb24gcmVsb2FkcyB0aGUgcHJvdmlkZWQgaWZyYW1lLlxuICpcbiAqIEBwYXJhbSBwcmV2aWV3IFRoZSBpZnJhbWUgcGFnZSB0byByZWxvYWQuXG4gKiBAcGFyYW0gaGFyZFJlZnJlc2hUaW1lb3V0IFRoZSB0aW1lb3V0IGFmdGVyIHdoaWNoIHRoZSBwcmV2aWV3IGlzIHJlc2V0IGlmIGl0IGhhc24ndCByZXNwb25kZWQgdG8gdGhlIHJlbG9hZCBldmVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbG9hZFByZXZpZXcocHJldmlldywgaGFyZFJlZnJlc2hUaW1lb3V0ID0gMjAwKSB7XG4gICAgY29uc3QgeyBwb3J0MSwgcG9ydDIgfSA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgIGxldCByZXNvbHZlO1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgoX3Jlc29sdmUpID0+IHtcbiAgICAgICAgcmVzb2x2ZSA9IF9yZXNvbHZlO1xuICAgIH0pO1xuICAgIGNvbnN0IGRvbmUgPSAoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgcG9ydDIuY2xvc2UoKTtcbiAgICB9O1xuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgaWZyYW1lU3JjID0gcHJldmlldy5zcmM7XG4gICAgICAgIHByZXZpZXcuc3JjID0gaWZyYW1lU3JjO1xuICAgICAgICBkb25lKCk7XG4gICAgfSwgaGFyZFJlZnJlc2hUaW1lb3V0KTtcbiAgICBwb3J0Mi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBldmVudC5kYXRhO1xuICAgICAgICBpZiAoZGF0YSA9PSBudWxsIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdMT0NBTFNFUlZJQ0VfV0lORE9XX1JFTE9BREVEJykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcHJldmlldy5jb250ZW50V2luZG93Py5wb3N0TWVzc2FnZSh7XG4gICAgICAgIHR5cGU6ICdMT0NBTFNFUlZJQ0VfUkVMT0FEX1dJTkRPVycsXG4gICAgICAgIGNhbGxiYWNrOiBwb3J0MSxcbiAgICB9LCAnKicsIFtwb3J0MV0pO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/utils/reload-preview.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@webcontainer/api/dist/vendor/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@webcontainer/api/dist/vendor/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Comlink: () => (/* binding */ comlink_exports)\n/* harmony export */ });\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// dist/vendor/comlink.js\nvar comlink_exports = {};\n__export(comlink_exports, {\n  createEndpoint: () => createEndpoint,\n  expose: () => expose,\n  proxy: () => proxy,\n  proxyMarker: () => proxyMarker,\n  releaseProxy: () => releaseProxy,\n  transfer: () => transfer,\n  transferHandlers: () => transferHandlers,\n  windowEndpoint: () => windowEndpoint,\n  wrap: () => wrap\n});\n\n// ../../node_modules/comlink/dist/esm/comlink.mjs\nvar proxyMarker = Symbol(\"Comlink.proxy\");\nvar createEndpoint = Symbol(\"Comlink.endpoint\");\nvar releaseProxy = Symbol(\"Comlink.releaseProxy\");\nvar throwMarker = Symbol(\"Comlink.thrown\");\nvar isObject = (val) => typeof val === \"object\" && val !== null || typeof val === \"function\";\nvar proxyTransferHandler = {\n  canHandle: (val) => isObject(val) && val[proxyMarker],\n  serialize(obj) {\n    const { port1, port2 } = new MessageChannel();\n    expose(obj, port1);\n    return [port2, [port2]];\n  },\n  deserialize(port) {\n    port.start();\n    return wrap(port);\n  }\n};\nvar throwTransferHandler = {\n  canHandle: (value) => isObject(value) && throwMarker in value,\n  serialize({ value }) {\n    let serialized;\n    if (value instanceof Error) {\n      serialized = {\n        isError: true,\n        value: {\n          message: value.message,\n          name: value.name,\n          stack: value.stack\n        }\n      };\n    } else {\n      serialized = { isError: false, value };\n    }\n    return [serialized, []];\n  },\n  deserialize(serialized) {\n    if (serialized.isError) {\n      throw Object.assign(new Error(serialized.value.message), serialized.value);\n    }\n    throw serialized.value;\n  }\n};\nvar transferHandlers = /* @__PURE__ */ new Map([\n  [\"proxy\", proxyTransferHandler],\n  [\"throw\", throwTransferHandler]\n]);\nfunction expose(obj, ep = self) {\n  ep.addEventListener(\"message\", function callback(ev) {\n    if (!ev || !ev.data) {\n      return;\n    }\n    const { id, type, path } = Object.assign({ path: [] }, ev.data);\n    const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n    let returnValue;\n    try {\n      const parent = path.slice(0, -1).reduce((obj2, prop) => obj2[prop], obj);\n      const rawValue = path.reduce((obj2, prop) => obj2[prop], obj);\n      switch (type) {\n        case 0:\n          {\n            returnValue = rawValue;\n          }\n          break;\n        case 1:\n          {\n            parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n            returnValue = true;\n          }\n          break;\n        case 2:\n          {\n            returnValue = rawValue.apply(parent, argumentList);\n          }\n          break;\n        case 3:\n          {\n            const value = new rawValue(...argumentList);\n            returnValue = proxy(value);\n          }\n          break;\n        case 4:\n          {\n            const { port1, port2 } = new MessageChannel();\n            expose(obj, port2);\n            returnValue = transfer(port1, [port1]);\n          }\n          break;\n        case 5:\n          {\n            returnValue = void 0;\n          }\n          break;\n      }\n    } catch (value) {\n      returnValue = { value, [throwMarker]: 0 };\n    }\n    Promise.resolve(returnValue).catch((value) => {\n      return { value, [throwMarker]: 0 };\n    }).then((returnValue2) => {\n      const [wireValue, transferables] = toWireValue(returnValue2);\n      ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n      if (type === 5) {\n        ep.removeEventListener(\"message\", callback);\n        closeEndPoint(ep);\n      }\n    });\n  });\n  if (ep.start) {\n    ep.start();\n  }\n}\nfunction isMessagePort(endpoint) {\n  return endpoint.constructor.name === \"MessagePort\";\n}\nfunction closeEndPoint(endpoint) {\n  if (isMessagePort(endpoint))\n    endpoint.close();\n}\nfunction wrap(ep, target) {\n  return createProxy(ep, [], target);\n}\nfunction throwIfProxyReleased(isReleased) {\n  if (isReleased) {\n    throw new Error(\"Proxy has been released and is not useable\");\n  }\n}\nfunction createProxy(ep, path = [], target = function() {\n}) {\n  let isProxyReleased = false;\n  const proxy2 = new Proxy(target, {\n    get(_target, prop) {\n      throwIfProxyReleased(isProxyReleased);\n      if (prop === releaseProxy) {\n        return () => {\n          return requestResponseMessage(ep, {\n            type: 5,\n            path: path.map((p) => p.toString())\n          }).then(() => {\n            closeEndPoint(ep);\n            isProxyReleased = true;\n          });\n        };\n      }\n      if (prop === \"then\") {\n        if (path.length === 0) {\n          return { then: () => proxy2 };\n        }\n        const r = requestResponseMessage(ep, {\n          type: 0,\n          path: path.map((p) => p.toString())\n        }).then(fromWireValue);\n        return r.then.bind(r);\n      }\n      return createProxy(ep, [...path, prop]);\n    },\n    set(_target, prop, rawValue) {\n      throwIfProxyReleased(isProxyReleased);\n      const [value, transferables] = toWireValue(rawValue);\n      return requestResponseMessage(ep, {\n        type: 1,\n        path: [...path, prop].map((p) => p.toString()),\n        value\n      }, transferables).then(fromWireValue);\n    },\n    apply(_target, _thisArg, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const last = path[path.length - 1];\n      if (last === createEndpoint) {\n        return requestResponseMessage(ep, {\n          type: 4\n        }).then(fromWireValue);\n      }\n      if (last === \"bind\") {\n        return createProxy(ep, path.slice(0, -1));\n      }\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(ep, {\n        type: 2,\n        path: path.map((p) => p.toString()),\n        argumentList\n      }, transferables).then(fromWireValue);\n    },\n    construct(_target, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(ep, {\n        type: 3,\n        path: path.map((p) => p.toString()),\n        argumentList\n      }, transferables).then(fromWireValue);\n    }\n  });\n  return proxy2;\n}\nfunction myFlat(arr) {\n  return Array.prototype.concat.apply([], arr);\n}\nfunction processArguments(argumentList) {\n  const processed = argumentList.map(toWireValue);\n  return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\nvar transferCache = /* @__PURE__ */ new WeakMap();\nfunction transfer(obj, transfers) {\n  transferCache.set(obj, transfers);\n  return obj;\n}\nfunction proxy(obj) {\n  return Object.assign(obj, { [proxyMarker]: true });\n}\nfunction windowEndpoint(w, context = self, targetOrigin = \"*\") {\n  return {\n    postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\n    addEventListener: context.addEventListener.bind(context),\n    removeEventListener: context.removeEventListener.bind(context)\n  };\n}\nfunction toWireValue(value) {\n  for (const [name, handler] of transferHandlers) {\n    if (handler.canHandle(value)) {\n      const [serializedValue, transferables] = handler.serialize(value);\n      return [\n        {\n          type: 3,\n          name,\n          value: serializedValue\n        },\n        transferables\n      ];\n    }\n  }\n  return [\n    {\n      type: 0,\n      value\n    },\n    transferCache.get(value) || []\n  ];\n}\nfunction fromWireValue(value) {\n  switch (value.type) {\n    case 3:\n      return transferHandlers.get(value.name).deserialize(value.value);\n    case 0:\n      return value.value;\n  }\n}\nfunction requestResponseMessage(ep, msg, transfers) {\n  return new Promise((resolve) => {\n    const id = generateUUID();\n    ep.addEventListener(\"message\", function l(ev) {\n      if (!ev.data || !ev.data.id || ev.data.id !== id) {\n        return;\n      }\n      ep.removeEventListener(\"message\", l);\n      resolve(ev.data);\n    });\n    if (ep.start) {\n      ep.start();\n    }\n    ep.postMessage(Object.assign({ id }, msg), transfers);\n  });\n}\nfunction generateUUID() {\n  return new Array(4).fill(0).map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16)).join(\"-\");\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC92ZW5kb3IvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGVBQWU7QUFDM0I7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixxQkFBcUI7QUFDckI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUJBQWlCLGtCQUFrQixVQUFVO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixlQUFlO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsZUFBZTtBQUNmLEtBQUs7QUFDTDtBQUNBLG1EQUFtRCxnQkFBZ0IsSUFBSTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixxQkFBcUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLElBQUk7QUFDdkMsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1hcHAtYnVpbGRlci13ZWIvLi9ub2RlX21vZHVsZXMvQHdlYmNvbnRhaW5lci9hcGkvZGlzdC92ZW5kb3IvaW5kZXguanM/NjM1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xuXG4vLyBkaXN0L3ZlbmRvci9jb21saW5rLmpzXG52YXIgY29tbGlua19leHBvcnRzID0ge307XG5fX2V4cG9ydChjb21saW5rX2V4cG9ydHMsIHtcbiAgY3JlYXRlRW5kcG9pbnQ6ICgpID0+IGNyZWF0ZUVuZHBvaW50LFxuICBleHBvc2U6ICgpID0+IGV4cG9zZSxcbiAgcHJveHk6ICgpID0+IHByb3h5LFxuICBwcm94eU1hcmtlcjogKCkgPT4gcHJveHlNYXJrZXIsXG4gIHJlbGVhc2VQcm94eTogKCkgPT4gcmVsZWFzZVByb3h5LFxuICB0cmFuc2ZlcjogKCkgPT4gdHJhbnNmZXIsXG4gIHRyYW5zZmVySGFuZGxlcnM6ICgpID0+IHRyYW5zZmVySGFuZGxlcnMsXG4gIHdpbmRvd0VuZHBvaW50OiAoKSA9PiB3aW5kb3dFbmRwb2ludCxcbiAgd3JhcDogKCkgPT4gd3JhcFxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9jb21saW5rL2Rpc3QvZXNtL2NvbWxpbmsubWpzXG52YXIgcHJveHlNYXJrZXIgPSBTeW1ib2woXCJDb21saW5rLnByb3h5XCIpO1xudmFyIGNyZWF0ZUVuZHBvaW50ID0gU3ltYm9sKFwiQ29tbGluay5lbmRwb2ludFwiKTtcbnZhciByZWxlYXNlUHJveHkgPSBTeW1ib2woXCJDb21saW5rLnJlbGVhc2VQcm94eVwiKTtcbnZhciB0aHJvd01hcmtlciA9IFN5bWJvbChcIkNvbWxpbmsudGhyb3duXCIpO1xudmFyIGlzT2JqZWN0ID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiB2YWwgIT09IG51bGwgfHwgdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiO1xudmFyIHByb3h5VHJhbnNmZXJIYW5kbGVyID0ge1xuICBjYW5IYW5kbGU6ICh2YWwpID0+IGlzT2JqZWN0KHZhbCkgJiYgdmFsW3Byb3h5TWFya2VyXSxcbiAgc2VyaWFsaXplKG9iaikge1xuICAgIGNvbnN0IHsgcG9ydDEsIHBvcnQyIH0gPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICBleHBvc2Uob2JqLCBwb3J0MSk7XG4gICAgcmV0dXJuIFtwb3J0MiwgW3BvcnQyXV07XG4gIH0sXG4gIGRlc2VyaWFsaXplKHBvcnQpIHtcbiAgICBwb3J0LnN0YXJ0KCk7XG4gICAgcmV0dXJuIHdyYXAocG9ydCk7XG4gIH1cbn07XG52YXIgdGhyb3dUcmFuc2ZlckhhbmRsZXIgPSB7XG4gIGNhbkhhbmRsZTogKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgJiYgdGhyb3dNYXJrZXIgaW4gdmFsdWUsXG4gIHNlcmlhbGl6ZSh7IHZhbHVlIH0pIHtcbiAgICBsZXQgc2VyaWFsaXplZDtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgc2VyaWFsaXplZCA9IHtcbiAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICBtZXNzYWdlOiB2YWx1ZS5tZXNzYWdlLFxuICAgICAgICAgIG5hbWU6IHZhbHVlLm5hbWUsXG4gICAgICAgICAgc3RhY2s6IHZhbHVlLnN0YWNrXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlcmlhbGl6ZWQgPSB7IGlzRXJyb3I6IGZhbHNlLCB2YWx1ZSB9O1xuICAgIH1cbiAgICByZXR1cm4gW3NlcmlhbGl6ZWQsIFtdXTtcbiAgfSxcbiAgZGVzZXJpYWxpemUoc2VyaWFsaXplZCkge1xuICAgIGlmIChzZXJpYWxpemVkLmlzRXJyb3IpIHtcbiAgICAgIHRocm93IE9iamVjdC5hc3NpZ24obmV3IEVycm9yKHNlcmlhbGl6ZWQudmFsdWUubWVzc2FnZSksIHNlcmlhbGl6ZWQudmFsdWUpO1xuICAgIH1cbiAgICB0aHJvdyBzZXJpYWxpemVkLnZhbHVlO1xuICB9XG59O1xudmFyIHRyYW5zZmVySGFuZGxlcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbXG4gIFtcInByb3h5XCIsIHByb3h5VHJhbnNmZXJIYW5kbGVyXSxcbiAgW1widGhyb3dcIiwgdGhyb3dUcmFuc2ZlckhhbmRsZXJdXG5dKTtcbmZ1bmN0aW9uIGV4cG9zZShvYmosIGVwID0gc2VsZikge1xuICBlcC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbiBjYWxsYmFjayhldikge1xuICAgIGlmICghZXYgfHwgIWV2LmRhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBpZCwgdHlwZSwgcGF0aCB9ID0gT2JqZWN0LmFzc2lnbih7IHBhdGg6IFtdIH0sIGV2LmRhdGEpO1xuICAgIGNvbnN0IGFyZ3VtZW50TGlzdCA9IChldi5kYXRhLmFyZ3VtZW50TGlzdCB8fCBbXSkubWFwKGZyb21XaXJlVmFsdWUpO1xuICAgIGxldCByZXR1cm5WYWx1ZTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyZW50ID0gcGF0aC5zbGljZSgwLCAtMSkucmVkdWNlKChvYmoyLCBwcm9wKSA9PiBvYmoyW3Byb3BdLCBvYmopO1xuICAgICAgY29uc3QgcmF3VmFsdWUgPSBwYXRoLnJlZHVjZSgob2JqMiwgcHJvcCkgPT4gb2JqMltwcm9wXSwgb2JqKTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSByYXdWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwYXJlbnRbcGF0aC5zbGljZSgtMSlbMF1dID0gZnJvbVdpcmVWYWx1ZShldi5kYXRhLnZhbHVlKTtcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHJhd1ZhbHVlLmFwcGx5KHBhcmVudCwgYXJndW1lbnRMaXN0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG5ldyByYXdWYWx1ZSguLi5hcmd1bWVudExpc3QpO1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBwcm94eSh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgeyBwb3J0MSwgcG9ydDIgfSA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICAgICAgZXhwb3NlKG9iaiwgcG9ydDIpO1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0cmFuc2Zlcihwb3J0MSwgW3BvcnQxXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKHZhbHVlKSB7XG4gICAgICByZXR1cm5WYWx1ZSA9IHsgdmFsdWUsIFt0aHJvd01hcmtlcl06IDAgfTtcbiAgICB9XG4gICAgUHJvbWlzZS5yZXNvbHZlKHJldHVyblZhbHVlKS5jYXRjaCgodmFsdWUpID0+IHtcbiAgICAgIHJldHVybiB7IHZhbHVlLCBbdGhyb3dNYXJrZXJdOiAwIH07XG4gICAgfSkudGhlbigocmV0dXJuVmFsdWUyKSA9PiB7XG4gICAgICBjb25zdCBbd2lyZVZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJldHVyblZhbHVlMik7XG4gICAgICBlcC5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHdpcmVWYWx1ZSksIHsgaWQgfSksIHRyYW5zZmVyYWJsZXMpO1xuICAgICAgaWYgKHR5cGUgPT09IDUpIHtcbiAgICAgICAgZXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgY2FsbGJhY2spO1xuICAgICAgICBjbG9zZUVuZFBvaW50KGVwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIGlmIChlcC5zdGFydCkge1xuICAgIGVwLnN0YXJ0KCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzTWVzc2FnZVBvcnQoZW5kcG9pbnQpIHtcbiAgcmV0dXJuIGVuZHBvaW50LmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiTWVzc2FnZVBvcnRcIjtcbn1cbmZ1bmN0aW9uIGNsb3NlRW5kUG9pbnQoZW5kcG9pbnQpIHtcbiAgaWYgKGlzTWVzc2FnZVBvcnQoZW5kcG9pbnQpKVxuICAgIGVuZHBvaW50LmNsb3NlKCk7XG59XG5mdW5jdGlvbiB3cmFwKGVwLCB0YXJnZXQpIHtcbiAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBbXSwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUmVsZWFzZWQpIHtcbiAgaWYgKGlzUmVsZWFzZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm94eSBoYXMgYmVlbiByZWxlYXNlZCBhbmQgaXMgbm90IHVzZWFibGVcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVByb3h5KGVwLCBwYXRoID0gW10sIHRhcmdldCA9IGZ1bmN0aW9uKCkge1xufSkge1xuICBsZXQgaXNQcm94eVJlbGVhc2VkID0gZmFsc2U7XG4gIGNvbnN0IHByb3h5MiA9IG5ldyBQcm94eSh0YXJnZXQsIHtcbiAgICBnZXQoX3RhcmdldCwgcHJvcCkge1xuICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTtcbiAgICAgIGlmIChwcm9wID09PSByZWxlYXNlUHJveHkpIHtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xuICAgICAgICAgICAgdHlwZTogNSxcbiAgICAgICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpXG4gICAgICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjbG9zZUVuZFBvaW50KGVwKTtcbiAgICAgICAgICAgIGlzUHJveHlSZWxlYXNlZCA9IHRydWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAocHJvcCA9PT0gXCJ0aGVuXCIpIHtcbiAgICAgICAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdGhlbjogKCkgPT4gcHJveHkyIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgciA9IHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgICB0eXBlOiAwLFxuICAgICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpXG4gICAgICAgIH0pLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XG4gICAgICAgIHJldHVybiByLnRoZW4uYmluZChyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjcmVhdGVQcm94eShlcCwgWy4uLnBhdGgsIHByb3BdKTtcbiAgICB9LFxuICAgIHNldChfdGFyZ2V0LCBwcm9wLCByYXdWYWx1ZSkge1xuICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTtcbiAgICAgIGNvbnN0IFt2YWx1ZSwgdHJhbnNmZXJhYmxlc10gPSB0b1dpcmVWYWx1ZShyYXdWYWx1ZSk7XG4gICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xuICAgICAgICB0eXBlOiAxLFxuICAgICAgICBwYXRoOiBbLi4ucGF0aCwgcHJvcF0ubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxuICAgICAgICB2YWx1ZVxuICAgICAgfSwgdHJhbnNmZXJhYmxlcykudGhlbihmcm9tV2lyZVZhbHVlKTtcbiAgICB9LFxuICAgIGFwcGx5KF90YXJnZXQsIF90aGlzQXJnLCByYXdBcmd1bWVudExpc3QpIHtcbiAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7XG4gICAgICBjb25zdCBsYXN0ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGxhc3QgPT09IGNyZWF0ZUVuZHBvaW50KSB7XG4gICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XG4gICAgICAgICAgdHlwZTogNFxuICAgICAgICB9KS50aGVuKGZyb21XaXJlVmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKGxhc3QgPT09IFwiYmluZFwiKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVQcm94eShlcCwgcGF0aC5zbGljZSgwLCAtMSkpO1xuICAgICAgfVxuICAgICAgY29uc3QgW2FyZ3VtZW50TGlzdCwgdHJhbnNmZXJhYmxlc10gPSBwcm9jZXNzQXJndW1lbnRzKHJhd0FyZ3VtZW50TGlzdCk7XG4gICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xuICAgICAgICB0eXBlOiAyLFxuICAgICAgICBwYXRoOiBwYXRoLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSxcbiAgICAgICAgYXJndW1lbnRMaXN0XG4gICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpO1xuICAgIH0sXG4gICAgY29uc3RydWN0KF90YXJnZXQsIHJhd0FyZ3VtZW50TGlzdCkge1xuICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTtcbiAgICAgIGNvbnN0IFthcmd1bWVudExpc3QsIHRyYW5zZmVyYWJsZXNdID0gcHJvY2Vzc0FyZ3VtZW50cyhyYXdBcmd1bWVudExpc3QpO1xuICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgdHlwZTogMyxcbiAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksXG4gICAgICAgIGFyZ3VtZW50TGlzdFxuICAgICAgfSwgdHJhbnNmZXJhYmxlcykudGhlbihmcm9tV2lyZVZhbHVlKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcHJveHkyO1xufVxuZnVuY3Rpb24gbXlGbGF0KGFycikge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJyKTtcbn1cbmZ1bmN0aW9uIHByb2Nlc3NBcmd1bWVudHMoYXJndW1lbnRMaXN0KSB7XG4gIGNvbnN0IHByb2Nlc3NlZCA9IGFyZ3VtZW50TGlzdC5tYXAodG9XaXJlVmFsdWUpO1xuICByZXR1cm4gW3Byb2Nlc3NlZC5tYXAoKHYpID0+IHZbMF0pLCBteUZsYXQocHJvY2Vzc2VkLm1hcCgodikgPT4gdlsxXSkpXTtcbn1cbnZhciB0cmFuc2ZlckNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiB0cmFuc2ZlcihvYmosIHRyYW5zZmVycykge1xuICB0cmFuc2ZlckNhY2hlLnNldChvYmosIHRyYW5zZmVycyk7XG4gIHJldHVybiBvYmo7XG59XG5mdW5jdGlvbiBwcm94eShvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtwcm94eU1hcmtlcl06IHRydWUgfSk7XG59XG5mdW5jdGlvbiB3aW5kb3dFbmRwb2ludCh3LCBjb250ZXh0ID0gc2VsZiwgdGFyZ2V0T3JpZ2luID0gXCIqXCIpIHtcbiAgcmV0dXJuIHtcbiAgICBwb3N0TWVzc2FnZTogKG1zZywgdHJhbnNmZXJhYmxlcykgPT4gdy5wb3N0TWVzc2FnZShtc2csIHRhcmdldE9yaWdpbiwgdHJhbnNmZXJhYmxlcyksXG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogY29udGV4dC5hZGRFdmVudExpc3RlbmVyLmJpbmQoY29udGV4dCksXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogY29udGV4dC5yZW1vdmVFdmVudExpc3RlbmVyLmJpbmQoY29udGV4dClcbiAgfTtcbn1cbmZ1bmN0aW9uIHRvV2lyZVZhbHVlKHZhbHVlKSB7XG4gIGZvciAoY29uc3QgW25hbWUsIGhhbmRsZXJdIG9mIHRyYW5zZmVySGFuZGxlcnMpIHtcbiAgICBpZiAoaGFuZGxlci5jYW5IYW5kbGUodmFsdWUpKSB7XG4gICAgICBjb25zdCBbc2VyaWFsaXplZFZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IGhhbmRsZXIuc2VyaWFsaXplKHZhbHVlKTtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAzLFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgdmFsdWU6IHNlcmlhbGl6ZWRWYWx1ZVxuICAgICAgICB9LFxuICAgICAgICB0cmFuc2ZlcmFibGVzXG4gICAgICBdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHR5cGU6IDAsXG4gICAgICB2YWx1ZVxuICAgIH0sXG4gICAgdHJhbnNmZXJDYWNoZS5nZXQodmFsdWUpIHx8IFtdXG4gIF07XG59XG5mdW5jdGlvbiBmcm9tV2lyZVZhbHVlKHZhbHVlKSB7XG4gIHN3aXRjaCAodmFsdWUudHlwZSkge1xuICAgIGNhc2UgMzpcbiAgICAgIHJldHVybiB0cmFuc2ZlckhhbmRsZXJzLmdldCh2YWx1ZS5uYW1lKS5kZXNlcmlhbGl6ZSh2YWx1ZS52YWx1ZSk7XG4gICAgY2FzZSAwOlxuICAgICAgcmV0dXJuIHZhbHVlLnZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCBtc2csIHRyYW5zZmVycykge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBpZCA9IGdlbmVyYXRlVVVJRCgpO1xuICAgIGVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIGwoZXYpIHtcbiAgICAgIGlmICghZXYuZGF0YSB8fCAhZXYuZGF0YS5pZCB8fCBldi5kYXRhLmlkICE9PSBpZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlcC5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBsKTtcbiAgICAgIHJlc29sdmUoZXYuZGF0YSk7XG4gICAgfSk7XG4gICAgaWYgKGVwLnN0YXJ0KSB7XG4gICAgICBlcC5zdGFydCgpO1xuICAgIH1cbiAgICBlcC5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKHsgaWQgfSwgbXNnKSwgdHJhbnNmZXJzKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZVVVSUQoKSB7XG4gIHJldHVybiBuZXcgQXJyYXkoNCkuZmlsbCgwKS5tYXAoKCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpLnRvU3RyaW5nKDE2KSkuam9pbihcIi1cIik7XG59XG5leHBvcnQge1xuICBjb21saW5rX2V4cG9ydHMgYXMgQ29tbGlua1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@webcontainer/api/dist/vendor/index.js\n");

/***/ })

};
;